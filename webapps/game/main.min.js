function toutap(e,t,i,n){e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.apply(i,n)},i)}function Log(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];data.BaseData.DEBUG&&console.log.apply(console,e)}function getStartSouce(e){for(var t=["windowUI_json.Menu_zy_05_png","windowUI_json.Menu_zy_05_png","windowUI_json.Menu_zy_05_png","windowUI_json.Menu_zy_05_png","windowUI_json.Menu_zy_05_png"],i=0;i<t.length;i++)e>i&&(t[i]="windowUI_json.Menu_zy_04_png");return t}function getresourceinfo(e,t){var i=-1;switch(e){case 1:i=Currencytype.GOLD;break;case 2:i=Currencytype.DIAMOND;break;case 3:i=Currencytype.LIFE;break;case 10:i=t}return i}function sendgetrequest(e,t,i,n){void 0===n&&(n=null);var o=ModelManager.getInstance().getModel(ModuleName.LOGIN),r=o.loginParam,a={token:r.token};core.Http.sendGetData(e,a,function(o){0==o.code?(Log(e,"====",o.data),t.apply(i,[o.data]),n&&tips.Tips.tip(n)):tips.Tips.tip(o.errMsg+"("+o.code+")")})}function saveLocalData(e,t){egret.localStorage.setItem(e,t)}function readLocalData(e){return egret.localStorage.getItem(e)}function clearLocalData(e){null!=e?egret.localStorage.removeItem(e):egret.localStorage.clear()}function getrect(e,t){var i=e.getBounds();return i.x=e.x-t.x,i.y=e.y-t.y,i}function createRect(e,t,i,n,o,r,a,s){void 0===o&&(o=1),void 0===r&&(r=0),void 0===a&&(a=0);var h=new egret.Shape;return h.x=e,h.y=t,h.graphics.beginFill(r,o),h.graphics.drawRoundRect(0,0,i,n,a,s),h.graphics.endFill(),h}function createCircle(e,t,i,n,o){void 0===n&&(n=1),void 0===o&&(o=0);var r=new egret.Shape;return r.graphics.beginFill(o,n),r.graphics.drawCircle(e,t,i),r.graphics.endFill(),r}function createMC(e,t,i){var n=RES.getRes(e),o=RES.getRes(t),r=new egret.MovieClipDataFactory(n,o),a=r.generateMovieClipData(i),s=new egret.MovieClip(a);return s}function createBitmap(e,t,i){void 0===t&&(t=.5),void 0===i&&(i=.5);var n=new egret.Bitmap(RES.getRes(e));return n.anchorOffsetX=n.width*t,n.anchorOffsetY=n.height*i,n}var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),core;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(t,e),t}(egret.DisplayObjectContainer);e.Component=t,__reflect(t.prototype,"core.Component",["core.IComponent"])}(core||(core={}));var core;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dispose=function(){},t}(e.Component);e.BaseUIComponent=t,__reflect(t.prototype,"core.BaseUIComponent")}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.prototype.execute=function(){},e.prototype.canReplace=function(e){return!1},e.prototype.giveup=function(){this.setFinished(!0)},e.prototype.isFinished=function(){return this._isFinished},e.prototype.getType=function(){return"BaseAction"},e.prototype.setFinished=function(e){this._isFinished=e},e}();e.BaseAction=t,__reflect(t.prototype,"core.BaseAction",["core.IAction"])}(core||(core={}));var core;!function(e){var t=function(t){function i(e){var i=t.call(this)||this;return i.moduleName=e,i}return __extends(i,t),i.prototype.show=function(){e.LayerCenter.getInstance().getLayer(LayerEnum.MAP).addChild(this)},i}(e.BaseUIComponent);e.ModuleComponent=t,__reflect(t.prototype,"core.ModuleComponent")}(core||(core={}));var Dictionary=function(){function e(){this.m_keys=[],this.m_values=[]}return e.prototype.getLength=function(){return this.m_keys.length},Object.defineProperty(e.prototype,"values",{get:function(){return this.m_values.concat()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return this.m_keys.concat()},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.m_keys.indexOf(e)},e.prototype.add=function(e,t){var i=this.indexOf(e);i>=0?this.m_values[i]=t:(this.m_keys.push(e),this.m_values.push(t))},e.prototype.get=function(e){var t=this.indexOf(e);return t>=0?this.m_values[t]:null},e.prototype.remove=function(e){var t=this.indexOf(e);return t>=0?(this.m_keys.splice(t,1),this.m_values.splice(t,1)[0]):null},e.prototype.clear=function(){this.m_keys.length=0,this.m_values.length=0},e.prototype.getRandom=function(){var e=Math.random()*this.keys.length<<0;return this.m_values[e]},e}();__reflect(Dictionary.prototype,"Dictionary");var core;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.enterDispose=!1,i.moveActionManager=new e.ActionManager,i}return __extends(i,t),i.prototype.setResourceId=function(e){this.resourceId=e},i.prototype.roleBody=function(){return this.body},i.prototype.playMoveAction=function(e){this.moveActionManager.act(e)},i.prototype.playAction=function(e){var t=this;if(!e)return void t.body.play(-1);if(null==t.body)return void t.dispose();if("UR"==e||"DL"==e?this.body.matrix=RoleMatrix.plus_matrix:this.body.matrix=RoleMatrix.minus_matrix,t.body.movieClipData&&t.currentAction==e)return void t.body.play(-1);var i=t.resOrintation(e);t.currentAction=e;var n=t.getMcResNameByType(t.resourceId,i),o=t.mc_factory.generateMovieClipData(n);t.body.movieClipData=o,t.body.play(-1),t.createShadom()},i.prototype.stopInLook=function(){var e=this;e.body.stop()},i.prototype.createShadom=function(){var t=this,i=t.body.height;null==t.shadom&&(t.shadom=e.BitmapCreator.createBitmap("hallUI.roleShaden_png"),t.addChildAt(t.shadom,0)),"UL"==t.currentAction||"DR"==t.currentAction?(t.shadom.y=i/4,t.shadom.x=-50):(t.shadom.y=i/4+10,t.shadom.x=-40)},i.prototype.getMcResNameByType=function(e,t){var i=jsondata.JsonConfigManager.getRoleCfgById(e);return"DL"==t?i.resources:i.resources2},i.prototype.resOrintation=function(e){return"UL"==e&&(e="UR"),"DR"==e&&(e="DL"),e},i.prototype.stopAction=function(){this.body.stop()},i.prototype.setMcFactory=function(e){this.mc_factory=e},i.prototype.addRoleBody=function(e){var t=this;t.body=e;var i=this.body.height;t.body.anchorOffsetX=this.body.width/2,t.body.anchorOffsetY=Math.ceil(i/2),t.addChild(e),t.createShadom()},i.prototype.displayBodyAt=function(e){e.addChild(this)},i.prototype.setPosition=function(e,t){this.x=e,this.y=t},i.prototype.removeFormDisplay=function(){this.parent&&(this.body.stop(),this.parent.removeChild(this))},i.prototype.removeFoodEvt=function(){},i.prototype.dispose=function(){var e=this;e.enterDispose=!0,e.moveActionManager&&e.moveActionManager.dispose(),e.moveActionManager=null,e.body&&(e.body.stop(),e.body.parent&&e.body.parent.removeChild(e.body),e.body.movieClipData=null),e.body=null,e.mc_factory=null,e.currentSection&&(e.currentSection.length=0),e.currentSection=null,e.removeChildren(),e.parent&&e.parent.removeChild(e)},i}(egret.DisplayObjectContainer);e.Role=t,__reflect(t.prototype,"core.Role",["core.IComponent"])}(core||(core={}));var game;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.copyData=function(e,t){for(var i in e){var n=typeof e[i];("number"==n||"string"==n)&&(t[i]=e[i])}},e}();e.BaseModel=t,__reflect(t.prototype,"game.model.BaseModel")}(t=e.model||(e.model={}))}(game||(game={}));var view;!function(e){var t;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.uiComplete,e),e.skinName="resource/ui_skin/HallBackMap.exml",i.currentMap=e,e}return __extends(i,t),i.prototype.uiComplete=function(){this.mapBack=new egret.DisplayObjectContainer,this.showBuilding.addChild(this.mapBack),this.activeLayer=new egret.DisplayObjectContainer,this.showBuilding.addChild(this.activeLayer),this.flySkyLayer=new egret.DisplayObjectContainer,this.showBuilding.addChild(this.flySkyLayer),this._depthManager=new core.DepthManager(this.activeLayer),this.scroller.viewport.scrollH=600,this.scroller.viewport.scrollV=100,this.showRabbit(1e3),this.hallThis=this},i.prototype.showRabbit=function(e){var t=this;setTimeout(function(){var e=RES.getRes("hero_json"),i=RES.getRes("hero_img");null==t.mc_factory&&(t.mc_factory=new egret.MovieClipDataFactory(e,i));var n="Rabbit_Show",o=t.mc_factory.generateMovieClipData(n);t.rabbit=new egret.MovieClip(o),t.rabbit.gotoAndPlay(0,1);var r=[t.rabbit1,t.rabbit2,t.rabbit3,t.rabbit4,t.rabbit5],a=RandomUtils.limitInteger(0,4);r[a].addChild(t.rabbit),t.rabbit.addEventListener(egret.Event.COMPLETE,function(e){r[a].removeChildren(),t.hallThis.showRabbit(RandomUtils.limitInteger(1e3,2e3))},t)},e)},i.prototype.createMapFlower=function(t){void 0===t&&(t=1);var i=this,n=jsondata.JsonDataManager_copy.getInstance().getDinnerPosition(t);5>t&&(i.flowerOne=core.BitmapCreator.createBitmap("hallUI.flower_01_png"),i.flowerOne.x=n.flower1.x,i.flowerOne.y=n.flower1.y,i.mapBack.addChild(this.flowerOne)),i.dinner=new e.Dinner(t),i.dinner.x=n.dinner.x,i.dinner.y=n.dinner.y,i.mapBack.addChild(i.dinner),5>t&&(i.flowerTwo=core.BitmapCreator.createBitmap("hallUI.flower_02_png"),i.flowerTwo.x=n.flower2.x,i.flowerTwo.y=n.flower2.y,i.mapBack.addChild(this.flowerTwo))},i.prototype.createOneChange=function(t){var i=this;i.dinner&&i.dinner.dispose();var n=jsondata.JsonDataManager_copy.getInstance().getDinnerPosition(t);5>t?(i.flowerOne.x=n.flower1.x,i.flowerOne.y=n.flower1.y,i.mapBack.addChild(this.flowerOne)):i.flowerOne&&i.flowerOne.parent&&i.flowerOne.parent.removeChild(i.flowerOne),i.dinner=new e.Dinner(t),i.dinner.x=n.dinner.x,i.dinner.y=n.dinner.y,i.mapBack.addChild(i.dinner),5>t?(i.flowerTwo.x=n.flower2.x,i.flowerTwo.y=n.flower2.y,i.mapBack.addChild(this.flowerTwo)):i.flowerTwo&&i.flowerTwo.parent&&i.flowerTwo.parent.removeChild(i.flowerTwo)},i.prototype.swapDepth=function(e){var t=this.getDepth(e.x,e.y);this._depthManager.swapDepth(e,t)},i.prototype.swapStandArticleDepth=function(e){var t=e.x+e.width,i=e.y+e.height,n=this.getDepth(t,i);this._depthManager.swapDepth(e,n)},i.prototype.swapBarDepth=function(e){var t=e.x,i=Math.round(e.y+e.height),n=this.getDepth(t,i);this._depthManager.swapDepth(e,n)},i.prototype.swapRoleDepth=function(e){var t=e.x+e.roleBody().width/2,i=e.y+e.roleBody().height/2,n=this.getDepth(t,i);this._depthManager.swapDepth(e,n)},i.prototype.getDepth=function(e,t){var i=1800,n=Math.round((t*i+e)/8);return n},i.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this),i.currentMap=null,this._depthManager&&this._depthManager.clearDepthDictionary(),this._depthManager=null,this.showBuilding.removeChildren(),this.showBuilding=null,this.mapBack.removeChildren(),this.mapBack=null,this.currentLevel=null,this.flowerOne=null,this.dinner=null,this.flowerTwo=null,this.activeLayer.removeChildren(),this.activeLayer=null,this.scroller=null},i}(eui.Component);e.HallBackMap=t,__reflect(t.prototype,"view.hall.HallBackMap",["core.IComponent"])}(t=e.hall||(e.hall={}))}(view||(view={}));var data;!function(e){var t=function(){function e(){}return e}();e.FoodInf=t,__reflect(t.prototype,"data.FoodInf")}(data||(data={}));var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?n(o):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),egret.Logger.logLevel=egret.Logger.ALL,core.Core.run(this.stage);var i=core.LayerCenter.getInstance();i.addLayer(LayerEnum.MAP,new core.Layer),i.addLayer(LayerEnum.MENU,new core.Layer),i.addLayer(LayerEnum.WINDOW,new core.Layer),i.addLayer(LayerEnum.HEAD,new core.Layer),i.addLayer(LayerEnum.LOADIN,new core.Layer),i.addLayer(LayerEnum.TIP,new core.Layer),i.addLayer(LayerEnum.COVER,new core.Layer);var n=new egret.URLLoader;n.addEventListener(egret.Event.COMPLETE,this.loadConfigComplete,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.configIOError,this),n.dataFormat=egret.URLLoaderDataFormat.TEXT;var o=new egret.URLRequest("resource/version.json?v="+Math.random());n.load(o)},t.prototype.loadConfigComplete=function(e){var t=e.currentTarget;t.removeEventListener(egret.Event.COMPLETE,this.loadConfigComplete,this),t.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.configIOError,this);var i=JSON.parse(t.data);Log(i),data.BaseData.version=i.version,data.BaseData.baseUrl=i.baseUrl,RES.web.Html5VersionController.prototype.getVirtualUrl=function(e){return e+="?v="+data.BaseData.version},this.loadBgAndBaseConfig()},t.prototype.configIOError=function(e){var t=e.currentTarget;t.removeEventListener(egret.Event.COMPLETE,this.loadConfigComplete,this),t.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.configIOError,this),Log("loading config err......")},t.prototype.loadBgAndBaseConfig=function(){core.LoadingUIManager.showSimpleLoading(),Loading.getInstance().loadResource("resource/loading.json","preload",this.setProgress,this.loadComplete,this)},t.prototype.setProgress=function(e,t){core.LoadingUIManager.getCurrentLoading().setProgress(e,t)},t.prototype.loadComplete=function(e){core.LoadingUIManager.getCurrentLoading().hide(),this.loginUI=new view.login.LoginLogic,this.loginUI.setloginSuccess(this.login,this),core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).addChild(this.loginUI)},t.prototype.login=function(){var e=ModelManager.getInstance().getModel(ModuleName.LOGIN),t=e.loginParam,i=this,n=!1;n?core.Http.sendPostData("login",t,function(e){200==e.code?(data.BaseData.baseUrl="http://"+e.data.ip+":"+e.data.port+"/"+e.data.version+"/baseUrl/",t.token=e.data.targetLoginInfo.data.token,t.refreshToken=e.data.targetLoginInfo.data.refreshToken,Log("loginParam.token ===",t.token,"     loginParam.refreshToken===",t.refreshToken),t.isNewUser=e.data.targetLoginInfo.data.isNewUser,t.storeLocal(),i.loginUI&&i.loginUI.dispose(),i.startLoadingRes()):tips.Tips.tipJustStr("登录异常"+e.code)}):core.Http.sendPostData("login",t,function(e){0==e.code?(t.token=e.data.token,t.refreshToken=e.data.refreshToken,t.isNewUser=e.data.isNewUser,t.storeLocal(),i.loginUI&&i.loginUI.dispose(),i.startLoadingRes()):tips.Tips.tipJustStr("登录异常"+e.code)})},t.prototype.startLoadingRes=function(){core.LoadingUIManager.hideLoading(),core.LoadingUIManager.createBaseLoadingUI(),this.loadBaseCfg()},t.prototype.loadBaseCfg=function(){core.LoadingUIManager.showBaseLoading(),Loading.getInstance().loadResource("resource/base.res.json","hall_resource",this.setProgress,this.baseLoadComplete,this)},t.prototype.baseLoadComplete=function(e){core.LoadingUIManager.hideLoading(),jsondata.JsonDataManager_copy.getInstance().analyseHallCfg(RES.getRes("hallcfg_new_json")),jsondata.JsonConfigManager.analyseConfigJson(RES.getRes("config_json")),this.createGameScene()},t.prototype.createGameScene=function(){var e=ModelManager.getInstance().getModel(ModuleName.LOGIN);e.loginParam;if(this.checkFirstGame()){var t=new view.cartoon.Cartoon(this.toHall,this);core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(t)}else this.toHall()},t.prototype.checkFirstGame=function(){var e=!1;return Log("FirstGame====",egret.localStorage.getItem("FirstGame")),null==egret.localStorage.getItem("FirstGame")&&(e=!0,egret.localStorage.setItem("FirstGame","1")),e},t.prototype.toHall=function(){core.Controller.getInstance().startMoule(ModuleName.HALL),core.Controller.getInstance().showFriend()},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function o(e){t.call(n,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var core;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(t,e),t}(egret.DisplayObjectContainer);e.Layer=t,__reflect(t.prototype,"core.Layer")}(core||(core={}));var RandomUtils=function(){function e(){}return e.limit=function(e,t){e=Math.min(e,t),t=Math.max(e,t);var i=t-e;return e+Math.random()*i},e.limitInteger=function(e,t){return Math.floor(this.limit(e,t+1))},e.randomArray=function(e){var t=Math.floor(Math.random()*e.length);return e[t]},e}();__reflect(RandomUtils.prototype,"RandomUtils");var core;!function(e){var t=function(){function t(){}return t.prototype.hideFriend=function(){this.friendList&&this.friendList.parent&&this.friendList.parent.removeChild(this.friendList)},t.prototype.showFriend=function(){null==this.friendList?this.friendList=new view.friend.friendship:this.friendList.resize(),e.LayerCenter.getInstance().getLayer(LayerEnum.WINDOW).addChild(this.friendList)},t.getInstance=function(){return null==t.s_instance&&(t.s_instance=new t),t.s_instance},t.prototype.startTheSame=function(e){this.p_moduleName==e?this.view.show():(this.p_moduleName=e,this.show())},t.prototype.startMoule=function(t,i,n){this.p_moduleName=t,this.p_resourceUrl=i,this.p_name=n,i&&n?(e.LoadingUIManager.showBaseLoading(),Loading.getInstance().loadResource(this.p_resourceUrl,this.p_name,this.nodeCallback,this.completeCallback,this)):this.show()},t.prototype.createClass=function(e){var t=egret.getDefinitionByName(e),i=new t(e);return i},t.prototype.nodeCallback=function(t,i){e.LoadingUIManager.getCurrentLoading().setProgress(t,i)},t.prototype.completeCallback=function(t){e.LoadingUIManager.hideLoading(),this.show(t.data)},t.prototype.show=function(e){this.hide(),this.view=this.createClass(this.p_moduleName),this.view.show()},t.prototype.hide=function(){this.view&&(this.view.dispose(),this.view.parent&&this.view.parent.removeChild(this.view)),this.view=null},t}();e.Controller=t,__reflect(t.prototype,"core.Controller")}(core||(core={}));var LayerEnum;!function(e){e[e.MAP=0]="MAP",e[e.MENU=1]="MENU",e[e.WINDOW=2]="WINDOW",e[e.HEAD=3]="HEAD",e[e.LOADIN=4]="LOADIN",e[e.TIP=5]="TIP",e[e.COVER=6]="COVER"}(LayerEnum||(LayerEnum={}));var Currencytype;!function(e){e[e.RICE=1]="RICE",e[e.BANANA=2]="BANANA",e[e.VEGETABLE=3]="VEGETABLE",e[e.MEAT=4]="MEAT",e[e.FISH=5]="FISH",e[e.ENERGY=6]="ENERGY",e[e.STAR=7]="STAR",e[e.GOLD=8]="GOLD",e[e.DIAMOND=9]="DIAMOND",e[e.LIFE=34]="LIFE"}(Currencytype||(Currencytype={}));var ArticleType;!function(e){e[e.ZAOTAI=1]="ZAOTAI",e[e.HUOGUI=2]="HUOGUI",e[e.BINGXIANG=3]="BINGXIANG",e[e.ZHAOPAI=4]="ZHAOPAI",e[e.ZHUOZI=5]="ZHUOZI",e[e.YIZI=6]="YIZI",e[e.HAIBAO=7]="HAIBAO",e[e.DENGJU=8]="DENGJU"}(ArticleType||(ArticleType={}));var TownBuildType;!function(e){e[e.restaurant=1]="restaurant",e[e.farm=2]="farm",e[e.orchard=3]="orchard",e[e.vegetable=4]="vegetable",e[e.pasture=5]="pasture",e[e.fish=6]="fish",e[e.foodcenter=7]="foodcenter",e[e.order=8]="order"}(TownBuildType||(TownBuildType={}));var Loading=function(){function e(){}return e.getInstance=function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance},e.prototype.loadResource=function(e,t,i,n,o){this._groupName=t,this._nodeCallback=i,this._completeCallback=n,this._callbacker=o,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig(e,"resource/")},e.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup(this._groupName)},e.prototype.onResourceLoadComplete=function(e){e.groupName==this._groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this._completeCallback.call(this._callbacker,e))},e.prototype.onItemLoadError=function(e){Log("Url:"+e.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(e){Log("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},e.prototype.onResourceProgress=function(e){e.groupName==this._groupName&&this._nodeCallback.call(this._callbacker,e.itemsLoaded,e.itemsTotal)},e}();__reflect(Loading.prototype,"Loading");var MainLoading=function(e){function t(){var t=e.call(this)||this;return t.processLoadingRate=0,t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.back_bg=core.BitmapCreator.createBitmap("jiazaitu_jpg"),this.back_bg.width=core.LayerCenter.stageWidth,this.back_bg.height=core.LayerCenter.stageHeight,this.addChild(this.back_bg),this.textField=new egret.TextField,this.addChild(this.textField),this.textField.height=50,this.textField.textAlign="center",this.textField.bold=!0,this.textField.textColor=0,this.loadingBack=core.BitmapCreator.createBitmap("base.jiazai_01_png"),this.loadingWidth=this.loadingBack.width,this.loadingBack.x=core.LayerCenter.stageWidth/2-this.loadingWidth/2,this.loadingBack.y=core.LayerCenter.stageHeight-100,this.sourceX=this.loadingBack.x,this.textField.width=this.loadingWidth,this.textField.x=this.loadingBack.x,this.textField.y=this.loadingBack.y-60,this.addChild(this.loadingBack),this.loadingProcess=core.BitmapCreator.createBitmap("base.jiazai_02_png"),this.loadingProcess.x=Math.round((this.loadingBack.width-this.loadingProcess.width)/2)+this.loadingBack.x,this.loadingProcess.y=Math.round((this.loadingBack.height-this.loadingProcess.height)/2)+this.loadingBack.y,this.addChild(this.loadingProcess),this.egg=core.BitmapCreator.createBitmap("base.jiazai_03_png"),this.egg.x=this.loadingBack.x,this.egg.y=this.loadingBack.y-this.egg.height/2,this.addChild(this.egg),this.sourceWidth=this.loadingProcess.width-this.egg.width,this.processWidth=this.loadingProcess.width,this.cock=core.BitmapCreator.createBitmap("base.jiazai_04_png"),this.cock.x=this.loadingBack.x,this.cock.y=this.loadingBack.y-this.cock.height/2},t.prototype.enterFrame=function(){this.processLoadingRate>=1&&(this.processLoadingRate=0),this.processLoadingRate>=.95?(this.processLoadingRate=.95,this.cock.parent&&this.cock.parent.removeChild(this.cock),null==this.egg.parent&&this.addChild(this.egg)):(this.cock.x=this.sourceX+this.sourceWidth,this.addChild(this.cock),this.egg.parent&&this.egg.parent.removeChild(this.egg)),this.setDetailProgress(this.processLoadingRate),this.processLoadingRate+=.05},t.prototype.setProgress=function(e,t){this.processLoadingRate=1,this.setDetailProgress(this.processLoadingRate),this.textField.text="Loading..."+e+"/"+t},t.prototype.setDetailProgress=function(e){var t=this.sourceWidth*e;this.loadingProcess.width=this.processWidth*e,this.egg.x=this.sourceX+t,this.cock.x=this.sourceX+t},t.prototype.show=function(){this.processLoadingRate=0,core.EnterFrameManager.register(this),core.LayerCenter.getInstance().getLayer(LayerEnum.LOADIN).addChild(this)},t.prototype.hide=function(){this.processLoadingRate=0,core.EnterFrameManager.unregister(this),this.parent&&this.parent.removeChild(this)},t.prototype.dispose=function(){},t}(egret.Sprite);__reflect(MainLoading.prototype,"MainLoading",["core.ILoadingUI","core.IEnterFrame"]);var SimpleLoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.textField.width=480,this.textField.height=100,this.addChild(this.textField),this.textField.textAlign="center",this.y=300;var e=core.LayerCenter.stageWidth,t=this.textField.width,i=Math.round((e-t)/2);this.x=i},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t.prototype.setDetailProgress=function(e){},t.prototype.show=function(){core.LayerCenter.getInstance().getLayer(LayerEnum.LOADIN).addChild(this)},t.prototype.hide=function(){this.parent&&this.parent.removeChild(this)},t.prototype.dispose=function(){},t}(egret.Sprite);__reflect(SimpleLoadingUI.prototype,"SimpleLoadingUI",["core.ILoadingUI"]);var core;!function(e){var t=function(){function e(e){this._container=e,this._depths=new Dictionary}return e.prototype.swapDepth=function(e,t){var i=this,n=this._container.getChildIndex(e);if(0>n)return-1;var o=this.getDepth(e);if(t==o)return i.setDepth(e,t),n;var r=i._container.numChildren;if(2>r)return i.setDepth(e,t),n;if(t<i.getDepth(i._container.getChildAt(0)))return i._container.setChildIndex(e,0),i.setDepth(e,t),0;if(t>=i.getDepth(i._container.getChildAt(r-1)))return i._container.setChildIndex(e,r-1),i.setDepth(e,t),r-1;var a,s,h,c=r-1;for(t>o?(a=n,c=r-1):(a=0,c=n);c>a+1;)if(s=a+.5*(c-a),h=i.getDepth(i._container.getChildAt(s)),h>t)c=s;else{if(!(t>h))return i._container.setChildIndex(e,s),i.setDepth(e,t),s;a=s}var l=i.getDepth(i._container.getChildAt(a)),d=i.getDepth(i._container.getChildAt(c));return s=t>=d?c>=n?Math.min(c,r-1):Math.min(c+1,r-1):l>t?a>n?Math.max(a-1,0):a:a>=n?a:Math.min(a+1,r-1),i._container.setChildIndex(e,s),i.setDepth(e,t),s},e.prototype.getDepth=function(e){return null==this._depths.get(e)?this.countDepth(e,this._container.getChildIndex(e),0):this._depths.get(e)},e.prototype.setDepth=function(e,t){this._depths.add(e,t)},e.prototype.countDepth=function(e,t,i){return void 0===i&&(i=0),null==this._depths.get(e)?0>=t?0:this.countDepth(this._container.getChildAt(t-1),t-1,i+1):this._depths.get(e)+i},e.prototype.clearDepthDictionary=function(){this._depths.clear()},e.prototype.dispose=function(){this._container=null,this.clearDepthDictionary(),this._depths=null},e}();e.DepthManager=t,__reflect(t.prototype,"core.DepthManager")}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.setup=function(t){this._items=new Array,t.addEventListener(egret.Event.ENTER_FRAME,e.onEnterFrame,this)},e.onEnterFrame=function(e){for(var t,i=this._items,n=i.length,o=0;n>o;o++)t=i[o],t?t.enterFrame():i.splice(o,1)},e.register=function(e){this._items.push(e)},e.unregister=function(e){var t=this._items.indexOf(e);t>-1&&this._items.splice(t,1)},e}();e.EnterFrameManager=t,__reflect(t.prototype,"core.EnterFrameManager")}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.showSimpleLoading=function(){e.s_currentLoading=e.simpleLoading,e.simpleLoading.show()},e.createSimpleLoading=function(){e.simpleLoading=new SimpleLoadingUI},e.createBaseLoadingUI=function(){e.baseLoading=new MainLoading},e.showBaseLoading=function(){e.s_currentLoading=e.baseLoading,e.baseLoading.show()},e.getCurrentLoading=function(){return e.s_currentLoading},e.hideLoading=function(){e.s_currentLoading.hide()},e}();e.LoadingUIManager=t,__reflect(t.prototype,"core.LoadingUIManager")}(core||(core={}));var core;!function(e){var t=function(){function e(){this.roleList=new Dictionary}return e.getInstance=function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance},e.prototype.clearRole=function(){this.roleList.clear()},e.prototype.createRole=function(e,t){var i;i=new view.hall.HallRole,i.setRoleData(e);var n=RES.getRes("hero_json"),o=RES.getRes("hero_img");null==this.mcDataFactory&&(this.mcDataFactory=new egret.MovieClipDataFactory(n,o)),i.setMcFactory(this.mcDataFactory);var r=i.getMcResNameByType(e.id,t),a=this.mcDataFactory.generateMovieClipData(r);i.currentAction=t;var s=new egret.MovieClip(a);return i.addRoleBody(s),i},e.prototype.createChef=function(e,t){var i=new view.hall.HallChef;i.index=t;var n=RES.getRes("hero_json"),o=RES.getRes("hero_img");null==this.mcDataFactory&&(this.mcDataFactory=new egret.MovieClipDataFactory(n,o)),i.setMcFactory(this.mcDataFactory);var r=i.getMcResNameByType(100,e),a=this.mcDataFactory.generateMovieClipData(r);i.currentAction=e;var s=new egret.MovieClip(a);return i.addRoleBody(s),i},e.prototype.createWaitor=function(e){var t=RES.getRes("hero_json"),i=RES.getRes("hero_img");null==this.mcDataFactory&&(this.mcDataFactory=new egret.MovieClipDataFactory(t,i));var n="waitor_"+e.index,o=this.mcDataFactory.generateMovieClipData(n),r=new view.hall.HallWaitor;r.setMcFactory(this.mcDataFactory),r.employeeData=e;var a=new egret.MovieClip(o);return r.addRoleBody(a),r},e.prototype.createBird=function(){var e;e=new view.hall.HallBird;var t=RES.getRes("hero_json"),i=RES.getRes("hero_img");return null==this.mcDataFactory&&(this.mcDataFactory=new egret.MovieClipDataFactory(t,i)),e.setMcFactory(this.mcDataFactory),e.stand(),e},e}();e.RoleManager=t,__reflect(t.prototype,"core.RoleManager")}(core||(core={}));var core;!function(e){var t=function(){function e(){this.stuntDictionary=new Dictionary,this.barStuntDic=new Dictionary,this.buildingStuntDictionary=new Dictionary,this.buildingCompleteDictionary=new Dictionary,this.circleDictionary=new Dictionary}return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.createBuildingProcess=function(e){var t;if(t=this.buildingStuntDictionary.get(e),null==t){var i=this.getStuntMcFactoryByIndex(4),n=this.getResName(4),o=i.generateMovieClipData(n);t=new egret.MovieClip(o),this.buildingStuntDictionary.add(e,t)}return t},e.prototype.createBuildingComplete=function(e){var t;if(t=this.buildingCompleteDictionary.get(e),null==t){var i=this.getStuntMcFactoryByIndex(5),n=this.getResName(5),o=i.generateMovieClipData(n);t=new egret.MovieClip(o),this.buildingCompleteDictionary.add(e,t)}return t},e.prototype.createStunt=function(e){var t;t=this.stuntDictionary.get(e);var i=this.getStuntMcFactoryByIndex(e),n=this.getResName(e),o=i.generateMovieClipData(n);return t=new egret.MovieClip(o),t.scaleX=.8,t.scaleY=.8,this.stuntDictionary.add(e,t),t},e.prototype.getStuntMcFactoryByIndex=function(e){var t;if(1==e||4==e||5==e||10==e){if(null==this.stuntMcFactory){var i=RES.getRes("Stunts_json"),n=RES.getRes("Stunts_png");this.stuntMcFactory=new egret.MovieClipDataFactory(i,n)}t=this.stuntMcFactory}else{if(null==this.stuntMcFactory1){var i=RES.getRes("Stunts1_json"),n=RES.getRes("Stunts1_png");this.stuntMcFactory1=new egret.MovieClipDataFactory(i,n)}t=this.stuntMcFactory1}return t},e.prototype.getCircleStunt=function(e){var t;if(t=this.circleDictionary.get(e),null==t){var i=this.getStuntMcFactoryByIndex(7),n=this.getResName(7),o=i.generateMovieClipData(n);t=new egret.MovieClip(o),t.scaleX=.5,t.scaleY=.5,this.circleDictionary.add(e,t)}return t},e.prototype.createMakeFoodStunt=function(e,t){var i;if(i=this.barStuntDic.get(t),null==i){var n=this.getStuntMcFactoryByIndex(t),o=this.getResName(t),r=n.generateMovieClipData(o);i=new egret.MovieClip(r),this.barStuntDic.add(e,i)}return i},e.prototype.getResName=function(e){switch(e){case 1:return"Money";case 2:return"Trouble";case 3:return"MakeFood";case 4:return"Building";case 5:return"BuildingComplete";case 6:return"NewGoodsBoom";case 7:return"NewGoodsCicle";case 8:return"DunDisplay";case 9:return"DunBoom";case 10:return"Back"}return""},e}();e.StuntManager=t,__reflect(t.prototype,"core.StuntManager")}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.setup=function(){this._items=new Array,this._timer=new egret.Timer(1e3),this._timer.addEventListener(egret.TimerEvent.TIMER,this.ticker,this),this._timer.start()},e.ticker=function(e){for(var t,i=this._items,n=i.length,o=0;n>o;o++)t=i[o],t?t.tick():i.splice(o,1)
},e.register=function(e){this._items.push(e)},e.unregister=function(e){var t=this._items.indexOf(e);t>-1&&this._items.splice(t,1)},e}();e.TickerManager=t,__reflect(t.prototype,"core.TickerManager")}(core||(core={}));var core;!function(e){var t=function(t){function i(){var n=t.call(this)||this;return n.map_distance_x=-150,n.map_distance_y=-70,n.mapBack=new egret.DisplayObjectContainer,n.addChild(n.mapBack),n.activeLayer=new egret.DisplayObjectContainer,n.addChild(n.activeLayer),n._depthManager=new e.DepthManager(n.activeLayer),i.currentMap=n,n}return __extends(i,t),i.prototype.startMove=function(){this.x=this.map_distance_x,this.y=this.map_distance_y;var t=e.LayerCenter.stageWidth,i=e.LayerCenter.stageHeight;this.scroll_min_x=t-this.mapWidth,this.scroll_min_y=i-this.mapHeight,this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mapTouchBegin,this)},i.prototype.mapTouchBegin=function(e){this.first_touch_x=e.localX,this.first_touch_y=e.localY,this.current_touch_x=e.localX,this.current_touch_y=e.localY,this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.mapTouchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.mapTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.mapTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mapTouchTab,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.mapTouchEnd,this),this.addEventListener(egret.TouchEvent.LEAVE_STAGE,this.mapTouchEnd,this)},i.prototype.mapTouchMove=function(t){this.current_touch_x=t.localX,this.current_touch_y=t.localY;var i=this.current_touch_x-this.first_touch_x,n=this.current_touch_y-this.first_touch_y;this.x_oritation=i,this.y_oritation=n;var o=this.x+i,r=this.y+n;o<this.scroll_min_x&&(o=this.scroll_min_x),o>this.scroll_max_x&&(o=this.scroll_max_x),r<this.scroll_min_y&&(r=this.scroll_min_y),r>this.scroll_max_y&&(r=this.scroll_max_y),this.x=o,this.y=r;var a=this.localToGlobal(t.localX,t.localY),s=e.LayerCenter.stageWidth,h=e.LayerCenter.stageHeight;(a.x+10>s||a.y+10>h)&&this.removeMoveEvt(),(a.x<10||a.y<10)&&this.removeMoveEvt()},i.prototype.mapTouchTab=function(e){this.tweenMap(),this.removeMoveEvt()},i.prototype.tweenMap=function(){var e=Math.round(.3*this.x_oritation),t=Math.round(.6*this.y_oritation),i=this.x+e,n=this.y+t;i<this.scroll_min_x&&(i=this.scroll_min_x),i>this.scroll_max_x&&(i=this.scroll_max_x),n<this.scroll_min_y&&(n=this.scroll_min_y),n>this.scroll_max_y&&(n=this.scroll_max_y)},i.prototype.mapTouchEnd=function(e){this.removeMoveEvt()},i.prototype.removeMoveEvt=function(){this.removeEventListener(egret.TouchEvent.TOUCH_END,this.mapTouchEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.mapTouchEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.mapTouchEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.mapTouchEnd,this),this.removeEventListener(egret.TouchEvent.LEAVE_STAGE,this.mapTouchEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mapTouchMove,this)},i.prototype.initMap=function(e){this.createBackground(e)},i.prototype.createBackground=function(t){this.mapImage=e.BitmapCreator.createBitmap(t),this.mapImage.cacheAsBitmap=!0,this.mapWidth=this.mapImage.width,this.mapHeight=this.mapImage.height,this.scroll_max_x=0,this.scroll_max_y=0,this.mapBack.addChild(this.mapImage)},i.prototype.swapDepth=function(e){var t=this.getDepth(e.x,e.y);this._depthManager.swapDepth(e,t)},i.prototype.swapStandArticleDepth=function(e){var t=e.x+e.width,i=e.y+e.height,n=this.getDepth(t,i);this._depthManager.swapDepth(e,n)},i.prototype.swapStandHallDepth=function(e){var t=e.x+e.width/2,i=e.y+e.height/2,n=this.getDepth(t,i);this._depthManager.swapDepth(e,n)},i.prototype.swapBarDepth=function(e){var t=e.x,i=e.y,n=this.getDepth(t,i);this._depthManager.swapDepth(e,n)},i.prototype.swapRoleDepth=function(e){var t=e.x+e.roleBody().width/2,i=e.y+e.roleBody().height/2,n=this.getDepth(t,i);this._depthManager.swapDepth(e,n)},i.prototype.getDepth=function(e,t){var i=1800,n=Math.round((t*i+e)/8);return n},i.prototype.getBarDepth=function(e,t){var i=800,n=Math.round(600*(t*i+e)/e);return n},i.prototype.dispose=function(){this.removeMoveEvt(),i.currentMap=null,this.mapImage&&(this.mapImage.parent&&this.mapImage.parent.removeChild(this.mapImage),this.mapImage=null),this.mapBack&&this.mapBack.parent&&(this.mapBack.removeChildren(),this.mapBack.parent.removeChild(this.mapBack)),this.mapBack=null,this.activeLayer&&this.activeLayer.parent&&(this.activeLayer.removeChildren(),this.activeLayer.parent.removeChild(this.activeLayer)),this._depthManager&&this._depthManager.dispose(),this._depthManager=null},i}(egret.DisplayObjectContainer);e.Map=t,__reflect(t.prototype,"core.Map",["core.IComponent"])}(core||(core={}));var core;!function(e){var t=function(){function e(){this.speed=5,this.orientation="UL"}return e}();e.Section=t,__reflect(t.prototype,"core.Section")}(core||(core={}));var core;!function(e){var t=function(){function t(){}return t.run=function(t){egret.ImageLoader.crossOrigin="anonymous",e.EnterFrameManager.setup(t),e.TickerManager.setup(),e.LayerCenter.getInstance().init(t)},t}();e.Core=t,__reflect(t.prototype,"core.Core")}(core||(core={}));var RoleMatrix=function(){function e(){}return e.plus_matrix=new egret.Matrix,e.minus_matrix=new egret.Matrix(-1),e}();__reflect(RoleMatrix.prototype,"RoleMatrix");var core;!function(e){var t=function(){function e(){}return e.createBitmap=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},e.createDecode=function(e){return e="Decode_json."+e+"_png",this.createBitmap(e)},e.createBarByIndex=function(e,t){var i=e%10,n=Math.floor(e/10),o=jsondata.JsonConfigManager.getArticleResource(n,i,t),r=this.barDictionary.get(o);return r?r:(r=this.createBitmap("Decode_json."+o+"_png"),this.barDictionary.add(o,r),r)},e.createBarByResource=function(e,t){var i="Decode_json."+t+"_png",n=this.barDictionary.get(e);return n?n:(n=this.createBitmap(i),this.barDictionary.add(e,n),n)},e.createChefByIndex=function(e,t){var i=this.chefDictionary.get(t);return i?i:(i=this.createBitmap(e),this.chefDictionary.add(t,i),i)},e.createFoodBitmapById=function(e){var t="Food."+jsondata.JsonConfigManager.getFoodDataById(e).foodlogo+"_png";return this.createBitmap(t)},e.getFoodName=function(e){return"Food.food_"+e+"_png"},e.createCurrencyByType=function(e){var t="currency"+e+"_png";return this.createBitmap(t)},e.getCurrencyName=function(e){return"currency"+e+"_png"},e.getArticleShadom=function(e){var t=this.articleShadom.get(e);return null==t&&(t=this.createBitmap("hallUI.articleShaden_png"),t.cacheAsBitmap=!0,this.articleShadom.add(e,t)),t},e.bitmapDictionary=new Dictionary,e.abitmapDictionary=new Dictionary,e.barDictionary=new Dictionary,e.chefDictionary=new Dictionary,e.articleShadom=new Dictionary,e}();e.BitmapCreator=t,__reflect(t.prototype,"core.BitmapCreator")}(core||(core={}));var core;!function(e){var t=function(){function t(){}return t.caculateOritation=function(e){var t="",i=Math.abs(e.end.y-e.start.y),n=Math.abs(e.end.x-e.start.x),o=i/n;return t+=e.end.y>e.start.y?"D":e.end.x<e.start.x?o>=.31?"U":"D":"U",t+=e.end.x>e.start.x?"R":"L"},t.createSectionList=function(e){for(var t=new Array,i=0;i<e.length-1;i++){var n=this.getSection();n.start=new egret.Point(e[i].x,e[i].y),n.end=new egret.Point(e[i+1].x,e[i+1].y),n.orientation=this.caculateOritation(n),egret.Point.distance(n.start,n.end)>this.speed&&t.push(n)}return t},t.getSection=function(){var t=new e.Section;return t.speed=this.speed,t},t.createBackSectionList=function(e,t){var i=new Array,n=this.getSection();n.start=e,n.end=new egret.Point(t[t.length-1].x,t[t.length-1].y),n.orientation=this.caculateOritation(n),i.push(n);for(var o=t.length-1;o>0;o--){var r=this.getSection();r.start=new egret.Point(t[o].x,t[o].y),r.end=new egret.Point(t[o-1].x,t[o-1].y),i.push(r)}return i},t.speed=6,t}();e.MapCaculator=t,__reflect(t.prototype,"core.MapCaculator")}(core||(core={}));var core;!function(e){var t=function(){function t(){}return t.createTextfield=function(e,t,i,n,o,r){void 0===e&&(e=15),void 0===t&&(t=16777215),void 0===i&&(i=egret.VerticalAlign.MIDDLE),void 0===n&&(n=egret.HorizontalAlign.CENTER),void 0===o&&(o="Verdana"),void 0===r&&(r=!1);var a=new egret.TextField;return a.size=e,a.textColor=t,a.textAlign=n,a.verticalAlign=i,a.fontFamily=o,a.bold=r,a.cacheAsBitmap=!0,a},t.createCenterText=function(e,t,i,n){return void 0===e&&(e=20),void 0===t&&(t=16777215),void 0===i&&(i=""),this.createTextfield(e,t,egret.VerticalAlign.MIDDLE,egret.HorizontalAlign.CENTER,i,n)},t.createLeftText=function(e,t,i,n){return void 0===e&&(e=20),void 0===t&&(t=16777215),void 0===i&&(i=""),this.createTextfield(e,t,egret.VerticalAlign.MIDDLE,egret.HorizontalAlign.LEFT,i,n)},t.getTimeFormatStr=function(e){var t,i=Math.ceil(e/1e3),n=Math.floor(i/3600),o=Math.floor(i%3600/60),r=Math.floor(i%60);n=n>0?n:0,o=o>0?o:0,r=r>0?r:0;var a=n>=10?n.toString():"0"+n.toString(),s=o>=10?o.toString():"0"+o.toString(),h=r>=10?r.toString():"0"+r.toString();return t=a+":"+s+":"+h},t.getSecondTimeFormatStr=function(e){var t,i=e,n=Math.floor(i/3600),o=Math.floor(i%3600/60),r=Math.floor(i%60);n=n>0?n:0,o=o>0?o:0,r=r>0?r:0;var a=n>=10?n.toString():"0"+n.toString(),s=o>=10?o.toString():"0"+o.toString(),h=r>=10?r.toString():"0"+r.toString();return t=a+":"+s+":"+h},t.getTimeFormatStrInTown=function(e){var t=Math.floor(e/3600),i=Math.floor(e%3600/60),n=Math.floor(e%60),o="";return t>0?o=t+"小时":i>0?o=i+"分钟":n>0&&(o="<1分钟"),o},t.getCookTimeFormatStrInTown=function(e){var t=Math.floor(e/3600),i=Math.floor(e%3600/60),n=Math.floor(e%60),o="";return t>0?o=t+"时":i>0?o=i+"分":n>0&&(o=n+"秒"),o},t.formatString=function(e,t){if(e){for(var i=/\{[0-9]+?\}/;e.match(i);){var n=e.match(i),o=n[0].match(/[0-9]+?/);e=e.replace(i,t[parseInt(o[0])])}return e}return""},t.parseHtmlText=function(e){return t.s_textFlowParser.parse(e)},t.showTextTip=function(t,i){void 0===i&&(i=16777215);var n=e.LayerCenter.stageWidth,o=e.LayerCenter.stageHeight,r=e.TextUtils.createTextfield(30);r.text=t,r.textColor=i,r.width=r.textWidth,r.height=r.textHeight,r.x=.5*(n-r.width),r.y=.5*(o-r.height),e.LayerCenter.getInstance().stage.addChild(r),egret.Tween.get(r).to({y:.4*o,alpha:0},1e3,egret.Ease.circIn).call(function(e){e.parent.removeChild(e)},this,[r])},t.s_textFlowParser=new egret.HtmlTextParser,t}();e.TextUtils=t,__reflect(t.prototype,"core.TextUtils")}(core||(core={}));var comm;!function(e){var t;!function(e){var t=function(e){function t(t,i,n,o,r,a){void 0===o&&(o=8);var s=e.call(this)||this;return s._speed=12,s._speed=o,s._roleview=t,s._startPt=i,s._endPt=n,s._currPt=new egret.Point(i.x,i.y),s._callback=r,s._callee=a,s.initAction(),s}return __extends(t,e),t.prototype.initAction=function(){},t.prototype.execute=function(){var e=this;this.isEnd()?(e._roleview.setPosition(e._endPt.x,e._endPt.y),e.updatePath(),e.setFinished(!0),this.clear()):e.moveOneStep()},t.prototype.clear=function(){this._callback&&this._callback.call(this._callee,this._roleview,this._callback),this.clearQuote()},t.prototype.updatePath=function(){var e=view.hall.HallBackMap.currentMap;e?e.swapRoleDepth(this._roleview):(this.giveup(),this.clearQuote())},t.prototype.clearQuote=function(){this._roleview=null,this._currPt=null,this._startPt=null,this._endPt=null,this._callback=null,this._callee=null},t.prototype.moveOneStep=function(){var e=this;if(null==e._roleview.parent)return e.giveup(),void e.clearQuote();var t=Math.atan2(e._endPt.y-e._startPt.y,e._endPt.x-e._startPt.x),i=Math.cos(t)*e._speed,n=Math.sin(t)*e._speed;e._currPt.offset(i,n),e._roleview.setPosition(e._currPt.x,e._currPt.y),e.updatePath()},t.prototype.isEnd=function(){var e=new egret.Point(this._roleview.x,this._roleview.y);return egret.Point.distance(e,this._endPt)<this._speed?!0:!1},t.prototype.canReplace=function(e){return this.getType()==e.getType()?!0:!1},t.prototype.getType=function(){return"MoveAction"},t}(core.BaseAction);e.MoveAction=t,__reflect(t.prototype,"comm.action.MoveAction")}(t=e.action||(e.action={}))}(comm||(comm={}));var CurrencyEnumType=function(){function e(){}return e.getCurrencyStrByType=function(t){switch(t){case e.star:return"星级";case e.gold:return"金币";case e.rice:return"大米";case e.meat:return"肉类";case e.vegetable:return"蔬菜";case e.fruit:return"水果";case e.physical:return"体力";case e.donation:return"捐赠";case e.fish:return"鱼贝";case e.heart:return"爱心"}return""},e.star=7,e.gold=8,e.rice=1,e.meat=4,e.vegetable=3,e.fruit=2,e.physical=6,e.donation=17,e.fish=5,e.defender=10,e.stealDefender=12,e.heart=12,e}();__reflect(CurrencyEnumType.prototype,"CurrencyEnumType");var ErrorCode=function(){function e(){}return e.codeStr={1:"Token失效",2:"不够体力啦",3:"材料不足",4:"大米超过库存上限",5:"肉超过库存上限",6:"蔬菜超过库存上限",7:"水果超过库存上限",8:"鱼超过库存上限",9:"防御你，别捣乱",10:"金币不足",11:"等级不够升级摆件",250:"奖励已达到上限",2001:"您的材料材料已满",2002:"您已达到偷取次数上限",2003:"给我留点吧",2004:"正在保护时间",2005:"对方使用防护盾",10003:"金币不够，无法达到升级条件",10004:"等级超过政府大厅，无法达到升级条件",10006:"用户等级不够，无法开启吧台！"},e}();__reflect(ErrorCode.prototype,"ErrorCode");var ModuleName=function(){function e(){}return e.LOGIN="login",e.HALL="view.hall.Hall",e.TOWN="view.town.TownChange",e.FRIEND="friend",e}();__reflect(ModuleName.prototype,"ModuleName");var RewardType=function(){function e(){}return e.meterial=0,e.rice=1,e.fruit=2,e.vegetable=3,e.meat=4,e.fish=5,e.pysical=6,e.exp=7,e.gold=8,e.food=9,e.defender=10,e.attack=11,e.stealDefender=12,e.goldMultiply=13,e.level=14,e.achieve=15,e.foodFormular=16,e.donation=17,e.skill=18,e.makeFoodTime=19,e.buildingTime=20,e.youAreLimit=250,e.typeStr={0:"食材奖励",1:"粮食",2:"水果",3:"蔬菜",4:"肉类",5:"鱼贝",6:"体力",7:"经验",8:"金币",9:"食谱",10:"捣乱防御",11:"捣乱画笔工具",12:"偷取资源防御链",13:"金钱倍率",14:"等级",15:"成就",16:"菜品",17:"捐赠值",18:"熟练度",19:"菜式时间",20:"建筑时间",250:"道具奖励已达到上限"},e}();__reflect(RewardType.prototype,"RewardType");var FilterCreator=function(){function e(){}return e.grayFilter=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]),e.lightGlow=new egret.GlowFilter(16776960,.8,5,5,5,10),e}();__reflect(FilterCreator.prototype,"FilterCreator");var core;!function(e){var t=function(){function e(){}return e.sendPostData=function(e,t,i){var o=new n;o.sendPostData(e,t,i)},e.sendGetData=function(e,t,i){var n=new o;n.sendGetData(e,t,i)},e}();e.Http=t,__reflect(t.prototype,"core.Http");var i=function(t){function i(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddedToStage,e),e}return __extends(i,t),i.prototype.onAddedToStage=function(t){this.touchEnabled=!0,this.width=e.LayerCenter.getInstance().stage.stageWidth,this.height=e.LayerCenter.getInstance().stage.stageHeight,this.addChild(createRect(0,0,this.width,this.height,.6)),this.createan()},i.prototype.createan=function(){this.loading=createBitmap("base.loadpic_png"),this.loading.x=this.width/2,this.loading.y=this.height/2,this.addChild(this.loading),egret.Tween.get(this.loading,{loop:!0}).to({rotation:360},500)},i.prototype.show=function(){this.visible=data.BaseData.showcover},i.prototype.hide=function(){this.visible=!1},i.getInstance=function(){return null==this._ins&&(this._ins=new i,e.LayerCenter.getInstance().getLayer(LayerEnum.COVER).addChild(this._ins)),this._ins},i._ins=null,i}(egret.DisplayObjectContainer);__reflect(i.prototype,"Covershap");var n=function(){function t(){}return t.prototype.sendPostData=function(e,t,n){function o(){l.removeEventListener(egret.Event.COMPLETE,o,this),l.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this);var t=JSON.parse(l.response.substring());if(Log("getMessage",e,t),1==t.code){l=new egret.HttpRequest,l.responseType=egret.HttpResponseType.TEXT,l.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s=data.BaseData.baseUrl+"refreshLogin",l.open(s,"POST");var h=ModelManager.getInstance().getModel(ModuleName.LOGIN),c={refreshToken:h.loginParam.refreshToken};l.send(JSON.stringify(c)),l.addEventListener(egret.Event.COMPLETE,r,this),l.addEventListener(egret.IOErrorEvent.IO_ERROR,a,this)}else i.getInstance().hide(),n(t)}function r(t){l.removeEventListener(egret.Event.COMPLETE,r,this),l.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this);var i=JSON.parse(l.response.substring());if(Log("getMessage","refreshLogin",i),0==i.code){var o=ModelManager.getInstance().getModel(ModuleName.LOGIN);o.loginParam.token=i.data.token,o.loginParam.refreshToken=i.data.refreshToken,o.loginParam.isNewUser=i.data.isNewUser,c.token=i.data.token,h.sendPostData(e,c,n)}else 2==i.code?(Log(i.errMsg),window.location.reload()):tips.Tips.tipJustStr("网络异常")}function a(e){Log("onGetIOError_"+e.target._url),tips.Tips.tipJustStr("网络异常"),i.getInstance().hide()}var s,h=this,c=t;s=data.BaseData.baseUrl+e,t=JSON.stringify(t),Log("sendMessage",e,t);var l=new egret.HttpRequest;l.responseType=egret.HttpResponseType.TEXT,l.setRequestHeader("Content-Type","application/text;charset=UTF-8"),l.open(s,"POST"),l.send(t),l.addEventListener(egret.Event.COMPLETE,o,this),l.addEventListener(egret.IOErrorEvent.IO_ERROR,a,this),i.getInstance().show()},t.prototype.login=function(){var t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.loginParam,n=this,o={password:i.password,userID:i.userID};e.Http.sendPostData("login",o,function(e){0==e.code?(i.token=e.data.token,i.refreshToken=e.data.refreshToken,i.isNewUser=e.data.isNewUser,i.storeLocal(),n.toHall()):tips.Tips.tipJustStr("登录异常"+e.code)})},t.prototype.toHall=function(){e.Controller.getInstance().startMoule(ModuleName.HALL),e.Controller.getInstance().showFriend()},t}();__reflect(n.prototype,"HttpPost");var o=function(){function t(){}return t.prototype.sendGetData=function(e,t,n){function o(){p.removeEventListener(egret.Event.COMPLETE,o,this),p.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this);var t=JSON.parse(p.response.substring());if(Log("getMessage",e,t),1==t.code){var h=ModelManager.getInstance().getModel(ModuleName.LOGIN);p=new egret.HttpRequest,p.responseType=egret.HttpResponseType.TEXT,p.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s=data.BaseData.baseUrl+"refreshLogin",p.open(s,"POST");var c={refreshToken:h.loginParam.refreshToken};p.send(JSON.stringify(c)),p.addEventListener(egret.Event.COMPLETE,r,this),p.addEventListener(egret.IOErrorEvent.IO_ERROR,a,this)}else i.getInstance().hide(),n(t)}function r(t){p.removeEventListener(egret.Event.COMPLETE,r,this),p.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this);var i=JSON.parse(p.response.substring());if(Log("getMessage","refreshLogin",i),0==i.code){var o=ModelManager.getInstance().getModel(ModuleName.LOGIN);o.loginParam.token=i.data.token,o.loginParam.refreshToken=i.data.refreshToken,o.loginParam.isNewUser=i.data.isNewUser,c.token=i.data.token,h.sendGetData(e,c,n)}else 2==i.code?(Log(i.errMsg),window.location.reload()):tips.Tips.tipJustStr("网络异常")}function a(e){Log("onGetIOError_"+e.target._url),tips.Tips.tipJustStr("网络异常"),i.getInstance().hide()}var s,h=this,c=t;s=data.BaseData.baseUrl+e,Log("sendMessage",e,t);var l,d="",u=0;for(l in t)u>0&&(d+="&"),d+=l+"="+t[l],u++;var p=new egret.HttpRequest;s=s+"?"+d,p=new egret.HttpRequest,p.responseType=egret.HttpResponseType.TEXT,p.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),p.open(s,"GET"),p.send(),p.addEventListener(egret.Event.COMPLETE,o,this),p.addEventListener(egret.IOErrorEvent.IO_ERROR,a,this),i.getInstance().show()},t.prototype.login=function(){var t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.loginParam,n=this,o={password:i.password,userID:i.userID};e.Http.sendPostData("login",o,function(e){0==e.code?(i.token=e.data.token,i.refreshToken=e.data.refreshToken,i.isNewUser=e.data.isNewUser,i.storeLocal(),n.toHall()):tips.Tips.tipJustStr("登录异常"+e.code)})},t.prototype.toHall=function(){e.Controller.getInstance().startMoule(ModuleName.HALL),e.Controller.getInstance().showFriend()},t}();__reflect(o.prototype,"HttpGet")}(core||(core={}));var jsondata;!function(e){var t=function(){function t(){}return t.getRandomPt=function(){var e=new egret.Point(422,670),t=Math.ceil(30+100*Math.random()),i=Math.ceil(30+100*Math.random());return t%2==0&&(t=-t),i%2==0&&(i=-i),e.x+=t,e.y+=i,e},t.getFoodDataById=function(e){for(var t,i=0;i<this.foodList.length;i++)if(t=this.foodList[i],t.foodid==e)return t;return t},t.getPropDataById=function(e){for(var t,i=0;i<this.advancedpropList.length;i++)if(t=this.advancedpropList[i],t.id==e)return t;return t},t.analyseConfigJson=function(t){var i,n,o=0,r=t.food;for(o=0;o<r.length;o++)n=new e.config.Food,i=r[o],CopyUtil.copyData(i,n),this.foodList.push(n);Log("食物配置列表",this.foodList);var a,s=t.skill;for(o=0;o<s.length;o++)a=new e.config.Skill,i=s[o],CopyUtil.copyData(i,a),this.skillList.push(a);Log("熟练度奖励",this.skillList);var h,c=t.facilities;for(o=0;o<c.length;o++)h=new e.config.Facilities,i=c[o],CopyUtil.copyData(i,h),this.facilitiesList.push(h);Log("设施基础配置表",this.facilitiesList);var l,d=t.strength;for(o=0;o<d.length;o++)l=new e.config.Strength,i=d[o],CopyUtil.copyData(i,l),this.strengthList.push(l);Log("厨力配置表",this.strengthList);var u,p=t.restaurant;for(o=0;o<p.length;o++)u=new e.config.Restaurant,i=p[o],CopyUtil.copyData(i,u),this.restaurantList.push(u);Log("餐厅配置表",this.restaurantList);var g,v=t.research;for(o=0;o<v.length;o++)g=new e.config.Research,i=v[o],CopyUtil.copyData(i,g),this.researchList.push(g);Log("研究中心配置表",this.researchList);var f,m=t.cookcenter;for(o=0;o<m.length;o++)f=new e.config.Cookcenter,i=m[o],CopyUtil.copyData(i,f),this.cookcenterList.push(f);Log("美食中心配置表",this.cookcenterList);var y,w=t.role;for(o=0;o<w.length;o++)y=new e.config.RoleCfg,i=w[o],CopyUtil.copyData(i,y),this.roleCfgList.push(y);Log("角色配置表:",this.roleCfgList);var L,C=t.decorate;for(o=0;o<C.length;o++)L=new e.config.Decorate,i=C[o],CopyUtil.copyData(i,L),this.decorateList.push(L);Log("装饰表读取",this.decorateList);var T,I=t.advancedprop;for(o=0;o<I.length;o++)T=new e.config.advancedprop,i=I[o],CopyUtil.copyData(i,T),this.advancedpropList.push(T);Log("高级食物建材配置表读取",this.advancedpropList)},t.getDecodeResource=function(e,t){for(var i,n="",o=0;o<this.decorateList.length;o++)if(i=this.decorateList[o],i.position==e&&i.grande==t)return i.resourceid;return n},t.getSkillList=function(e){for(var t,i=0,n=new Array;i<this.skillList.length;i++)t=this.skillList[i],t.foodid==e&&n.push(t);return n},t.getStrengthList=function(e){for(var t,i=0,n=new Array;i<this.strengthList.length;i++)t=this.strengthList[i],t.foodid==e&&n.push(t);return n},t.getFoodResource=function(e,t){for(var i,n=0;n<this.facilitiesList.length;n++)if(i=this.facilitiesList[n],i.facilitiesid==e&&i.level==t)return i;return null},t.getFacilityResource=function(e,t){for(var i,n=0;n<this.facilitiesList.length;n++)if(i=this.facilitiesList[n],i.facilitiesid==e&&i.level==t)return i;return null},t.getArticleResource=function(e,t,i){for(var n,o="",r=0;r<this.decorateList.length;r++)if(n=this.decorateList[r],n.position==e&&n.type==t&&n.grande==i)return n.resourceid;return o},t.getRoleCfgById=function(e){var t,i;for(i=0;i<this.roleCfgList.length;i++)if(t=this.roleCfgList[i],t.roleid==e)return t;return t},t.roleCfgList=new Array,t.decorateList=new Array,t.buildList=new Array,t.foodList=new Array,t.strengthList=new Array,t.skillList=new Array,t.facilitiesList=new Array,t.manorList=[],t.resourcesList=[],t.researchList=[],t.restaurantList=[],t.cookcenterList=[],t.gradeMissionList=[],t.advancedpropList=[],t}();e.JsonConfigManager=t,__reflect(t.prototype,"jsondata.JsonConfigManager")}(jsondata||(jsondata={}));var jsondata;!function(e){var t=function(){function e(){this.defaultCounter=0}return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.analyseHallCfg=function(e){this.bPositionArray=e.buildingPosition,this.articlePosition=e.articlePosition,this.barPosition=e.barPosition,this.hallPosition=e.hallPosition,this.dinnerPosition=e.dinnerPosition,this.logo=e.logo,this.enterPointBase=e.enterPointBase,this.outPointBase=e.outPointBase,this.waiting=e.waiting,this.seatPosition=e.seatPosition,this.roadBridge_enter=e.roadBridge_enter,this.roadBridge_exit=e.roadBridge_exit,this.waitor=e.waitor,this.chefRoad=e.chefRoad,this.birdStandPosition=new Array;var t=[{x:676,y:212},{x:883,y:172},{x:675,y:285},{x:769,y:270}];this.birdStandPosition.push(t),t=[{x:216,y:576},{x:306,y:612},{x:469,y:805},{x:513,y:752}],this.birdStandPosition.push(t),t=[{x:633,y:893},{x:700,y:904},{x:977,y:986},{x:981,y:904}],this.birdStandPosition.push(t),t=[{x:1175,y:369},{x:1390,y:437},{x:1481,y:463},{x:1400,y:473}],this.birdStandPosition.push(t),t=[{x:1089,y:1013},{x:1203,y:1098},{x:1227,y:904},{x:1371,y:833}],this.birdStandPosition.push(t)},e.prototype.getBirdPosition=function(){var e,t=Math.floor(5*Math.random());return e=this.birdStandPosition[t]},e.prototype.getWaitorEnterRoad=function(e){var t,i=this.getWaitorPosition(e),n=[this.outPointBase[2],this.outPointBase[1],{x:678,y:740},i];return t=core.MapCaculator.createSectionList(n)},e.prototype.getWaitorOutRoad=function(e){var t,i=this.getWaitorPosition(e),n=[i,{x:678,y:740},this.outPointBase[1],this.outPointBase[2]];return t=core.MapCaculator.createSectionList(n)},e.prototype.getChefEnterRoadByMapLevelAndIndex=function(e,t,i){var n,o;o=this.outPointBase.concat([]).reverse();var r,a,s=0,h=0,c=this.chefRoad;for(s=0;6>s;s++)if(t==c[s].mapLevel){for(r=c[s].position,h=0;h<r.length;h++)if(r[h].index==i){a=r[h].road;break}break}return o=o.concat(a.concat([]).reverse()),o.push(e),n=core.MapCaculator.createSectionList(o)},e.prototype.getChefOutRoadByMapLevelAndIndex=function(e,t,i){var n,o,r=[e],a=0,s=0,h=this.chefRoad;for(a=0;6>a;a++)if(t==h[a].mapLevel){for(o=h[a].position,s=0;s<o.length;s++)if(i==o[s].index){h=o[s].road;break}break}return r=r.concat(h.concat(this.outPointBase)),n=core.MapCaculator.createSectionList(r)},e.prototype.getWaitorPosition=function(e){for(var t=0,i=this.waitor.length;i>t;t++)if(this.waitor[t].index==e)return this.waitor[t];return null},e.prototype.getWatingPosition=function(e){for(var t=0,i=this.waiting.length;i>t;t++)if(this.waiting[t].index==e)return this.waiting[t];return null},e.prototype.createWatingMoveSection=function(e,t,i){var n=this.getWatingPosition(e),o=[{x:t,y:i},n];return core.MapCaculator.createSectionList(o)},e.prototype.getLogoPositionByLevel=function(e){for(var t=0,i=this.logo;t<i.length;t++)if(e==i[t].level)return i[t];return null},e.prototype.getDinnerPosition=function(e){var t=0,i=this.dinnerPosition,n=i.length,o=null;for(t=0;n>t;t++)if(o=i[t],e==o.level)return o;return null},e.prototype.getEnterSectionByIndex=function(e,t,i,n){var o=new Array;t>1&&o.push({x:i,y:n}),o=o.concat(this.enterPointBase);for(var r,a=0;a<this.roadBridge_enter.length;a++)if(e==this.roadBridge_enter[a].level){r=this.roadBridge_enter[a].position;break}for(a=0;a<r.length;a++)if(t==r[a].seatNumber){o.push(r[a]);break}var s=this.getSeatPositionBySeatNumber(e,t);return o.push(s),core.MapCaculator.createSectionList(o)},e.prototype.getSeatPositionBySeatNumber=function(e,t){var i,n=0,o=this.seatPosition,r=o.length,a=null;for(n=0;r>n;n++)if(a=o[n],e==a.level){i=a.position;break}for(r=i.length,n=0;r>n;n++)if(i[n].seatNumber==t)return i[n];return null},e.prototype.getReturnSectionByIndex=function(e,t,i,n){for(var o,r=[{x:i,y:n}],a=0;a<this.roadBridge_exit.length;a++)if(e==this.roadBridge_exit[a].level){o=this.roadBridge_exit[a].position;break}for(a=0;a<o.length;a++)if(t==o[a].seatNumber){r.push(o[a]);break}return r=r.concat(this.outPointBase),core.MapCaculator.createSectionList(r)},e.prototype.getBarPositionByIndex=function(e,t){var i,n=0,o=this.barPosition,r=o.length,a=null;for(n=0;r>n;n++)if(a=o[n],e==a.level){i=a.position;break}for(r=i.length,n=0;r>n;n++)if(i[n].index==t)return i[n];return null},e.prototype.getArticlePostionByPositionIdx=function(e,t){var i,n=0,o=this.articlePosition,r=o.length,a=null;for(n=0;r>n;n++)if(a=o[n],e==a.level){i=a.position;break}for(r=i.length,n=0;r>n;n++)if(i[n].positionIdx==t)return i[n];return null},e.prototype.clearDefaultCounter=function(){this.defaultCounter=0},e}();e.JsonDataManager_copy=t,__reflect(t.prototype,"jsondata.JsonDataManager_copy")}(jsondata||(jsondata={}));var jsondata;!function(e){var t;!function(e){var t=function(){function e(){}return e}();e.RoleCfg=t,__reflect(t.prototype,"jsondata.config.RoleCfg");var i=function(){function e(){}return e}();e.Decorate=i,__reflect(i.prototype,"jsondata.config.Decorate");var n=function(){function e(){}return e}();e.Build=n,__reflect(n.prototype,"jsondata.config.Build");var o=function(){function e(){}return e}();e.Food=o,__reflect(o.prototype,"jsondata.config.Food");var r=function(){function e(){}return e}();e.Strength=r,__reflect(r.prototype,"jsondata.config.Strength");var a=function(){function e(){}return e}();e.Facilities=a,__reflect(a.prototype,"jsondata.config.Facilities");var s=function(){function e(){}return e}();e.Skill=s,__reflect(s.prototype,"jsondata.config.Skill");var h=function(){function e(){}return e}();e.Cookcenter=h,__reflect(h.prototype,"jsondata.config.Cookcenter");var c=function(){function e(){}return e}();e.Research=c,__reflect(c.prototype,"jsondata.config.Research");var l=function(){function e(){}return e}();e.Resources=l,__reflect(l.prototype,"jsondata.config.Resources");var d=function(){function e(){}return e}();e.Manor=d,__reflect(d.prototype,"jsondata.config.Manor");var u=function(){function e(){}return e}();e.Restaurant=u,__reflect(u.prototype,"jsondata.config.Restaurant");var p=function(){function e(){}return e}();e.GradeMission=p,__reflect(p.prototype,"jsondata.config.GradeMission");var g=function(){function e(){}return e}();e.advancedprop=g,__reflect(g.prototype,"jsondata.config.advancedprop")}(t=e.config||(e.config={}))}(jsondata||(jsondata={}));var comm;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.tick=function(){},e}();e.BaseTicker=t,__reflect(t.prototype,"comm.ticker.BaseTicker",["core.ITicker"])}(t=e.ticker||(e.ticker={}))}(comm||(comm={}));var tips;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.firstEnter=!1,t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/TipSkin.exml",t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.uiComplete=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBtnClick,this),this.firstEnter&&this.showTips(this.titleStr,this.tipsType,this.tips,this.yesCallback,this.noCallback,this.callee)},t.prototype.showTips=function(e,t,i,n,o,r){return this.yesCallback=n,this.noCallback=o,this.callee=r,null==this.contant?(this.firstEnter=!0,this.tipsType=t,this.titleStr=e,void(this.tips=i)):(this.firstEnter=!1,1==t?this.sureBtn.x=243:(this.sureBtn.x=133,this.closeBtn.x=351),this.title.text=e,this.contant.text=i,void core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this))},t.prototype.closeBtnClick=function(e){this.parent&&this.parent.removeChild(this),this.noCallback&&this.noCallback.call(this.callee),this.yesCallback=null,this.noCallback=null,this.callee=null},t.prototype.sureBtnClick=function(e){this.parent&&this.parent.removeChild(this),this.yesCallback&&this.yesCallback.call(this.callee),this.yesCallback=null,this.noCallback=null,this.callee=null},t.prototype.dispose=function(){},t}(eui.Component);e.SureTip=t,__reflect(t.prototype,"tips.SureTip",["core.IComponent"])}(tips||(tips={}));var tips;!function(e){var t=function(){function e(){}return e.tip=function(e){var t=this;t.tipContainer&&egret.Tween.removeTweens(t.tipContainer);var i=core.LayerCenter.getInstance().getLayer(LayerEnum.TIP),n=core.LayerCenter.stageWidth,o=core.LayerCenter.stageHeight;t.tipContainer=new egret.Sprite,null==t.tipText&&(t.tipText=core.TextUtils.createCenterText(26,2061731,"黑体",!0)),null==t.tipBg&&(t.tipBg=core.BitmapCreator.createBitmap("hallUI.tips_png"),t.tipContainer.width=t.tipBg.width,t.tipContainer.height=t.tipBg.height),t.tipContainer.y=o/3,t.tipContainer.x=n/2-t.tipBg.width/2,t.tipContainer.scaleX=0,t.tipContainer.addChild(t.tipBg),t.tipText.text=e,t.tipText.width=400,t.tipText.textAlign="center",t.tipText.y=t.tipBg.height/2,t.tipContainer.addChild(this.tipText),i.addChild(this.tipContainer);
egret.Tween.get(t.tipContainer,{loop:!1}).to({scaleX:1},300).wait(1e3).call(function(){t.tipContainer.parent&&(t.tipContainer.parent.removeChild(t.tipContainer),egret.Tween.removeTweens(t.tipContainer),t.tipText.text="")},t)},e.tipJustStr=function(e){var t=core.LayerCenter.getInstance().getLayer(LayerEnum.TIP),i=core.LayerCenter.stageWidth,n=core.LayerCenter.stageHeight;null==this.tipText&&(this.tipText=core.TextUtils.createCenterText(30,16711680,"Arial",!0)),this.tipText.text=e,this.tipText.width=i,this.tipText.y=n/3,t.addChild(this.tipText);var o=this,r=0;o.tipText.alpha=1;var a=function(){o.tipText.y-=1,r%20==0&&(o.tipText.alpha-=.1),r++};egret.Tween.get(o.tipText,{onChange:a,onChangeObj:t}).to({y:n/5},2e3,egret.Ease.sineIn).call(function(){o.tipText.parent&&(o.tipText.parent.removeChild(o.tipText),egret.Tween.removeTweens(o.tipText))})},e}();e.Tips=t,__reflect(t.prototype,"tips.Tips");var i=function(){function e(){}return e.ShowMoney=function(e){var t=core.LayerCenter.getInstance().getLayer(LayerEnum.TIP),i=core.TextUtils.createCenterText(26,16775504,"Arial",!0);0>e?i.text=""+e:i.text="+"+e,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=267+i.width/2,i.y=50+i.height/2,i.bold=!0,i.strokeColor=11297024,i.stroke=3,t.addChild(i),egret.Tween.get(i).to({scaleX:1.2,scaleY:1.2},500).to({scaleX:0,scaleY:0},500).call(function(){i.parent&&(i.parent.removeChild(i),egret.Tween.removeTweens(i))})},e}();e.ShowMoney=i,__reflect(i.prototype,"tips.ShowMoney");var n=function(){function e(){}return e.ShowPower=function(e){var t=core.LayerCenter.getInstance().getLayer(LayerEnum.TIP),i=core.TextUtils.createCenterText(26,3997183,"Arial",!0);0>e?i.text=""+e:i.text="+"+e,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=267+i.width/2,i.y=82+i.height/2,i.bold=!0,i.strokeColor=23921,i.stroke=3,t.addChild(i),egret.Tween.get(i).to({scaleX:1.2,scaleY:1.2},500).to({scaleX:0,scaleY:0},500).call(function(){i.parent&&(i.parent.removeChild(i),egret.Tween.removeTweens(i))})},e.ShowLover=function(e){var t=core.LayerCenter.getInstance().getLayer(LayerEnum.TIP),i=core.TextUtils.createCenterText(26,16730441,"Arial",!0);0>e?i.text=""+e:i.text="+"+e,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=267+i.width/2,i.y=82+i.height/2,i.bold=!0,i.strokeColor=8585216,i.stroke=3,t.addChild(i),egret.Tween.get(i).to({scaleX:1.2,scaleY:1.2},500).to({scaleX:0,scaleY:0},500).call(function(){i.parent&&(i.text="",i.parent.removeChild(i),egret.Tween.removeTweens(i))})},e}();e.ShowPower=n,__reflect(n.prototype,"tips.ShowPower");var o=function(){function e(){}return e.AddNum=function(e,t,i){if(0!=e){t-=1;var n=core.LayerCenter.getInstance().getLayer(LayerEnum.TIP),o=core.TextUtils.createCenterText(20,16777215,"Arial",!0);0>e?o.text=""+e:o.text="+"+e,o.x=70+131*t,o.y=i,o.anchorOffsetX=o.width/2,o.bold=!0,o.strokeColor=0,o.stroke=3,n.addChild(o),egret.Tween.get(o).to({y:i-60,alpha:0},1e3).call(function(){o.parent&&(o.parent.removeChild(o),egret.Tween.removeTweens(o))})}},e}();e.ShowNum=o,__reflect(o.prototype,"tips.ShowNum")}(tips||(tips={}));var data;!function(e){var t=function(){function e(){}return e}();e.ArticleData=t,__reflect(t.prototype,"data.ArticleData")}(data||(data={}));var data;!function(e){var t=function(){function t(){this.isOpen=1,this.openLevel=1,this.food=new e.FoodData}return t}();e.BarData=t,__reflect(t.prototype,"data.BarData")}(data||(data={}));var data;!function(e){var t=function(){function e(){}return e.version="",e.baseUrl="",e.DEBUG=!0,e.showcover=!0,e}();e.BaseData=t,__reflect(t.prototype,"data.BaseData")}(data||(data={}));var data;!function(e){var t=function(){function e(){this.level=0,this.addition=0}return e}();e.CookBench=t,__reflect(t.prototype,"data.CookBench")}(data||(data={}));var CopyUtil=function(){function e(){}return e.copyData=function(e,t){for(var i in e){var n=typeof e[i];("number"==n||"string"==n)&&(t[i]=e[i])}},e}();__reflect(CopyUtil.prototype,"CopyUtil");var data;!function(e){var t=function(){function e(){}return e}();e.CurrencyType=t,__reflect(t.prototype,"data.CurrencyType")}(data||(data={}));var data;!function(e){var t=function(){function e(){this.donation=0,this.donationHave=0,this.donationRank=0,this.gold=0}return e}();e.DonationRes=t,__reflect(t.prototype,"data.DonationRes")}(data||(data={}));var data;!function(e){var t=function(){function e(){}return e}();e.Emploee=t,__reflect(t.prototype,"data.Emploee")}(data||(data={}));var data;!function(e){var t=function(){function e(){}return e}();e.FoodData=t,__reflect(t.prototype,"data.FoodData")}(data||(data={}));var data;!function(e){var t=function(){function e(){this.banana=0,this.fish=0,this.id=0,this.level=1,this.meat=0,this.rice=0,this.vegetable=0,this.indexNum=0}return e}();e.Fridge=t,__reflect(t.prototype,"data.Fridge")}(data||(data={}));var data;!function(e){var t=function(){function e(){this.star=0,this.gold=0,this.rice=0,this.meat=0,this.vegetable=0,this.fruit=0,this.img="",this.resourceCoolTime=0,this.fish=0,this.physical=30,this.isShowAccelerate=0}return e.prototype.copyRes=function(e){CopyUtil.copyData(e,this)},e}();e.FriendUserData=t,__reflect(t.prototype,"data.FriendUserData")}(data||(data={}));var data;!function(e){var t=function(){function t(){this.friendUserData=new e.FriendUserData,this.barList=new Array,this.articleList=new Array,this.roleList=new Array}return t}();e.FriendUserInfo=t,__reflect(t.prototype,"data.FriendUserInfo")}(data||(data={}));var data;!function(e){var t=function(){function e(){}return e}();e.Hall=t,__reflect(t.prototype,"data.Hall")}(data||(data={}));var data;!function(e){var t=function(){function e(){this.isFirst=!0}return e.prototype.storeLocal=function(){egret.localStorage.setItem("userID",this.userID),egret.localStorage.setItem("password",this.password)},e}();e.LoginParam=t,__reflect(t.prototype,"data.LoginParam")}(data||(data={}));var data;!function(e){var t=function(){function t(){this.chef=new e.MakeFoodState,this.userInfo=new Array,this.remainInfo=new Array}return t.prototype.copyData=function(t){CopyUtil.copyData(t.makeFoodState,this.chef);for(var i,n=0,o=t.useInfo,r=t.remainInfo;n<o.length;n++)i=new e.Type,CopyUtil.copyData(o[n],i),this.userInfo.push(i);for(n=0;n<r.length;n++)i=new e.Type,CopyUtil.copyData(r[n],i),this.remainInfo.push(i)},t}();e.MakeDetail=t,__reflect(t.prototype,"data.MakeDetail")}(data||(data={}));var data;!function(e){var t=function(){function e(){this.status=0,this.index=0,this.leftTime=0,this.totalTime=0,this.foodID=0}return e}();e.MakeFoodState=t,__reflect(t.prototype,"data.MakeFoodState")}(data||(data={}));var data;!function(e){var t=function(){function e(){}return e}();e.MissionData=t,__reflect(t.prototype,"data.MissionData");var i=function(){function e(){}return e}();__reflect(i.prototype,"Rank");var n=function(){function e(){}return e}();__reflect(n.prototype,"Task")}(data||(data={}));var data;!function(e){var t=function(){function e(){}return e}();e.OrderData=t,__reflect(t.prototype,"data.OrderData");var i=function(){function e(){}return e}();e.Order=i,__reflect(i.prototype,"data.Order");var n=function(){function e(){}return e}();e.menu=n,__reflect(n.prototype,"data.menu");var o=function(){function e(){}return e}();e.refreshManager=o,__reflect(o.prototype,"data.refreshManager");var r=function(){function e(){}return e}();e.resourceItem=r,__reflect(r.prototype,"data.resourceItem")}(data||(data={}));var data;!function(e){var t=function(){function t(){this.nextRole=new e.RoleData,this.bar=new e.BarData}return t.prototype.copyData=function(e){this.heartNumber=e.heartNumber,CopyUtil.copyData(e.nextRole,this.nextRole),CopyUtil.copyData(e.bar,this.bar),CopyUtil.copyData(e.nextRole.food,this.nextRole.food)},t}();e.RefuseRes=t,__reflect(t.prototype,"data.RefuseRes")}(data||(data={}));var data;!function(e){var t=function(){function t(){this.makeFoodState=new Array}return t.prototype.copyData=function(t){CopyUtil.copyData(t,this);var i,n=0;for(this.makeFoodState.length=0,n=0;n<t.makeFoodState.length;n++)i=new e.MakeFoodState,CopyUtil.copyData(t.makeFoodState[n],i),this.makeFoodState.push(i)},t.prototype.getBarNumberByLevel=function(){switch(this.area){case 1:return 2;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 4;case 6:return 5}return 2},t.prototype.getTableNumberByLevel=function(){switch(this.area){case 1:return 2;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 4;case 6:return 5}return 2},t.prototype.getWaitorNumber=function(){switch(this.area){case 1:return 2;case 2:return 2;case 3:return 2;case 4:return 2;case 5:return 2;case 6:return 2}return 2},t}();e.Restaurant=t,__reflect(t.prototype,"data.Restaurant")}(data||(data={}));var data;!function(e){var t=function(){function t(){this.hasSendMake=0,this.food=new e.FoodData}return t}();e.RoleData=t,__reflect(t.prototype,"data.RoleData")}(data||(data={}));var data;!function(e){var t=function(){function t(){this.typeList=new Array,this.nextRole=new e.RoleData,this.bar=new e.BarData}return t.prototype.copyData=function(t){if(CopyUtil.copyData(t,this),CopyUtil.copyData(t.nextRole,this.nextRole),CopyUtil.copyData(t.nextRole.food,this.nextRole.food),t.typeList)for(var i=0;i<t.typeList.length;i++){var n=new e.CurrencyType,o=t.typeList[i];CopyUtil.copyData(o,n),this.typeList.push(n)}},t}();e.SaleResData=t,__reflect(t.prototype,"data.SaleResData")}(data||(data={}));var data;!function(e){var t=function(){function t(){this.chefList=new Array,this.asherList=new Array}return t.prototype.copyData=function(t){var i,n=0;for(this.chefList.length=0;n<t.chefList.length;n++)i=new e.Emploee,CopyUtil.copyData(t.chefList[n],i),null!=i.id&&this.chefList.push(i);for(this.asherList.length=0,n=0;n<t.asherList.length;n++)i=new e.Emploee,CopyUtil.copyData(t.asherList[n],i),null!=i.id&&this.asherList.push(i)},t.prototype.findChefData=function(e){for(var t=0;t<this.chefList.length;t++)if(this.chefList[t].index==e)return this.chefList[t];return null},t}();e.StaffAll=t,__reflect(t.prototype,"data.StaffAll")}(data||(data={}));var data;!function(e){var t=function(){function e(){}return e}();e.Type=t,__reflect(t.prototype,"data.Type")}(data||(data={}));var data;!function(e){var t=function(){function e(){this.userNick="",this.gold=0,this.love=0,this.exp=0,this.intimacy=0,this.diamond=0}return e.prototype.copyRes=function(e){CopyUtil.copyData(e,this)},e}();e.UserData=t,__reflect(t.prototype,"data.UserData")}(data||(data={}));var data;!function(e){var t=function(){function e(){}return e}();e.Article=t,__reflect(t.prototype,"data.Article");var i=function(){function t(){this.userData=new e.UserData,this.cookBench=new e.CookBench,this.restaurant=new e.Restaurant,this.staffAll=new e.StaffAll,this.roleList=new Array,this.fridge=new e.Fridge,this.article=new Array}return t.prototype.copyData=function(t){CopyUtil.copyData(t.user,this.userData),CopyUtil.copyData(t.cookBench,this.cookBench),this.restaurant.copyData(t.restaurantIndexInfo),this.staffAll.copyData(t.staffAll),CopyUtil.copyData(t.fridge,this.fridge);var i,n=0;for(this.roleList.length=0,n=0;n<t.role.length;n++)i=new e.RoleData,CopyUtil.copyData(t.role[n],i),CopyUtil.copyData(t.role[n].food,i.food),this.roleList.push(i);var o;for(this.article.length=0,n=0;n<t.article.length;n++)o=new e.Article,CopyUtil.copyData(t.article[n],o),this.article.push(o)},t}();e.UserInfo=i,__reflect(i.prototype,"data.UserInfo")}(data||(data={}));var data;!function(e){var t=function(){function e(){}return e}();e.ComplimentResult=t,__reflect(t.prototype,"data.ComplimentResult")}(data||(data={}));var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var data;!function(e){var t=function(){function e(){}return e}();e.Inventory=t,__reflect(t.prototype,"data.Inventory")}(data||(data={}));var data;!function(e){var t=function(){function e(e,t,i,n){this.loveNumber=e,this.changeValue=t,this.runx=i,this.runy=n}return e}();e.LoveValue=t,__reflect(t.prototype,"data.LoveValue")}(data||(data={}));var data;!function(e){var t=function(){function t(){this.foodInfo=new e.FoodInf,this.sellFoodInfo=new e.SellFoodInfo}return t.prototype.copyData=function(e){this.complimentNumber=e.complimentNumber,CopyUtil.copyData(e,this),CopyUtil.copyData(e.foodInfo,this.foodInfo),CopyUtil.copyData(e.sellFoodInfo,this.sellFoodInfo)},t}();e.SalesInfo=t,__reflect(t.prototype,"data.SalesInfo")}(data||(data={}));var data;!function(e){var t=function(){function e(){}return e}();e.SellFoodInfo=t,__reflect(t.prototype,"data.SellFoodInfo")}(data||(data={}));var core;!function(e){var t=function(e){function t(t,i,n,o,r){var a=e.call(this,t)||this;return a.messageData=i,a}return __extends(t,e),t}(egret.Event);e.DataEvent=t,__reflect(t.prototype,"core.DataEvent")}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.ROLE_GOTO_MAKE_FOOD="role_goto_make_food",e.USERINFO_DATA="userinfo_data",e.MAKE_FOOD_START="make_food_start",e.SALE_FOOD_SUCCESS="make_food_success",e.MAKE_FOOD_REFUSE="make_food_refuse",e.UPDATE_ARTICLE_INHALL="update_article_inhall",e.USERINFO_GOLD="userinfo_gold",e.NEW_ROLE_ENTER="new_role_enter",e.FLUSH_LOVE_VALUE="flush_love_value",e.FLY_FOOD="fly_food",e.HIRE_SUCCESS="hire_success",e.FIRE_SUCCESS="fire_success",e}();e.DataEventID=t,__reflect(t.prototype,"core.DataEventID")}(core||(core={}));var core;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t}(egret.EventDispatcher);e.EventCenter=t,__reflect(t.prototype,"core.EventCenter")}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.MODULE_SHOW="core.EventID.MODULE_SHOW",e.MODULE_HIDE="core.EventID.MODULE_HIDE",e.CHANGE_RIGHT_MENU="change_right_menu",e}();e.UIEventID=t,__reflect(t.prototype,"core.UIEventID")}(core||(core={}));var core;!function(e){var t=function(){function t(){}return t.getInstance=function(){return null==t.s_instance&&(t.s_instance=new t),t.s_instance},t.prototype.init=function(i){i&&(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)?i.scaleMode=egret.StageScaleMode.FIXED_WIDTH:i.scaleMode=egret.StageScaleMode.SHOW_ALL,i.frameRate=20,this.stage=i,i.addEventListener(egret.Event.RESIZE,this.onStageResize,this),this.m_layers=[],t.stageWidth=this.stage.stageWidth,t.stageHeight=this.stage.stageHeight,t.frameRate=20,e.LoadingUIManager.createSimpleLoading())},t.prototype.onStageResize=function(e){t.stageWidth=this.stage.stageWidth,t.stageHeight=this.stage.stageHeight,navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)?this.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH:this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL},t.prototype.addLayer=function(e,i){i.width=t.stageWidth,i.height=t.stageHeight,this.m_layers[e]=i,this.stage.addChildAt(i,e)},t.prototype.getLayer=function(e){return this.m_layers[e]},t.prototype.removeLayer=function(e){var t=this.m_layers[e];t&&(t.parent&&t.parent.removeChild(t),t.removeChildren(),this.m_layers[e]=null)},t}();e.LayerCenter=t,__reflect(t.prototype,"core.LayerCenter")}(core||(core={}));var game;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.trickStuntState=!1,t.currentFriendInfo=new data.FriendUserInfo,t}return __extends(t,e),t.prototype.receiveFirendInfo=function(e){this.currentFriendInfo.friendUserData.copyRes(e.friendData);var t=0;for(this.currentFriendInfo.barList.length=0,t=0;t<e.barList.length;t++){var i=new data.BarData;this.copyData(e.barList[t],i),this.copyData(e.barList[t].food,i.food),this.currentFriendInfo.barList.push(i)}this.currentFriendInfo.articleList.length=0;var n=0;for(t=0;t<e.articleList.length;t++){var o=new data.ArticleData;for(this.copyData(e.articleList[t],o),this.currentFriendInfo.articleList.push(o),n=0;n<this.currentFriendInfo.barList.length;n++){var i=this.currentFriendInfo.barList[n];if(i.id==o.id){i.resourceid=o.resourceid;break}}}for(this.currentFriendInfo.roleList.length=0,t=0;t<e.roleList.length;t++){var r=new data.RoleData;this.copyData(e.roleList[t],r),this.copyData(e.roleList[t].food,r.food),this.currentFriendInfo.roleList.push(r)}Log(this.currentFriendInfo)},t.prototype.receiveFriendTown=function(e){},t}(e.BaseModel);e.FriendModel=t,__reflect(t.prototype,"game.model.FriendModel")}(t=e.model||(e.model={}))}(game||(game={}));var game;!function(e){var t;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.BaseModel);e.HallModel=t,__reflect(t.prototype,"game.model.HallModel")}(t=e.model||(e.model={}))}(game||(game={}));var game;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.hasDisplayExplain=!1,t.lastUserData=new data.UserData,t.loginParam=new data.LoginParam,t.loginParam.userID="yy",t.loginParam.password="123456",t.userInfo=new data.UserInfo,t}return __extends(t,e),t.prototype.setStealRes=function(e){this.stealRes=e},t.prototype.refreshUserData=function(e){},t.prototype.receiveUserInfo=function(e){var t=ModelManager.getInstance().getModel(ModuleName.FRIEND);t.currentFriendId="",this.userInfo.copyData(e),Log(this.userInfo),core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.USERINFO_DATA))},t.prototype.updateUserData=function(e,t){void 0===t&&(t=1);this.userInfo.userData},t}(e.BaseModel);e.LoginModel=t,__reflect(t.prototype,"game.model.LoginModel")}(t=e.model||(e.model={}))}(game||(game={}));var ModelManager=function(){function e(){this.modelDictionary=new Dictionary,this.addDataModel()}return e.getInstance=function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance},e.prototype.addDataModel=function(){this.modelDictionary.add(ModuleName.LOGIN,new game.model.LoginModel),this.modelDictionary.add(ModuleName.HALL,new game.model.HallModel),this.modelDictionary.add(ModuleName.FRIEND,new game.model.FriendModel)},e.prototype.getModel=function(e){var t;return t=this.modelDictionary.get(e)},e}();__reflect(ModelManager.prototype,"ModelManager");var achieveMentData=null,achieveMentThe=null,o=0,view;!function(e){var t;!function(t){var i=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/achievementSkin.exml",t}return __extends(t,e),t.prototype.uiComplete=function(){achieveMentThe=this,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this),this.updateData()},t.prototype.closeBtnClick=function(e){this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.updateData=function(){var e=this;achieveMentData=null,o=0;var t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.loginParam,r={token:i.token,page:1,pageNum:20};core.Http.sendPostData("achieveList",r,function(t){achieveMentData=t.data,e.dsListAchievement=[];for(var i=0;i<t.data.length;i++){var o=t.data[i].describe;e.dsListAchievement.push({beijing:"InterfaceUI_json.renwu_05_png",achievementText:o})}e.listAchievement.dataProvider=new eui.ArrayCollection(e.dsListAchievement),e.listAchievement.itemRenderer=n})},t.prototype.dispose=function(){this.removeChildren(),this.listAchievement.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this),achieveMentData.length=0,achieveMentThe=null,o=0},t}(eui.Component);t.Achievement=i,__reflect(i.prototype,"view.achievement.Achievement",["core.IComponent"]);var n=function(t){function i(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,e.dispose,e),e.skinName="resource/ui_skin/achievementListSkin.exml",e}return __extends(i,t),i.prototype.onComplete=function(){var t=this;this.getBtn.visible=!1,this.complete.visible=!1,this.uncomplete.visible=!1,1==achieveMentData[o].achieveState?this.getBtn.visible=!0:2==achieveMentData[o].achieveState?this.uncomplete.visible=!0:3==achieveMentData[o].achieveState&&(this.complete.visible=!0),o<achieveMentData.length-1&&o++,this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.loginParam,o={token:n.token,achieveId:achieveMentData[t.itemIndex].achieveId};core.Http.sendPostData("achieveReward",o,function(n){if(0==n.code){for(var o=new Array,r=0;r<n.currencyTypes.length;r++)o.push({currencyType:n.currencyTypes[r].currencyType,currencyNum:n.currencyTypes[r].currencyNum});i.updateUserData(o,1),t.achievementGet=new e.achievement.AchievementGetReward(n.data),core.LayerCenter.getInstance().getLayer(LayerEnum.WINDOW).addChild(t.achievementGet),tips.Tips.tip("领取成功")}})},this)},i.prototype.dispose=function(){var e=this;this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this),this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.loginParam,n={token:i.token,achieveId:achieveMentData[e.itemIndex].achieveId};core.Http.sendPostData("achieveReward",n,function(e){achieveMentThe.updateData(),tips.Tips.tip("领取成功")})},this),this.getBtn=null,this.uncomplete=null,this.complete=null},i}(eui.ItemRenderer);__reflect(n.prototype,"achievementLogic",["core.IComponent"])}(t=e.achievement||(e.achievement={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return i.arr=t,i.addEventListener(eui.UIEvent.COMPLETE,i.uiComplete,i),i.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,i.dispose,i),i.skinName="resource/ui_skin/achievementGetSkin.exml",i}return __extends(t,e),t.prototype.uiComplete=function(){Log(this.arr),this.RewardOne.visible=!1,this.RewardTwo.visible=!1,this.RewardThree.visible=!1,this.RewardFour.visible=!1,this.RewardFive.visible=!1,1==this.arr.length?(this.RewardOne.visible=!0,this.RewardOne.x=227,this.sureBtn.y=536):2==this.arr.length?(this.RewardOne.visible=!0,this.RewardTwo.visible=!0,this.RewardOne.x=97,this.RewardTwo.x=378,this.sureBtn.y=536):3==this.arr.length?(this.RewardOne.visible=!0,this.RewardTwo.visible=!0,this.RewardThree.visible=!0,this.sureBtn.y=536):4==this.arr.length?(this.RewardOne.visible=!0,this.RewardTwo.visible=!0,this.RewardThree.visible=!0,this.RewardFour.visible=!0,this.RewardFour.x=227):5==this.arr.length&&(this.RewardOne.visible=!0,this.RewardTwo.visible=!0,this.RewardThree.visible=!0,this.RewardFour.visible=!0,this.RewardFive.visible=!0);for(var e=0;e<this.arr.length;e++)0==e?this.changedata(this.arr[e].currencyType,this.arr[e].currencyNum,this.RewardOneIcon,this.RewardOneText):1==e?this.changedata(this.arr[e].currencyType,this.arr[e].currencyNum,this.RewardTwoIcon,this.RewardTwoText):2==e?this.changedata(this.arr[e].currencyType,this.arr[e].currencyNum,this.RewardThreeIcon,this.RewardThreeText):3==e?this.changedata(this.arr[e].currencyType,this.arr[e].currencyNum,this.RewardFourIcon,this.RewardFourText):4==e&&this.changedata(this.arr[e].currencyType,this.arr[e].currencyNum,this.RewardFiveIcon,this.RewardFiveText);this.RewardOneSpecil=core.StuntManager.getInstance().getCircleStunt(1),this.RewardOneShow.addChild(this.RewardOneSpecil),this.RewardOneSpecil.play(-1),egret.Tween.get(this.RewardOneStar1,{loop:!0}).to({alpha:.3,scaleX:1.5,scaleY:1.5},500).to({alpha:1,scaleX:1,scaleY:1},500),egret.Tween.get(this.RewardOneStar2,{loop:!0}).to({alpha:.3,scaleX:.7,scaleY:.7},800).to({alpha:1,scaleX:1,scaleY:1},600),egret.Tween.get(this.RewardOneStar3,{loop:!0}).to({alpha:.3,scaleX:1.5,scaleY:1.5},500).to({alpha:1,scaleX:1,scaleY:1},500),this.RewardTwoSpecil=core.StuntManager.getInstance().getCircleStunt(2),this.RewardTwoShow.addChild(this.RewardTwoSpecil),this.RewardTwoSpecil.play(-1),egret.Tween.get(this.RewardTwoStar1,{loop:!0}).to({alpha:.3,scaleX:1.5,scaleY:1.5},500).to({alpha:1,scaleX:1,scaleY:1},500),egret.Tween.get(this.RewardTwoStar2,{loop:!0}).to({alpha:.3,scaleX:.7,scaleY:.7},800).to({alpha:1,scaleX:1,scaleY:1},600),egret.Tween.get(this.RewardTwoStar3,{loop:!0}).to({alpha:.3,scaleX:1.5,scaleY:1.5},500).to({alpha:1,scaleX:1,scaleY:1},500),this.RewardThreeSpecil=core.StuntManager.getInstance().getCircleStunt(3),this.RewardThreeShow.addChild(this.RewardThreeSpecil),this.RewardThreeSpecil.play(-1),egret.Tween.get(this.RewardThreeStar1,{loop:!0}).to({alpha:.3,scaleX:1.5,scaleY:1.5},500).to({alpha:1,scaleX:1,scaleY:1},500),egret.Tween.get(this.RewardThreeStar2,{loop:!0}).to({alpha:.3,scaleX:.7,scaleY:.7},800).to({alpha:1,scaleX:1,scaleY:1},600),egret.Tween.get(this.RewardThreeStar3,{loop:!0}).to({alpha:.3,scaleX:1.5,scaleY:1.5},500).to({alpha:1,scaleX:1,scaleY:1},500),this.RewardFourSpecil=core.StuntManager.getInstance().getCircleStunt(4),this.RewardFourShow.addChild(this.RewardFourSpecil),this.RewardFourSpecil.play(-1),egret.Tween.get(this.RewardFourStar1,{loop:!0}).to({alpha:.3,scaleX:1.5,scaleY:1.5},500).to({alpha:1,scaleX:1,scaleY:1},500),egret.Tween.get(this.RewardFourStar2,{loop:!0}).to({alpha:.3,scaleX:.7,scaleY:.7},800).to({alpha:1,scaleX:1,scaleY:1},600),egret.Tween.get(this.RewardFourStar3,{loop:!0}).to({alpha:.3,scaleX:1.5,scaleY:1.5},500).to({alpha:1,scaleX:1,scaleY:1},500),this.RewardFiveSpecil=core.StuntManager.getInstance().getCircleStunt(5),this.RewardFiveShow.addChild(this.RewardFiveSpecil),this.RewardFiveSpecil.play(-1),egret.Tween.get(this.RewardFiveStar1,{loop:!0}).to({alpha:.3,scaleX:1.5,scaleY:1.5},500).to({alpha:1,scaleX:1,scaleY:1},500),egret.Tween.get(this.RewardFiveStar2,{loop:!0}).to({alpha:.3,scaleX:.7,scaleY:.7},800).to({alpha:1,scaleX:1,scaleY:1},600),egret.Tween.get(this.RewardFiveStar3,{loop:!0}).to({alpha:.3,scaleX:1.5,scaleY:1.5},500).to({alpha:1,scaleX:1,scaleY:1},500),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBtnClick,this)},t.prototype.changedata=function(e,t,i,n){1==e?(i.source="hallUI.currency1_png",n.text="X"+t):2==e?(i.source="hallUI.currency2_png",n.text="X"+t):3==e?(i.source="hallUI.currency3_png",n.text="X"+t):4==e?(i.source="hallUI.currency4_png",n.text="X"+t):5==e?(i.source="hallUI.currency5_png",n.text="X"+t):6==e?(i.source="hallUI.currency6_png",n.text="X"+t):7==e?(i.source="hallUI.currency7_png",n.text="X"+t):8==e?(i.source="hallUI.currency8_png",n.text="X"+t):9==e&&(i.source="hallUI.currency9_png",n.text="X"+t)},t.prototype.sureBtnClick=function(e){achieveMentThe?achieveMentThe.updateData():missionThe&&missionThe.updateData(),this.parent&&this.parent.removeChild(this),this.sureBtn&&this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBtnClick,this)},t.prototype.dispose=function(){this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBtnClick,this),this.sureBtn=null,this.arr=null,this.RewardOneSpecil.stop(),this.RewardTwoSpecil.stop(),this.RewardThreeSpecil.stop(),this.RewardFourSpecil.stop(),this.RewardFiveSpecil.stop(),this.RewardOneSpecil=null,this.RewardTwoSpecil=null,this.RewardThreeSpecil=null,this.RewardFourSpecil=null,this.RewardFiveSpecil=null,egret.Tween.removeTweens(this.RewardOneStar1),egret.Tween.removeTweens(this.RewardOneStar2),egret.Tween.removeTweens(this.RewardOneStar3),egret.Tween.removeTweens(this.RewardTwoStar1),egret.Tween.removeTweens(this.RewardTwoStar2),egret.Tween.removeTweens(this.RewardTwoStar3),egret.Tween.removeTweens(this.RewardThreeStar1),egret.Tween.removeTweens(this.RewardThreeStar2),egret.Tween.removeTweens(this.RewardThreeStar3),egret.Tween.removeTweens(this.RewardFourStar1),egret.Tween.removeTweens(this.RewardFourStar2),egret.Tween.removeTweens(this.RewardFourStar3),egret.Tween.removeTweens(this.RewardFiveStar1),egret.Tween.removeTweens(this.RewardFiveStar2),egret.Tween.removeTweens(this.RewardFiveStar3),this.RewardOneStar1=null,this.RewardOneStar2=null,this.RewardOneStar3=null,this.RewardTwoStar1=null,this.RewardTwoStar2=null,this.RewardTwoStar3=null,this.RewardThreeStar1=null,this.RewardThreeStar2=null,this.RewardThreeStar3=null,this.RewardFourStar1=null,this.RewardFourStar2=null,this.RewardFourStar3=null,this.RewardFiveStar1=null,this.RewardFiveStar2=null,this.RewardFiveStar3=null,this.RewardOne=null,this.RewardOneShow=null,this.RewardOneIcon=null,this.RewardOneText=null,this.RewardTwo=null,this.RewardTwoShow=null,this.RewardTwoIcon=null,this.RewardTwoText=null,this.RewardThree=null,this.RewardThreeShow=null,this.RewardThreeIcon=null,this.RewardThreeText=null,this.RewardFour=null,this.RewardFourShow=null,this.RewardFourIcon=null,this.RewardFourText=null,this.RewardFive=null,this.RewardFiveShow=null,this.RewardFiveIcon=null,this.RewardFiveText=null,this.removeChildren(),this.parent&&this.parent.removeChild(this)},t}(eui.Component);e.AchievementGetReward=t,__reflect(t.prototype,"view.achievement.AchievementGetReward",["core.IComponent"])}(t=e.achievement||(e.achievement={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){},t.prototype.setArticleData=function(e){var t=this.articleData.resName;this.articleImg=core.BitmapCreator.createBitmap(t),this.addChild(this.articleImg)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.articleImg&&(this.articleImg.parent.removeChild(this.articleImg),this.articleImg.texture.dispose(),this.articleImg.texture=null,this.articleImg=null)},t}(core.BaseUIComponent);e.Article=t,__reflect(t.prototype,"view.article.Article")}(t=e.article||(e.article={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(t,i){var n=e.call(this)||this;return n.callback=t,n.callee=i,n.addEventListener(eui.UIEvent.COMPLETE,n.uiComplete,n),n.skinName="resource/ui_skin/CartoonSkin.exml",n}return __extends(t,e),t.prototype.uiComplete=function(){this.cartoon1.alpha=0,this.cartoon2.visible=!1,this.cartoon3.alpha=0,this.cartoon4.visible=!1,this.cartoon5.x=-262,this.cartoon6.x=640,this.cartoon7.visible=!1,this.cartoon8.alpha=0,this.cartoon9.alpha=0;var e=ModelManager.getInstance().getModel(ModuleName.LOGIN),t=e.loginParam;1==t.isNewUser?this.skipBtn.visible=!1:this.skipBtn.visible=!0,egret.Tween.get(this.skipBtn,{loop:!0}).to({alpha:.3},1e3).to({alpha:1},1e3),egret.Tween.get(this.cartoon1,{loop:!1}).to({alpha:1},800).wait(500).call(function(){this.cartoon2.visible=!0,egret.Tween.get(this.cartoon3,{loop:!1}).wait(800).to({alpha:1},1e3).call(function(){this.cartoon4.visible=!0,egret.Tween.get(this.cartoon5,{loop:!1}).wait(500).to({x:62},700),egret.Tween.get(this.cartoon6,{loop:!1}).wait(500).to({x:327},700).wait(500).call(function(){this.cartoon7.visible=!0,egret.Tween.get(this.cartoon8,{loop:!1}).wait(500).to({alpha:1},1e3).call(function(){egret.Tween.get(this.cartoon9,{loop:!1}).to({alpha:1},10).wait(1500).call(function(){this.skipBtnClick()},this)},this)},this)},this)},this),this.skipBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.skipBtnClick,this)},t.prototype.skipBtnClick=function(e){this.dispose(),this.callback&&this.callback.call(this.callee),this.callback=null,this.callee=null},t.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),this.cartoon1&&egret.Tween.removeTweens(this.cartoon1),this.cartoon3&&egret.Tween.removeTweens(this.cartoon3),this.cartoon5&&egret.Tween.removeTweens(this.cartoon5),this.cartoon6&&egret.Tween.removeTweens(this.cartoon6),this.cartoon8&&egret.Tween.removeTweens(this.cartoon8),this.cartoon9&&egret.Tween.removeTweens(this.cartoon9),this.skipBtn&&(egret.Tween.removeTweens(this.skipBtn),this.skipBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.skipBtnClick,this)),this.skipBtn=null,this.cartoon1=null,this.cartoon2=null,this.cartoon3=null,this.cartoon4=null,this.cartoon5=null,this.cartoon6=null,this.cartoon7=null,this.cartoon8=null,this.cartoon9=null
},t}(eui.Component);e.Cartoon=t,__reflect(t.prototype,"view.cartoon.Cartoon",["core.IComponent"])}(t=e.cartoon||(e.cartoon={}))}(view||(view={}));var view;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.currentType=-1,t.currentNumber=0,t.init(),t}return __extends(t,e),t.prototype.init=function(){this.currencyText=core.TextUtils.createTextfield(15,0,egret.VerticalAlign.MIDDLE,egret.HorizontalAlign.CENTER,"黑体"),this.currencyText.width=36,this.currencyText.y=5,this.addChild(this.currencyText)},t.prototype.setData=function(e,t){this.currentType>-1&&this.currentType==e&&this.currentNumber==t||(null==this.currencyImg&&this.currentType!=e&&(this.currencyImg=core.BitmapCreator.createCurrencyByType(e),this.currencyImg.width=27,this.currencyImg.height=27,this.addChild(this.currencyImg),this.currencyText.x=this.currencyImg.width+2),this.currencyText.text="*"+t.toString(),this.currentType=e,this.currentNumber=t)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.currencyImg.parent&&this.removeChild(this.currencyImg),this.currencyImg=null,this.currencyText.parent&&(this.removeChild(this.currencyText),this.currencyText=null)},t}(core.BaseUIComponent);e.CurrencyTypeUI=t,__reflect(t.prototype,"view.CurrencyTypeUI")}(view||(view={}));var view;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/BuildingUpgradeInf.exml",t}return __extends(t,e),t.prototype.uiComplete=function(){},t.prototype.dispose=function(){},t}(eui.Component);e.EUICurrencyType=t,__reflect(t.prototype,"view.EUICurrencyType",["core.IComponent"])}(view||(view={}));var view;!function(e){var t;!function(t){var i=null,n=null,o=new Array,r=0,a=null,s=null,h=null,c=function(e){function t(t){var i=e.call(this)||this;return i.chefindex=-1,i.chefindex=t,i.addEventListener(eui.UIEvent.COMPLETE,i.uiComplete,i),i.skinName="resource/ui_skin/MenuSkin.exml",i}return __extends(t,e),t.prototype.uiComplete=function(){var e=this;this.cookScroll.stopAnimation(),this.cookGroup.scrollV=0,this.menuSelect1.source="windowUI_json.Menu_tab4_01_png",this.menuSelect2.source="windowUI_json.Menu_tab1_02_png",this.menuSelect3.source="windowUI_json.Menu_tab2_02_png",this.menuSelect4.source="windowUI_json.Menu_tab3_02_png",this.menuSelect5.source="windowUI_json.Menu_tab5_02_png";for(var t=0;5>t;t++)toutap(this["menuSelect"+(t+1)],this.menuSelectClick,this,[t]);a=this;var o=ModelManager.getInstance().getModel(ModuleName.LOGIN),c=o.loginParam,l={token:c.token};core.Http.sendGetData("getCookBook",l,function(t){0==t.code?(h=t.fridge,Log(t.data),i=t.data.menuList,s=t.data.currentStrength,e.currentStrength.text="厨力 "+t.data.currentStrength,n=0,e.showList(0),r=0):tips.Tips.tip(t.errMsg+"("+t.code+")")}),this.closeRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this);var d=core.EventCenter.getInstance();d.addEventListener(core.DataEventID.MAKE_FOOD_START,this.closeRectClick,this)},t.prototype.showList=function(e){ModelManager.getInstance().getModel(ModuleName.HALL);this.dsListMenu=[],o.length=0,Log(i),Log(i[e]),this.invalidateProperties();for(var t=0;t<i[e].foodList.length;t++){var r=jsondata.JsonConfigManager.getFoodDataById(i[e].foodList[t].foodID).foodname,a="Food."+jsondata.JsonConfigManager.getFoodDataById(i[e].foodList[t].foodID).foodlogo+"_png",s=i[e].foodList[t].process+"/"+i[e].foodList[t].processTotal,h="",c="",d="",u="",p="",g="",v="",f="",m=i[e].foodList[t].foodLevel+"",y="需求："+jsondata.JsonConfigManager.getFoodDataById(i[n].foodList[t].foodID).strength,w="再制作"+i[e].foodList[t].needNum+"份"+jsondata.JsonConfigManager.getFoodDataById(i[e].foodList[t].resourceFoodId).foodname+"即可获得图纸",L=i[e].foodList[t].stock,C="",T=getStartSouce(i[e].foodList[t].foodQualify-1),I=T[0],_=T[1],E=T[2],k=T[3],x=T[4];i[e].foodList[t].foodQualify>1&&(C="windowUI_json.level_0"+(i[e].foodList[t].foodQualify-1)+"_png"),o.push(t);for(var M=0;M<i[e].foodList[t].currencyList.length;M++)0==M?(h="hallUI.currency"+i[e].foodList[t].currencyList[M].currencyType+"_png",c=i[e].foodList[t].currencyList[M].currencyNum):1==M?(d="hallUI.currency"+i[e].foodList[t].currencyList[M].currencyType+"_png",u=i[e].foodList[t].currencyList[M].currencyNum):2==M?(p="hallUI.currency"+i[e].foodList[t].currencyList[M].currencyType+"_png",g=i[e].foodList[t].currencyList[M].currencyNum):3==M&&(v="hallUI.currency"+i[e].foodList[t].currencyList[M].currencyType+"_png",f=i[e].foodList[t].currencyList[M].currencyNum);this.dsListMenu.push({foodNameTxt:r,foodImage:a,skillTxt:s,currencyImage1:h,currencyTxt1:c,currencyImage2:d,currencyTxt2:u,currencyImage3:p,currencyTxt3:g,currencyImage4:v,currencyTxt4:f,foodLevel:m,needPower:y,getBlueprint:w,saveNum:L,star1:I,star2:_,star3:E,star4:k,star5:x,foodImageBg:C,chefindex:this.chefindex}),this.commitProperties()}this.listMenu.dataProvider=new eui.ArrayCollection(this.dsListMenu),this.listMenu.itemRenderer=l},t.prototype.menuSelectClick=function(e){var t=[4,1,2,3,5];e==n?tips.Tips.tip("请勿重复点击"):(this.cookScroll.stopAnimation(),this.cookGroup.scrollV=0,this["menuSelect"+(n+1)].source="windowUI_json.Menu_tab"+t[n]+"_02_png",n=e,this["menuSelect"+(n+1)].source="windowUI_json.Menu_tab"+t[n]+"_01_png",this.showList(e),r=0)},t.prototype.closeRectClick=function(e){this.parent&&this.parent.removeChild(this),this.closeRect&&this.closeRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this);var t=core.EventCenter.getInstance();t.removeEventListener(core.DataEventID.MAKE_FOOD_START,this.closeRectClick,this)},t.prototype.dispose=function(){this.removeChildren(),this.listMenu.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeRect&&this.closeRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this)},t}(eui.Component);t.Cook=c,__reflect(c.prototype,"view.cook.Cook",["core.IComponent"]);var l=function(t){function c(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,e.dispose,e),e.skinName="resource/ui_skin/menuListSkin.exml",e}return __extends(c,t),c.prototype.onComplete=function(){var e=0;e=i[n].foodList[r].process/i[n].foodList[r].processTotal>=1?1:i[n].foodList[r].process/i[n].foodList[r].processTotal,6==i[n].foodList[r].foodQualify?this.isMaster.visible=!0:this.isMaster.visible=!1,this.expLine.scaleX=e,this.newsGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.newsBtnClick,this),this.studyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.studyBtnClick,this),this.makeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.makeBtnClick,this);for(var t=0;t<i[n].foodList[r].currencyList.length;t++)0==t?this.currencyTxt1.textColor=this.chooseColor(i[n].foodList[r].currencyList[t].currencyType,i[n].foodList[r].currencyList[t].currencyNum):1==t?this.currencyTxt2.textColor=this.chooseColor(i[n].foodList[r].currencyList[t].currencyType,i[n].foodList[r].currencyList[t].currencyNum):2==t?this.currencyTxt3.textColor=this.chooseColor(i[n].foodList[r].currencyList[t].currencyType,i[n].foodList[r].currencyList[t].currencyNum):3==t&&(this.currencyTxt4.textColor=this.chooseColor(i[n].foodList[r].currencyList[t].currencyType,i[n].foodList[r].currencyList[t].currencyNum));0==i[n].foodList[r].foodStatus||3==i[n].foodList[r].foodStatus?(this.studyBtn.visible=!1,this.getBlueprintTxt.visible=!1,this.noEnoughGroup.visible=!1):1==i[n].foodList[r].foodStatus?(this.studyBtn.visible=!1,this.getBlueprintTxt.visible=!1,this.currencyGroup.visible=!1,this.skillGroup.visible=!1):2==i[n].foodList[r].foodStatus?(this.makeBtn.visible=!1,this.newsBtn.visible=!1,this.getBlueprintTxt.visible=!1,this.currencyGroup.visible=!1,this.starGroup.visible=!1,this.skillGroup.visible=!1,this.saveGroup.visible=!1,this.noEnoughGroup.visible=!1):4==i[n].foodList[r].foodStatus&&(this.foodImageBg.visible=!1,this.foodName.visible=!1,this.makeBtn.visible=!1,this.studyBtn.visible=!1,this.newsBtn.visible=!1,this.currencyGroup.visible=!1,this.starGroup.visible=!1,this.skillGroup.visible=!1,this.saveGroup.visible=!1,this.noEnoughGroup.visible=!1),r<o.length-1&&r++},c.prototype.newsBtnClick=function(){Log(this.itemIndex),1==this.newsBtn.visible&&(this.details=new e.details.Details(i[n].foodList[this.itemIndex].foodID,-1),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.details))},c.prototype.studyBtnClick=function(){Log(this.itemIndex),1==this.studyBtn.visible&&(this.research=new e.cook.Research,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.research))},c.prototype.makeBtnClick=function(){var t=this,i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.loginParam,o={token:n.token};core.Http.sendGetData("isChefEnough",o,function(i){if(0==i.code){var n=i.data;t.startMake(n)}else if(1008==i.code){for(var o=0,r=0,s=0;s<i.staff.chefList.length;s++)1==i.staff.chefList[s].staffType&&o++,3!=i.staff.chefList[s].staffType&&r++;var h=new e.window.Window(5,a,o,r);core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(h)}else tips.Tips.tip(i.errMsg+"("+i.code+")")})},c.prototype.startMake=function(t){var o=this;Log(this.itemIndex),Log("data====",this.data),Log("cookdata=======",i[n].foodList[this.itemIndex]);var r=ModelManager.getInstance().getModel(ModuleName.LOGIN),h=r.loginParam;-1!=this.data.chefindex&&(t=this.data.chefindex);var c={token:h.token,foodID:i[n].foodList[this.itemIndex].foodID,index:t};core.Http.sendPostData("makeFood",c,function(t){if(0==t.code){Log(t.data);var r=new data.MakeDetail;r.copyData(t.data),core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.MAKE_FOOD_START,r)),core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.USERINFO_DATA))}else if(1001==t.code){var h=s+"",c=jsondata.JsonConfigManager.getFoodDataById(i[n].foodList[o.itemIndex].foodID).strength+"",l=new e.window.Window(3,a,h,c);core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(l)}else if(1002==t.code){var d=new e.window.Window(4,t.fridge,i[n].foodList[o.itemIndex],a);core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(d)}else tips.Tips.tip(t.errMsg+"("+t.code+")")})},c.prototype.chooseColor=function(e,t){return 1==e?t<=h.rice?0:16711680:2==e?t<=h.banana?0:16711680:3==e?t<=h.vegetable?0:16711680:4==e?t<=h.meat?0:16711680:5==e?t<=h.fish?0:16711680:void 0},c.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this)},c}(eui.ItemRenderer);__reflect(l.prototype,"menuLogic",["core.IComponent"])}(t=e.cook||(e.cook={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=null,n=null,o=new Array,r=0,a=null,s=null,h=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/ResearchSkin.exml",t}return __extends(t,e),t.prototype.uiComplete=function(){var e=this;a=this,this.menuSelect1.source="windowUI_json.Menu_tab4_01_png",this.menuSelect2.source="windowUI_json.Menu_tab1_02_png",this.menuSelect3.source="windowUI_json.Menu_tab2_02_png",this.menuSelect4.source="windowUI_json.Menu_tab3_02_png",this.menuSelect5.source="windowUI_json.Menu_tab5_02_png";for(var t=0;5>t;t++)toutap(this["menuSelect"+(t+1)],this.menuSelectClick,this,[t]);var o=ModelManager.getInstance().getModel(ModuleName.LOGIN),h=o.loginParam,c={token:h.token};core.Http.sendGetData("getBookResearch",c,function(t){0==t.code?(Log(t.data),i=t.data.researchMenus,s=t.fridge,e.currentStrength.text="研究力："+t.data.currentPower+"/"+t.data.maxPower,e.showList(0),n=0,r=0):tips.Tips.tip(t.errMsg+"("+t.code+")")}),this.closeRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this);var l=core.EventCenter.getInstance();l.addEventListener(core.DataEventID.MAKE_FOOD_START,this.closeRectClick,this)},t.prototype.showList=function(e){ModelManager.getInstance().getModel(ModuleName.HALL);this.dsListMenu=[],o.length=0,Log(i),Log(i[e]);for(var t=0;t<i[e].foodList.length;t++){var n=jsondata.JsonConfigManager.getFoodDataById(i[e].foodList[t].foodID).foodname,r="Food."+jsondata.JsonConfigManager.getFoodDataById(i[e].foodList[t].foodID).foodlogo+"_png",a="研究等级："+i[e].foodList[t].researchLevel,s="",h="",l="",d="",u="",p="",g="",v="",f=i[e].foodList[t].foodLevel+"",m="需求："+i[e].foodList[t].requestStrength,y="",w="",L="",C="",T="",I="",_=getStartSouce(i[e].foodList[t].foodQulify-1);y=_[0],w=_[1],L=_[2],C=_[3],T=_[4],i[e].foodList[t].foodQulify>1&&(I="windowUI_json.level_0"+(i[e].foodList[t].foodQulify-1)+"_png"),o.push(t);for(var E=0;E<i[e].foodList[t].currencyList.length;E++)0==E?(s="hallUI.currency"+i[e].foodList[t].currencyList[E].currencyType+"_png",h=i[e].foodList[t].currencyList[E].currencyNum):1==E?(l="hallUI.currency"+i[e].foodList[t].currencyList[E].currencyType+"_png",d=i[e].foodList[t].currencyList[E].currencyNum):2==E?(u="hallUI.currency"+i[e].foodList[t].currencyList[E].currencyType+"_png",p=i[e].foodList[t].currencyList[E].currencyNum):3==E&&(g="hallUI.currency"+i[e].foodList[t].currencyList[E].currencyType+"_png",v=i[e].foodList[t].currencyList[E].currencyNum);this.dsListMenu.push({foodNameTxt:n,foodImage:r,currencyImage1:s,currencyTxt1:h,currencyImage2:l,currencyTxt2:d,currencyImage3:u,currencyTxt3:p,currencyImage4:g,currencyTxt4:v,foodLevel:f,needPower:m,researchLevel:a,star1:y,star2:w,star3:L,star4:C,star5:T,foodImageBg:I})}this.listMenu.dataProvider=new eui.ArrayCollection(this.dsListMenu),this.listMenu.itemRenderer=c},t.prototype.menuSelectClick=function(e){var t=[4,1,2,3,5];e==n?tips.Tips.tip("请勿重复点击"):(this.cookScroll.stopAnimation(),this.cookGroup.scrollV=0,this["menuSelect"+(n+1)].source="windowUI_json.Menu_tab"+t[n]+"_02_png",n=e,this["menuSelect"+(n+1)].source="windowUI_json.Menu_tab"+t[n]+"_01_png",this.showList(e),r=0)},t.prototype.closeRectClick=function(e){this.parent&&this.parent.removeChild(this),this.closeRect&&this.closeRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this);var t=core.EventCenter.getInstance();t.removeEventListener(core.DataEventID.MAKE_FOOD_START,this.closeRectClick,this)},t.prototype.dispose=function(){this.removeChildren(),this.listMenu.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeRect&&this.closeRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this),i=null,n=null,o.length=0,r=0,a=null},t}(eui.Component);t.Research=h,__reflect(h.prototype,"view.cook.Research",["core.IComponent"]);var c=function(t){function h(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,e.dispose,e),e.skinName="resource/ui_skin/ResearchListSkin.exml",e}return __extends(h,t),h.prototype.onComplete=function(){this.newsGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.newsBtnClick,this),this.studyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.studyBtnClick,this);for(var e=0;e<i[n].foodList[r].currencyList.length;e++)0==e?this.currencyTxt1.textColor=this.chooseColor(i[n].foodList[r].currencyList[e].currencyType,i[n].foodList[r].currencyList[e].currencyNum):1==e?this.currencyTxt2.textColor=this.chooseColor(i[n].foodList[r].currencyList[e].currencyType,i[n].foodList[r].currencyList[e].currencyNum):2==e?this.currencyTxt3.textColor=this.chooseColor(i[n].foodList[r].currencyList[e].currencyType,i[n].foodList[r].currencyList[e].currencyNum):3==e&&(this.currencyTxt4.textColor=this.chooseColor(i[n].foodList[r].currencyList[e].currencyType,i[n].foodList[r].currencyList[e].currencyNum));1==i[n].foodList[r].researchStatus?this.currencyGroup.visible=!1:this.noEnoughGroup.visible=!1,2==i[n].foodList[r].researchStatus?(this.addLevelGroup.visible=!1,this.researchListGroup.visible=!1):(this.completeTxt.visible=!1,this.researchMax.visible=!1),r<o.length-1&&r++},h.prototype.newsBtnClick=function(){Log(this.itemIndex),this.details=new e.details.Details(i[n].foodList[this.itemIndex].foodID,-1),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.details)},h.prototype.studyBtnClick=function(){var t=this;Log(this.itemIndex);var o=ModelManager.getInstance().getModel(ModuleName.LOGIN),r=o.loginParam,s={token:r.token,foodID:i[n].foodList[this.itemIndex].foodID};core.Http.sendPostData("doBookResearch",s,function(o){0==o.code?(core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.USERINFO_DATA)),a.dispose(),TownThe.uiComplete()):2002==o.code?(t.window=new e.window.Window(4,o.fridge,i[n].foodList[t.itemIndex],a),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(t.window)):tips.Tips.tip(o.errMsg+"("+o.code+")")})},h.prototype.chooseColor=function(e,t){return 1==e?t<=s.rice?0:16711680:2==e?t<=s.banana?0:16711680:3==e?t<=s.vegetable?0:16711680:4==e?t<=s.meat?0:16711680:5==e?t<=s.fish?0:16711680:void 0},h.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this)},h}(eui.ItemRenderer);__reflect(c.prototype,"menuLogic",["core.IComponent"])}(t=e.cook||(e.cook={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(t){function i(){var e=t.call(this)||this;return e.hasCreate=!1,e.needSetData=!1,e.sourceImageState=-1,e.addEventListener(eui.UIEvent.COMPLETE,e.uiComplete,e),e.skinName="resource/ui_skin/MenuSureSkin.exml",e}return __extends(i,t),i.prototype.uiComplete=function(){this.discountNum.touchEnabled=!1,this.advanceNum.touchEnabled=!1,this.flatterAddNum.touchEnabled=!1,this.flatterCutNum.touchEnabled=!1,this.refuseNum.touchEnabled=!1,this.sellNum.touchEnabled=!1,this.hasCreate=!0,this.cfgEvt(),this.needSetData&&this.setInfo(this.saleInfo)},i.prototype.getData=function(){var e=this,t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.loginParam,n={token:i.token,index:this.role.getRoleData().seatNumber};core.Http.sendPostData("saleInfo",n,function(t){if(0==t.code){var i=new data.SalesInfo;i.copyData(t.data),e.setInfo(i)}else tips.Tips.tip(t.errMsg+"("+t.code+")")})},i.prototype.showdisris=function(e){},i.prototype.setInfo=function(e){var t=this;t.saleInfo=e;var i=jsondata.JsonConfigManager.getFoodDataById(e.foodInfo.foodId);if(t.hasCreate?t.needSetData=!1:t.needSetData=!0,1==e.isDiscount?(t.discountBtn.source="hallUI.mai_02_xz_png",t.discountBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.discountBtnClick,t)):t.discountBtn.source="hallUI.mai_02_png",1==e.isRisePrice?(t.advanceBtn.source="hallUI.mai_03_xz_png",t.advanceBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.advanceBtnClick,t)):t.advanceBtn.source="hallUI.mai_03_png",1==e.isDiscount||1==e.isRisePrice||null==e.sellFoodInfo.foodId)t.commendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.commendBtnClick,t),t.commendBtn.visible=!1,t.foodCommendImg.visible=!1,t.foodCommendImgBg.visible=!1,t.foodCommendNum.visible=!1,0==t.sourceImageState?(egret.Tween.get(t.foodNowImg,{loop:!1}).to({x:386,y:315,width:180,height:180},500).call(function(){Log("removeTeewns................"),egret.Tween.removeTweens(t.foodNowImg)}),egret.Tween.get(t.foodNowImgBg,{loop:!1}).to({x:386,y:315,width:180,height:180},500).call(function(){Log("removeTeewns................"),egret.Tween.removeTweens(t.foodNowImgBg)})):(t.foodNowImg.x=386,t.foodNowImg.y=315,t.foodNowImg.width=180,t.foodNowImg.height=180,t.foodNowImgBg.x=386,t.foodNowImgBg.y=315,t.foodNowImgBg.width=180,t.foodNowImgBg.height=180),t.sourceImageState=1;else{var n=jsondata.JsonConfigManager.getFoodDataById(e.sellFoodInfo.foodId);t.commendBtn.visible=!0,t.foodCommendImgBg.visible=!0,t.foodCommendImgBg.source="windowUI_json.level_0"+(e.sellFoodInfo.foodQualify-1)+"_png",t.foodCommendImg.visible=!0,t.foodCommendImg.source="Food."+n.foodlogo+"_png",t.foodCommendNum.visible=!0,t.foodCommendNum.text=""+e.sellFoodInfo.heartnumber,t.foodNowImg.x=368,t.foodNowImg.y=330,t.foodNowImg.width=155,t.foodNowImg.height=155,t.foodNowImgBg.x=368,t.foodNowImgBg.y=330,t.foodNowImgBg.width=155,t.foodNowImgBg.height=155,t.sourceImageState=0}1==e.isCompliment?(t.flatterBtn.source="hallUI.mai_04_xz_png",t.flatterBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.flatterBtnClick,t)):t.flatterBtn.source="hallUI.mai_04_png";var o=i.foodname;t.foodName.text=o,t.foodNowImg.source="Food."+i.foodlogo+"_png",1==e.foodQualify?t.foodNowImgBg.source="":t.foodNowImgBg.source="windowUI_json.level_0"+(e.foodQualify-1)+"_png",t.payMoney.text=e.foodInfo.price.toString(),0!=e.foodInfo.isHave?(this.sellBtn.visible=!0,this.makeBtn.visible=!1):(this.sellBtn.visible=!1,this.makeBtn.visible=!0),t.discountNum.text=e.discountNumber.toString(),t.advanceNum.text=e.risePriceNumber.toString(),t.flatterAddNum.text=e.complimentNumber[0].toString(),t.flatterCutNum.text="/"+e.complimentNumber[1].toString(),t.refuseNum.text=e.refusedNumber.toString(),t.sellNum.text=e.saleNumber.toString(),t.customerImg.source="hallUI.body_"+this.role.getRoleData().id+"_png",t.talkBackImage.visible=!1,t.talkTxt.visible=!1},i.prototype.cfgEvt=function(){var e=this;null!=e.closeRect&&(e.closeRect.addEventListener(egret.TouchEvent.TOUCH_TAP,e.closeRectClick,e),e.discountBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.discountBtnClick,e),e.commendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.commendBtnClick,e),e.advanceBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.advanceBtnClick,e),e.flatterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.flatterBtnClick,e),e.refuseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.refuseBtnClick,e),e.sellBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.sellBtnClick,e),this.makeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.makeBtnClick,this))},i.prototype.closeRectClick=function(e){core.Controller.getInstance().showFriend(),this.parent&&this.parent.removeChild(this),this.closeRect&&this.closeRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this)},i.prototype.discountBtnClick=function(e){var t=this,i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.loginParam,o={token:n.token,index:this.role.getRoleData().seatNumber};core.Http.sendPostData("discountSale",o,function(i){if(0==i.code){var n=new data.SalesInfo;n.copyData(i.data),t.setInfo(n),t.displayDialog(1);var o=new data.LoveValue(t.saleInfo.loveNumber,t.saleInfo.discountNumber,e.stageX,e.stageY);core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.FLUSH_LOVE_VALUE,o))}else tips.Tips.tip(i.errMsg+"("+i.code+")")})},i.prototype.displayDialog=function(e,t){void 0===t&&(t=0);var i=this;i.talkBackImage.visible=!0,i.talkTxt.visible=!0,1==e?i.talkTxt.text="感谢！ 真优惠！":2==e?i.talkTxt.text="涨价！太贵了,*&^#**#*%%":3==e?t>0?i.talkTxt.text="真会说话！":i.talkTxt.text="不吃这一套！":4==e&&(i.talkTxt.text="拒绝推销"),clearTimeout(i.timeNumber),i.timeNumber=setTimeout(function(){clearTimeout(i.timeNumber),i.talkBackImage.visible=!1,i.talkTxt.visible=!1},2e3)},i.prototype.commendBtnClick=function(e){var t=this,i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.loginParam,o={token:n.token,index:this.role.getRoleData().seatNumber,foodId:this.saleInfo.sellFoodInfo.foodId,cookbookLevel:this.saleInfo.sellFoodInfo.foodQualify};core.Http.sendPostData("sellSale",o,function(i){if(0==i.code){var n=t.saleInfo.sellFoodInfo.heartnumber,o=new data.SalesInfo;o.copyData(i.data),t.setInfo(o),t.displayDialog(4);var r=new data.LoveValue(t.saleInfo.loveNumber,n,e.stageX,e.stageY);core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.FLUSH_LOVE_VALUE,r)),t.makeBtn.visible=!1,t.sellBtn.visible=!0,t.role.receiveSellInfo(t.saleInfo.foodInfo)}else tips.Tips.tip(i.errMsg+"("+i.code+")")})},i.prototype.advanceBtnClick=function(e){var t=this,i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.loginParam,o={token:n.token,index:this.role.getRoleData().seatNumber};core.Http.sendPostData("risePriceSale",o,function(i){if(0==i.code){var n=new data.SalesInfo;n.copyData(i.data),t.setInfo(n),t.displayDialog(2);var o=new data.LoveValue(t.saleInfo.loveNumber,t.saleInfo.risePriceNumber,e.stageX,e.stageY);core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.FLUSH_LOVE_VALUE,o))}else tips.Tips.tip(i.errMsg+"("+i.code+")")})},i.prototype.flatterBtnClick=function(e){var t=this,i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.loginParam,o={token:n.token,index:this.role.getRoleData().seatNumber};core.Http.sendPostData("compliment",o,function(i){if(0==i.code){t.saleInfo.isCompliment=1,t.saleInfo.loveNumber=i.data.loveNumber,t.setInfo(t.saleInfo);var n=i.data.incrcomplimentNumber;t.displayDialog(3,n);var o=new data.LoveValue(t.saleInfo.loveNumber,n,e.stageX,e.stageY);core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.FLUSH_LOVE_VALUE,o))}else tips.Tips.tip(i.errMsg+"("+i.code+")")})},i.prototype.refuseBtnClick=function(e){this.hide(),this.role.sendRefuse(e.stageX,e.stageY),this.role=null},i.prototype.sellBtnClick=function(e){this.hide(),this.role.sendMakeEnd(e.stageX,e.stageY),this.role=null},i.prototype.makeBtnClick=function(){var t=this,i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.loginParam,o={token:n.token};core.Http.sendGetData("isChefEnough",o,function(i){if(0==i.code){var n=i.data;t.startMake(n)}else if(1008==i.code){for(var o=0,r=0,a=0;a<i.staff.chefList.length;a++)1==i.staff.chefList[a].staffType&&o++,3!=i.staff.chefList[a].staffType&&r++;var s=new e.window.Window(5,t,o,r);core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(s)}else tips.Tips.tip(i.errMsg+"("+i.code+")")})},i.prototype.startMake=function(t){var i=this,n=ModelManager.getInstance().getModel(ModuleName.LOGIN),o=n.loginParam,r={token:o.token,foodID:this.saleInfo.foodInfo.foodId,index:t};core.Http.sendPostData("makeFood",r,function(t){if(0==t.code){Log(t.data),i.hide();var n=new data.MakeDetail;n.copyData(t.data),core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.MAKE_FOOD_START,n)),core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.USERINFO_DATA))}else if(1001==t.code){var o=t.data.totalStrenth+"",r=t.data.needStrenth+"",a=new e.window.Window(3,null,o,r);core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(a)}else if(1002==t.code){for(var s={currencyList:[]},h=0;h<t.data.length;h++)0!=t.data[h].currencyNum&&s.currencyList.push(t.data[h]);var c=new e.window.Window(4,t.fridge,s,i);core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(c)}else tips.Tips.tip(t.errMsg+"("+t.code+")")})},i.prototype.show=function(e){this.sourceImageState=-1,this.role=e,this.getData(),this.cfgEvt(),core.Controller.getInstance().hideFriend(),core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).addChild(this)},i.prototype.hide=function(){this.removeEvt(),core.Controller.getInstance().showFriend(),this.parent&&this.parent.removeChild(this)},i.prototype.removeEvt=function(){var e=this;e.closeRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.closeRectClick,e),e.discountBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.discountBtnClick,e),e.commendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.commendBtnClick,e),e.advanceBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.advanceBtnClick,e),e.flatterBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.flatterBtnClick,e),e.refuseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.refuseBtnClick,e),e.sellBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.sellBtnClick,e)},i.prototype.dispose=function(){var e=this;clearTimeout(e.timeNumber),egret.Tween.removeTweens(e.foodNowImg),egret.Tween.removeTweens(e.foodNowImgBg),e.role=null,e.saleInfo=null,e.removeEvt(),e.removeChildren(),e.foodName=null,e.customerImg=null,e.commendBtn=null,e.foodCommendImg=null,e.foodCommendImgBg=null,e.foodCommendNum=null,e.payMoney=null,e.closeRect=null,e.discountBtn=null,e.advanceBtn=null,e.flatterBtn=null,e.refuseBtn=null,e.sellBtn=null,e.discountNum=null,e.advanceNum=null,e.flatterCutNum=null,e.flatterAddNum=null,e.refuseNum=null,e.sellNum=null,e.foodNowImg=null,e.foodNowImgBg=null,e.talkBackImage=null,e.talkTxt=null,e.parent&&e.parent.removeChild(e)},i}(eui.Component);t.Trade=i,__reflect(i.prototype,"view.cook.Trade",["core.IComponent"])}(t=e.cook||(e.cook={}))}(view||(view={}));var wareHouseData=null,wareHouseType=null,containerData=null,containerType=null,arr=new Array,view;!function(e){var t;!function(t){var i=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/WarehouseSkin.exml",t}return __extends(t,e),t.prototype.uiComplete=function(){var e=this;this.warehouseShow.visible=!1,this.containerShow.visible=!1,this.enterGroup.visible=!0;for(var t=0;2>t;t++)toutap(this["menuSelect"+(t+6)],this.warehousemenuSelectClick,this,[t]);for(var t=0;5>t;t++)toutap(this["menuSelect"+(t+1)],this.menuSelectClick,this,[t]);this.saveTxt0.text="库存：0";var i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.loginParam,o={token:n.token};core.Http.sendGetData("inventory",o,function(t){0==t.code?(Log(t.data),null==t.data||(containerData=t.data.inventoryList,e.saveTxt.text="库存："+t.data.currentNum+"/"+t.data.totalNum,e.containerNum.text=t.data.currentNum+"/"+t.data.totalNum,e.showList(0),containerType=0)):tips.Tips.tip(t.errMsg+"("+t.code+")")}),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this),this.closeRect0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hideWarehouse,this),this.warehouseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showWarehouse,this),this.containerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showContainer,this),this.closeRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hideWarehouse,this)},t.prototype.hideWarehouse=function(){this.warehouseShow.visible=!1,this.containerShow.visible=!1,this.enterGroup.visible=!0},t.prototype.showWarehouse=function(){var e=this;this.warehouseScroll.stopAnimation(),this.warehouseGroup.scrollV=0,this.menuSelect6.source="windowUI_json.Warehouse_tab1_01_png",this.menuSelect7.source="windowUI_json.Warehouse_tab2_02_png";var t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.loginParam,n={token:i.token};core.Http.sendGetData("prop",n,function(t){0==t.code?(Log(t.data),null==t.data||(wareHouseData=t.data,wareHouseType=0,e.showwarsehouseList(0),e.warehouseShow.visible=!0,e.enterGroup.visible=!1,e.containerShow.visible=!1)):tips.Tips.tip(t.errMsg+"("+t.code+")")})},t.prototype.showContainer=function(){this.containerScroll.stopAnimation(),this.containerGroup.scrollV=0,this.menuSelect1.source="windowUI_json.Menu_tab4_01_png",this.menuSelect2.source="windowUI_json.Menu_tab1_02_png",this.menuSelect3.source="windowUI_json.Menu_tab2_02_png",this.menuSelect4.source="windowUI_json.Menu_tab3_02_png",this.menuSelect5.source="windowUI_json.Menu_tab5_02_png",this.containerShow.visible=!0,this.enterGroup.visible=!1,this.warehouseShow.visible=!1},t.prototype.showList=function(e){ModelManager.getInstance().getModel(ModuleName.HALL);if(this.dsListWarehouse=[],arr.length=0,e+=1,Log("货柜data======",containerData),null==containerData);else for(var t=0;t<containerData.length;t++)if(containerData[t].foodType==e){var i=jsondata.JsonConfigManager.getFoodDataById(containerData[t].foodId).foodname,o="Food."+jsondata.JsonConfigManager.getFoodDataById(containerData[t].foodId).foodlogo+"_png",r=containerData[t].foodLevel,a=containerData[t].foodNum,s="",h="",c="",l="",d="",u="",p=getStartSouce(containerData[t].foodQualify-1);h=p[0],c=p[1],l=p[2],d=p[3],u=p[4],containerData[t].foodQualify>1&&(s="windowUI_json.level_0"+(containerData[t].foodQualify-1)+"_png"),arr.push(t),a>0&&this.dsListWarehouse.push({foodNameTxt:i,foodImage:o,saveNum:a,levelNum:r,star1:h,star2:c,star3:l,star4:d,star5:u,foodImageBg:s})}0==arr.length?this.listcontainer.visible=!1:this.listcontainer.visible=!0,this.listcontainer.dataProvider=new eui.ArrayCollection(this.dsListWarehouse),this.listcontainer.itemRenderer=n
},t.prototype.showwarsehouseList=function(e){this.dsListWarehouse=[],arr.length=0,Log("仓库data======",wareHouseData),e=30+e;for(var t=0;t<wareHouseData.length;t++){for(var i=0,n=wareHouseData[t].prop,r=0;r<n.length;r++){var a=n[t];i+=a.number}this.saveTxt0.text="库存："+i;var s=wareHouseData[t].prop;if(wareHouseData[t].type==e)for(var r=0;r<s.length;r++){var a=s[r],h=jsondata.JsonConfigManager.getPropDataById(a.propId).name,c="windowUI_json."+jsondata.JsonConfigManager.getPropDataById(a.propId).logo+"_png",l="1",d=a.number,u="";arr.push(r),d>0&&this.dsListWarehouse.push({foodNameTxt:h,foodImage:c,saveNum:d,levelNum:l,foodImageBg:u})}}0==arr.length?this.listWarehouse.visible=!1:this.listWarehouse.visible=!0,this.listWarehouse.dataProvider=new eui.ArrayCollection(this.dsListWarehouse),this.listWarehouse.itemRenderer=o},t.prototype.menuSelectClick=function(e){var t=[4,1,2,3,5];e==containerType?tips.Tips.tip("请勿重复点击"):(this.containerScroll.stopAnimation(),this.containerGroup.scrollV=0,this["menuSelect"+(containerType+1)].source="windowUI_json.Menu_tab"+t[containerType]+"_02_png",containerType=e,this["menuSelect"+(containerType+1)].source="windowUI_json.Menu_tab"+t[containerType]+"_01_png",this.showList(e))},t.prototype.warehousemenuSelectClick=function(e){e==wareHouseType?tips.Tips.tip("请勿重复点击"):(this.warehouseScroll.stopAnimation(),this.warehouseGroup.scrollV=0,this["menuSelect"+(wareHouseType+6)].source="windowUI_json.Warehouse_tab"+(wareHouseType+1)+"_02_png",wareHouseType=e,this["menuSelect"+(wareHouseType+6)].source="windowUI_json.Warehouse_tab"+(wareHouseType+1)+"_01_png",this.showwarsehouseList(e))},t.prototype.closeRectClick=function(e){this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this)},t.prototype.dispose=function(){this.removeChildren(),this.listWarehouse.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this)},t}(eui.Component);t.WareHouse=i,__reflect(i.prototype,"view.cook.WareHouse",["core.IComponent"]);var n=function(t){function i(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,e.dispose,e),e.skinName="resource/ui_skin/containerListSkin.exml",e}return __extends(i,t),i.prototype.onComplete=function(){this.containerListClick.addEventListener(egret.TouchEvent.TOUCH_TAP,this.containerListClickDown,this)},i.prototype.containerListClickDown=function(){Log(this.itemIndex);var t=new e.details.Details(containerData[this.itemIndex].foodId,containerData[this.itemIndex].foodQualify);core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(t)},i.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this),arr.length=0},i}(eui.ItemRenderer);__reflect(n.prototype,"containerLogic",["core.IComponent"]);var o=function(t){function i(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,e.dispose,e),e.skinName="resource/ui_skin/WarehouseListSkin.exml",e}return __extends(i,t),i.prototype.onComplete=function(){},i.prototype.warehouseListClickDown=function(){Log(this.itemIndex);var t=new e.details.Details(containerData[this.itemIndex].foodId,containerData[this.itemIndex].foodQualify);core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(t)},i.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this),arr.length=0},i}(eui.ItemRenderer);__reflect(o.prototype,"wareHouseLogic",["core.IComponent"])}(t=e.cook||(e.cook={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=null,n=null,o=null,r=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/DecorateSkin.exml",t}return __extends(t,e),t.prototype.uiComplete=function(){var e=this;o=this,this.decorateScroll.stopAnimation(),this.decorateGroup.scrollV=0,this.menuSelect1.source="windowUI_json.Decorate_tab1_02_png",this.menuSelect2.source="windowUI_json.Decorate_tab2_01_png",this.menuSelect3.source="windowUI_json.Decorate_tab3_01_png",this.menuSelect4.source="windowUI_json.Decorate_tab4_01_png",this.menuSelect5.source="windowUI_json.Decorate_tab5_01_png",this.menuSelect6.source="windowUI_json.Decorate_tab6_01_png",this.menuSelect7.source="windowUI_json.Decorate_tab7_01_png",this.menuSelect8.source="windowUI_json.Decorate_tab8_01_png",this.menuSelect9.source="windowUI_json.Decorate_tab9_01_png";var t=ModelManager.getInstance().getModel(ModuleName.LOGIN),r=t.loginParam,a={token:r.token};core.Http.sendGetData("getArticleInfo",a,function(t){0==t.code?(n=t.data,e.currentStrength.text="豪华度 "+t.data.totalHaohua,i=0,e.showList(0),Log(n)):tips.Tips.tip(t.errMsg+"("+t.code+")")});for(var s=0;9>s;s++)toutap(this["menuSelect"+(s+1)],this.menuSelectClick,this,[s]);this.closeRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this)},t.prototype.showList=function(e){this.showcurrentStrength(n.totalHaohua);ModelManager.getInstance().getModel(ModuleName.HALL);this.dsListDecorate=[];for(var t=0;t<n.articleResults[e].articleInfo.length;t++){var i=n.articleResults[e].articleInfo[t],o=i.configArticle.name,r="Decode_json."+i.configArticle.model+"_png",s="+"+i.configArticle.haohua,h="windowUI_json.Decorate_zy_03_png",c="+"+i.configArticle.loveAdd,l="hallUI.currency34_png",d="",u="";0==i.configArticle.loveAdd&&(s="",h="",c="",l="",d="+"+i.configArticle.haohua,u="windowUI_json.Decorate_zy_03_png");var p=i.configArticle.number,g="";g=1==i.configArticle.useType?"hallUI.currency8_png":"hallUI.currency9_png";var v="",f="";n.userPingJi<i.configArticle.condition&&(f="评级"+i.configArticle.condition+"开放",p="",g=""),0==i.state?v="windowUI_json.Decorate_zy_05_png":1==i.state?v="windowUI_json.Decorate_zy_04_png":2==i.state?(v="windowUI_json.Decorate_zy_02_png",f="已购买",p="",g="",0==i.configArticle.loveAdd?(s="",h="",c="",l="",d="",u=""):(s="",h="",c="",l="",d="+"+i.configArticle.loveAdd,u="hallUI.currency34_png")):3==i.state&&(v="windowUI_json.Deta_zy_02_png",f="已购买",p="",g="",0==i.configArticle.loveAdd?(s="",h="",c="",l="",d="",u=""):(s="",h="",c="",l="",d="+"+i.configArticle.loveAdd,u="hallUI.currency34_png")),this.dsListDecorate.push({decorateName:o,decorateIcon:r,num1:s,num1Img:h,num2:c,num2Img:l,num3:d,num3Img:u,num4:p,num4Img:g,decorateSureBtn:v,tipTxt:f})}this.listDecorate.dataProvider=new eui.ArrayCollection(this.dsListDecorate),this.listDecorate.itemRenderer=a},t.prototype.showcurrentStrength=function(e){this.currentStrength.text="豪华度 "+e},t.prototype.menuSelectClick=function(e){e==i?tips.Tips.tip("请勿重复点击"):(this.decorateScroll.stopAnimation(),this.decorateGroup.scrollV=0,this["menuSelect"+(i+1)].source="windowUI_json.Decorate_tab"+(i+1)+"_01_png",i=e,this["menuSelect"+(i+1)].source="windowUI_json.Decorate_tab"+(i+1)+"_02_png",this.showList(e))},t.prototype.closeRectClick=function(e){this.parent&&this.parent.removeChild(this),this.closeRect&&this.closeRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this);var t=core.EventCenter.getInstance();t.removeEventListener(core.DataEventID.MAKE_FOOD_START,this.closeRectClick,this)},t.prototype.dispose=function(){this.removeChildren(),this.listDecorate.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeRect&&this.closeRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this)},t}(eui.Component);t.Decorate=r,__reflect(r.prototype,"view.decorate.Decorate",["core.IComponent"]);var a=function(t){function r(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,e.dispose,e),e.skinName="resource/ui_skin/DecorateListSkin.exml",e}return __extends(r,t),r.prototype.onComplete=function(){this.decorateSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.decorateSureBtnClick,this)},r.prototype.decorateSureBtnClick=function(){Log("装饰itemIndex====",this.itemIndex),0==n.articleResults[i].articleInfo[this.itemIndex].state||(1==n.articleResults[i].articleInfo[this.itemIndex].state?this.activateAction():2==n.articleResults[i].articleInfo[this.itemIndex].state?this.dressAction():3==n.articleResults[i].articleInfo[this.itemIndex].state)},r.prototype.activateAction=function(){var t=this,r=ModelManager.getInstance().getModel(ModuleName.LOGIN),a=r.loginParam,s={token:a.token,articleId:n.articleResults[i].articleInfo[this.itemIndex].id};core.Http.sendPostData("activateArticle",s,function(a){if(0==a.code){tips.Tips.tip("激活"+n.articleResults[i].articleInfo[t.itemIndex].configArticle.name+"成功");var s=a.user.gold;r.userInfo.userData.gold=s;var h=a.user.diamond;r.userInfo.userData.diamond=h,core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.USERINFO_DATA));var c=n.articleResults[i].articleInfo[t.itemIndex].configArticle.model,l="Decode_json."+c+"_png",d=new e.hall.GetGift(l,a);core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(d),n=a.data,o.showList(i)}else tips.Tips.tip(a.errMsg+"("+a.code+")")})},r.prototype.dressAction=function(){var e=this,t=ModelManager.getInstance().getModel(ModuleName.LOGIN),r=t.loginParam,a={token:r.token,articleId:n.articleResults[i].articleInfo[this.itemIndex].id};core.Http.sendPostData("dressArticle",a,function(t){if(0==t.code){o.dispose();var r={id:i,resourceid:n.articleResults[i].articleInfo[e.itemIndex].configArticle.model};core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.UPDATE_ARTICLE_INHALL,r))}else tips.Tips.tip(t.errMsg+"("+t.code+")")})},r.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this)},r}(eui.ItemRenderer);__reflect(a.prototype,"decorateLogic",["core.IComponent"])}(t=e.decorate||(e.decorate={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(t,i,n,o,r,a,s,h){var c=e.call(this)||this;return c.picName=t,c.str=i,c.dname=n,c.dname2=o,c.type=r,c.id=a,c.callFun=h,c.level=s,c.addEventListener(eui.UIEvent.COMPLETE,c.uiComplete,c),c.skinName="resource/ui_skin/DecorateSureSkin.exml",c}return __extends(t,e),t.prototype.uiComplete=function(){this.decorateSureTitle.text="是否替换"+this.dname+"？",this.decorateSureName.text=this.dname2,this.decorateSureIcon.source="Decode_json."+this.picName+"_png",this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBtnClick,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.sureBtnClick=function(e){var t=this,i={token:this.str,id:this.id,type:this.type,level:this.level,name:this.dname2};core.Http.sendPostData("changetype",i,function(e){0==e.code?(t.parent.removeChild(t),t.callFun&&t.callFun(),core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.UPDATE_ARTICLE_INHALL,e.data))):10==e.code&&tips.Tips.tip(""+e.errMsg)})},t.prototype.closeBtnClick=function(e){this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBtnClick,this),this.decorateSureTitle=null,this.decorateSureName=null,this.str=null,this.dname=null,this.dname2=null,this.type=null,this.id=null,this.callFun=null,this.level=null},t}(eui.Component);e.DecorateChange=t,__reflect(t.prototype,"view.decorate.DecorateChange",["core.IComponent"])}(t=e.decorate||(e.decorate={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(t){function i(e,i,n,o,r,a,s){var h=t.call(this)||this;return h.picName=e,h.str=i,h.dname=n,h.dname2=o,h.type=r,h.id=a,h.callFun=s,h.addEventListener(eui.UIEvent.COMPLETE,h.uiComplete,h),h.skinName="resource/ui_skin/DecorateSureSkin.exml",h}return __extends(i,t),i.prototype.uiComplete=function(){this.decorateSureTitle.text="是否升级"+this.dname+"？",this.decorateSureName.text=this.dname2,this.decorateSureIcon.source="Decode_json."+this.picName+"_png",this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBtnClick,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.sureBtnClick=function(t){var i=this,n={token:this.str,id:this.id,type:this.type};core.Http.sendPostData("article_upgrade",n,function(t){if(0==t.code){i.parent.removeChild(i),i.callFun&&i.callFun();var n=t.data.resourceid.split(",")[0],o="Decode_json."+n+"_png";i.getGift=new e.hall.GetGift(o,t),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(i.getGift)}else 10==t.code&&tips.Tips.tip(""+t.errMsg)})},i.prototype.closeBtnClick=function(e){this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBtnClick,this),this.decorateSureTitle=null,this.decorateSureName=null,this.str=null,this.dname=null,this.dname2=null,this.type=null,this.id=null,this.callFun=null},i}(eui.Component);t.DecorateSure=i,__reflect(i.prototype,"view.decorate.DecorateSure",["core.IComponent"])}(t=e.decorate||(e.decorate={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=null,i=null,n=null,o=null,r=new Array,a=0,s=function(e){function s(t,i){var n=e.call(this)||this;return n.foodQualify=-1,n.foodId=t,n.foodQualify=i,n.addEventListener(eui.UIEvent.COMPLETE,n.uiComplete,n),n.skinName="resource/ui_skin/DetailsSkin.exml",n}return __extends(s,e),s.prototype.uiComplete=function(){var e=this;Log(this.foodId),o=jsondata.JsonConfigManager.getSkillList(this.foodId),n=jsondata.JsonConfigManager.getStrengthList(this.foodId),Log(n),Log(o),this.DishesTxt.text=jsondata.JsonConfigManager.getFoodDataById(this.foodId).foodname,this.DishesIcon.source="Food."+jsondata.JsonConfigManager.getFoodDataById(this.foodId).foodlogo+"_png";var i=ModelManager.getInstance().getModel(ModuleName.LOGIN),r=i.loginParam,a={token:r.token,foodID:this.foodId};core.Http.sendGetData("getFoodDetail",a,function(i){if(0==i.code){t=i.data,e.levelTxt.text="等级："+i.data.info.foodLevel,e.makeNumTxt.text="已制作："+i.data.info.times,-1==e.foodQualify&&(e.foodQualify=i.data.info.foodQulify),e.qualityTxt.text="品质："+e.foodQualify,e.saveNumTxt.text="库存："+i.data.info.stock,e.typeTxt.text="类型："+e.typeReturn(i.data.info.foodType);for(var n=0;n<i.data.info.currencyList.length;n++)0==n?(e.currencyImage1.source="hallUI.currency"+i.data.info.currencyList[n].currencyType+"_png",e.currencyTxt1.text=i.data.info.currencyList[n].currencyNum):1==n?(e.currencyImage2.source="hallUI.currency"+i.data.info.currencyList[n].currencyType+"_png",e.currencyTxt2.text=i.data.info.currencyList[n].currencyNum):2==n?(e.currencyImage3.source="hallUI.currency"+i.data.info.currencyList[n].currencyType+"_png",e.currencyTxt3.text=i.data.info.currencyList[n].currencyNum):3==n&&(e.currencyImage4.source="hallUI.currency"+i.data.info.currencyList[n].currencyType+"_png",e.currencyTxt4.text=i.data.info.currencyList[n].currencyNum)}else tips.Tips.tip(i.errMsg+"("+i.code+")")}),this.detailsSelect1.source="windowUI_json.Deta_tab1_01_png",this.detailsSelect2.source="windowUI_json.Deta_tab2_02_png",this.detailsSelect3.source="windowUI_json.Deta_tab3_02_png",this.detailsSelect1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.detailsSelect1Click,this),this.detailsSelect2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.detailsSelect2Click,this),this.detailsSelect3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.detailsSelect3Click,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},s.prototype.typeReturn=function(e){return 1==e?"甜品":2==e?"中餐":3==e?"西餐":4==e?"烧烤":5==e?"饮品":void 0},s.prototype.detailsSelect1Click=function(){this.detailsSelect1.source="windowUI_json.Deta_tab1_01_png",this.detailsSelect2.source="windowUI_json.Deta_tab2_02_png",this.detailsSelect3.source="windowUI_json.Deta_tab3_02_png",this.newsGroup.visible=!0,this.scrollerGroup.visible=!1},s.prototype.detailsSelect2Click=function(){this.detailsSelect1.source="windowUI_json.Deta_tab1_02_png",this.detailsSelect2.source="windowUI_json.Deta_tab2_01_png",this.detailsSelect3.source="windowUI_json.Deta_tab3_02_png",this.newsGroup.visible=!1,this.scrollerGroup.visible=!0,i=1,this.dsListDetails=[];for(var e=0;e<o.length;e++){var n=e+1,r=""+n,a="",s="",c="windowUI_json.Deta_zy_02_png",l="已制作："+t.proficiency+"/"+o[e].request,d="/"+o[e].request,u=this.skillType(o[e].rewardtype),p="hallUI.currency"+o[e].rewardtype+"_png",g="windowUI_json.Deta_zy_02_png";t.proficiency>=o[e].request?l="":g="",this.dsListDetails.push({Num:r,powerTxt:a,noPowerTxt:s,experienceNum:l,experienceTopNum:d,experienceTxt:u,IconImg:p,complete:g,complete0:c})}this.listDetails.dataProvider=new eui.ArrayCollection(this.dsListDetails),this.listDetails.itemRenderer=h},s.prototype.detailsSelect3Click=function(){this.detailsSelect1.source="windowUI_json.Deta_tab1_02_png",this.detailsSelect2.source="windowUI_json.Deta_tab2_02_png",this.detailsSelect3.source="windowUI_json.Deta_tab3_01_png",this.newsGroup.visible=!1,this.scrollerGroup.visible=!0,i=2,this.dsListDetails=[];for(var e=0;e<n.length;e++){var o=e+1,r=""+o;Log(n[e]);var a=n[e].crit+"%几率品质+"+n[e].addition,s="需求厨力："+t.strength+"/"+n[e].strength,c="windowUI_json.Deta_zy_02_png",l="",d="/",u="",p="hallUI.currency1_png",g="windowUI_json.Deta_zy_02_png";t.strength>=n[e].strength?s="":g="",this.dsListDetails.push({Num:r,powerTxt:a,noPowerTxt:s,experienceNum:l,experienceTopNum:d,experienceTxt:u,IconImg:p,complete:c,complete0:g})}this.listDetails.dataProvider=new eui.ArrayCollection(this.dsListDetails),this.listDetails.itemRenderer=h},s.prototype.skillType=function(e){return 1==e?"材料减少":2==e?"时间减少":3==e?"新的图纸":4==e?"售价提高":5==e?"品质加成":null},s.prototype.closeBtnClick=function(e){this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this),t=null,i=null,n=null,o=null,r=new Array,a=0},s.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},s}(eui.Component);e.Details=s,__reflect(s.prototype,"view.details.Details",["core.IComponent"]);var h=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.onComplete,t),t.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,t.dispose,t),t.skinName="resource/ui_skin/DetailsListSkin.exml",t}return __extends(t,e),t.prototype.onComplete=function(){1==i?(this.experienceGroup.visible=!0,this.powerGroup.visible=!1):2==i&&(this.experienceGroup.visible=!1,this.powerGroup.visible=!0),a<r.length-1&&a++},t.prototype.menuListClickDown=function(){Log(this.itemIndex)},t.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this)},t}(eui.ItemRenderer);__reflect(h.prototype,"detailsLogic",["core.IComponent"])}(t=e.details||(e.details={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/ExplainSkin.exml",t}return __extends(t,e),t.prototype.uiComplete=function(){var e=this,t=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=t.loginParam,o={token:n.token};core.Http.sendGetData("notice",o,function(t){if(0==t.code){Log(t.data),e.dsListRule=[];for(var n=0;n<t.data.length+1;n++)n==t.data.length?e.dsListRule.push({ruleTitle:"",ruleText:""}):e.dsListRule.push({ruleTitle:t.data[n].title,ruleText:t.data[n].content+"\n"});e.listRule.dataProvider=new eui.ArrayCollection(e.dsListRule),e.listRule.itemRenderer=i}else tips.Tips.tip(t.errMsg+"("+t.code+")")}),this.RuleBackBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.RuleBackBtnClick,this)},t.prototype.RuleBackBtnClick=function(e){this.parent&&this.parent.removeChild(this),this.RuleBackBtn&&this.RuleBackBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.RuleBackBtnClick,this)},t.prototype.dispose=function(){this.removeChildren(),this.listRule.removeChildren(),this.parent&&this.parent.removeChild(this),this.RuleBackBtn&&this.RuleBackBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.RuleBackBtnClick,this)},t}(eui.Component);e.ExplainLogic=t,__reflect(t.prototype,"view.explain.ExplainLogic",["core.IComponent"]);var i=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.onComplete,t),t.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,t.dispose,t),t.skinName="resource/ui_skin/ExplainListSkin.exml",t}return __extends(t,e),t.prototype.onComplete=function(){this.RuleLabel.lineSpacing=10},t.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this),this.RuleLabel=null},t}(eui.ItemRenderer);__reflect(i.prototype,"achievementLogic",["core.IComponent"])}(t=e.explain||(e.explain={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=null,n=null,o=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/FacilitySkin.exml",t}return __extends(t,e),t.prototype.uiComplete=function(){var e=this;n=this;var t=ModelManager.getInstance().getModel(ModuleName.LOGIN),o=t.loginParam,a={token:o.token};core.Http.sendGetData("facilityUpgradeInfo",a,function(t){if(0==t.code){Log(t.data),i=t.data,e.dsListFacility=[];for(var n=0;n<t.data.length;n++){var o=jsondata.JsonConfigManager.getFacilityResource(t.data[n].id,t.data[n].level),a=jsondata.JsonConfigManager.getFacilityResource(t.data[n].id,t.data[n].level+1);null==a&&(a=o);var s="",h="",c="",l="",d="",u="";1==t.data[n].id?(s="灶台",h="windowUI_json.Equip_zy_02_png",c="+"+o.attribute,l="厨力",d="+"+a.attribute,u="厨力"):2==t.data[n].id?(s="柜台",h="windowUI_json.Equip_zy_04_png",c="+"+o.attribute,l="菜品库存",d="+"+a.attribute,u="菜品库存"):3==t.data[n].id?(s="冰箱",h="windowUI_json.Equip_zy_03_png",c="+"+o.attribute,l="每种食材库存",d="+"+a.attribute,u="每种食材库存"):4==t.data[n].id&&(s="招牌",h="windowUI_json.Equip_zy_05_png",c="+"+o.attribute,l="餐馆名气",d="+"+a.attribute,u="餐馆名气"),Log(o);var p="等级："+t.data[n].level,g=o.needgold;e.dsListFacility.push({facilityIcon:h,facilityName:s,facilityLevel:p,Num:c,afterNum:d,NumTxt:l,afterNumTxt:u,money:g})}e.listFacility.dataProvider=new eui.ArrayCollection(e.dsListFacility),e.listFacility.itemRenderer=r}else tips.Tips.tip(t.errMsg+"("+t.code+")")}),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.closeBtnClick=function(e){this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t}(eui.Component);t.Facility=o,__reflect(o.prototype,"view.facility.Facility",["core.IComponent"]);var r=function(t){function o(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,e.dispose,e),e.skinName="resource/ui_skin/FacilityListSkin.exml",e}return __extends(o,t),o.prototype.onComplete=function(){this.updataBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.updataBtnClick,this)},o.prototype.updataBtnClick=function(){var t=this;Log(this.itemIndex);var o=ModelManager.getInstance().getModel(ModuleName.LOGIN),r=o.loginParam,a={token:r.token,id:i[this.itemIndex].id};core.Http.sendPostData("facilityUpgrade",a,function(r){if(0==r.code){Log("升级成功"),n.uiComplete(),tips.Tips.tip("升级成功");var a=r.user.gold;o.userInfo.userData.gold=a,core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.USERINFO_GOLD))}else 1004==r.code?(t.window=new e.window.Window(8,r.user,jsondata.JsonConfigManager.getFacilityResource(i[t.itemIndex].id,i[t.itemIndex].level).needgold),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(t.window)):3005==r.code?(t.window=new e.window.Window(11,n,i[t.itemIndex].level+1,i[t.itemIndex].level),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(t.window)):tips.Tips.tip(r.errMsg+"("+r.code+")")})},o.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this)},o}(eui.ItemRenderer);__reflect(r.prototype,"facilityLogic",["core.IComponent"])}(t=e.facility||(e.facility={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(){function e(){}return e.getGoldImage=function(){return 0==this.goldImgList.length&&this.addFlyGold(),this.goldImgList},e.addFlyGold=function(){for(var e,t=0;15>t;t++)e=core.BitmapCreator.createCurrencyByType(CurrencyEnumType.gold),this.goldImgList.push(e)},e.flyGoldInHallStunt=function(e,t){var i=this;null==i.flyStunt&&(i.flyStunt=core.StuntManager.getInstance().createStunt(1)),i.flyStunt.x=100,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(i.flyStunt),i.flyStunt.gotoAndPlay(1,1),i.flyStunt.addEventListener(egret.Event.COMPLETE,function(){i.flyStunt.parent&&i.flyStunt.parent.removeChild(i.flyStunt),e&&e.call(t)},i)},e.goldImgList=new Array,e}();e.Fly=t,__reflect(t.prototype,"view.fly.Fly")}(t=e.fly||(e.fly={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(){function e(){}return e.addFlyLove=function(e){for(var t;this.loveImgList.length<e;){var i="hallUI.currency34_png";t=core.BitmapCreator.createBitmap(i),this.loveImgList.push(t)}},e.clear=function(){var e,t=0;for(t=0;t<this.loveImgList.length;t++)e=this.loveImgList[t],e.parent&&e.parent.removeChild(e)},e.tweenMove=function(e,t,i,n){var o=this,r=new egret.Point(120,50);egret.Tween.get(t,{loop:!1}).wait(e).to({x:r.x,y:r.y,rotation:360},800).call(function(){egret.Tween.removeTweens(t),o.clear(),i&&i.call(n)},this)},e.tweenMove1=function(e,t,i,n){var o=new egret.Point(120,50);egret.Tween.get(t,{loop:!1}).wait(e).to({x:o.x,y:o.y,rotation:360},800).call(function(){egret.Tween.removeTweens(t)},this)},e.flyLoveValue=function(e,t,i,n,o){var r,a,s=core.LayerCenter.getInstance().getLayer(LayerEnum.TIP),h=(new egret.Point(120,50),this),c=0;for(h.addFlyLove(e),r=h.loveImgList;e>c;c++)s.addChild(r[c]);for(r=h.loveImgList,c=0;e>c;c++){a=h.loveImgList[c],a.x=t,a.y=i;var l=50+150*c;c==e-1?h.tweenMove(l,a,n,o):h.tweenMove1(l,a,n,o)}},e.loveImgList=new Array,e}();e.FlyLove=t,__reflect(t.prototype,"view.fly.FlyLove")}(t=e.fly||(e.fly={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(){function e(){}return e.flyMyster=function(e,t){var i=this;null==i.flyImage&&(i.flyImage=core.BitmapCreator.createBitmap("hallUI.shenmi_03_png")),i.flyImage.scaleX=1,i.flyImage.scaleY=0,i.flyImage.anchorOffsetX=i.flyImage.width/2,i.flyImage.anchorOffsetY=i.flyImage.height/2,i.flyImage.x=0+i.flyImage.anchorOffsetX,i.flyImage.y=360+i.flyImage.anchorOffsetY,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(i.flyImage),egret.Tween.get(i.flyImage,{loop:!1}).to({scaleY:1},500).call(function(){i.flyImage.parent&&egret.Tween.removeTweens(i.flyImage),egret.Tween.get(i.flyImage,{onChange:function(){}}).wait(1e3,!1).to({x:320,y:20,scaleX:0,scaleY:0},800,egret.Ease.sineIn).call(function(){i.flyImage.parent&&(i.flyImage.parent.removeChild(i.flyImage),egret.Tween.removeTweens(i.flyImage)),e&&e.call(t)},this)},this)},e.disposeFly=function(){var e=this;e.flyImage&&e.flyImage.parent&&(e.flyImage.parent.removeChild(e.flyImage),egret.Tween.removeTweens(e.flyImage))},e}();e.FlyMyster=t,__reflect(t.prototype,"view.fly.FlyMyster")}(t=e.fly||(e.fly={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(){function e(){}return e.getGoldImage=function(){return 0==this.goldImgList.length&&this.addFlySteal(),this.goldImgList},e.addFlySteal=function(){var e,t=0;for(t=0;3>t;t++)e=core.BitmapCreator.createCurrencyByType(CurrencyEnumType.gold),this.goldImgList.push(e);for(t=0;3>t;t++)e=core.BitmapCreator.createCurrencyByType(CurrencyEnumType.rice),this.goldImgList.push(e);for(t=0;3>t;t++)e=core.BitmapCreator.createCurrencyByType(CurrencyEnumType.meat),this.goldImgList.push(e);for(t=0;3>t;t++)e=core.BitmapCreator.createCurrencyByType(CurrencyEnumType.fruit),this.goldImgList.push(e);for(t=0;3>t;t++)e=core.BitmapCreator.createCurrencyByType(CurrencyEnumType.fish),this.goldImgList.push(e)},e.flyStealInHall=function(e,t){var i,n,o,r,a,s,h=core.LayerCenter.getInstance().getLayer(LayerEnum.TIP),c=new egret.Point(400,800),l=new egret.Point(120,50),d=this,u=0;if(null==d.goldContainer)for(d.goldContainer=new egret.DisplayObjectContainer,d.goldContainer.touchEnabled=!1,d.goldContainer.touchChildren=!1,0==d.goldImgList.length&&d.addFlySteal(),n=d.goldImgList;u<n.length;u++)d.goldContainer.addChild(n[u]);for(i=d.goldContainer,n=d.goldImgList,u=0;u<n.length;u++)a=.1+.6*Math.random(),o=300*Math.random(),r=300*Math.random(),s=d.goldImgList[u],s.scaleX=a,s.scaleY=a,s.x=o,s.y=r;i.x=c.x,i.y=c.y,h.addChild(d.goldContainer);var p=function(){for(u=0;u<n.length;u++)s=n[u],s.x>0&&(s.x-=2),s.y>0&&(s.y-=2)};egret.Tween.get(i,{onChange:p,onChangeObj:h}).to({x:l.x,y:l.y},800,egret.Ease.sineIn).call(function(){i.parent&&(i.parent.removeChild(i),egret.Tween.removeTweens(i)),e&&e.call(t)})},e.goldImgList=new Array,e}();e.FlySteal=t,__reflect(t.prototype,"view.fly.FlySteal")}(t=e.fly||(e.fly={}))}(view||(view={}));var fly;!function(e){var t=function(){function e(){}return e}();e.FriendSteal=t,__reflect(t.prototype,"fly.FriendSteal");var i=function(e){function t(){var t=e.call(this)||this;return t.hasCompleteUI=!1,t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/InviteFriendSkin.exml",t}return __extends(t,e),t.prototype.uiComplete=function(){!this.hasCompleteUI,this.hasCompleteUI=!0},t.prototype.setFlyData=function(e){},t}(eui.Component);__reflect(i.prototype,"StealNumber")}(fly||(fly={}));var b=0,c=0,change=!0,friendThe=null,view;!function(e){var t;!function(t){var i=function(t){function i(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.uiComplete,e),e.skinName="resource/ui_skin/GameFriendSkin.exml",e}return __extends(i,t),i.prototype.uiComplete=function(){var e=this;friendThe=this,this.friendDown.visible=!0,this.friendUp.visible=!1,this.strangerDown.visible=!1,this.strangerUp.visible=!0,this.changeFriendShow.source="hallUI.anniu_1_png",this.showFriend.visible=!1,this.showBtn.visible=!0;var t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.loginParam,n={token:i.token};core.Http.sendGetData("getFridge",n,function(t){0==t.code?(e.userMessageWheat.text=t.data.rice+"",e.userMessageBanana.text=t.data.banana+"",e.userMessageVegetable.text=t.data.vegetable+"",e.userMessageMeat.text=t.data.meat+"",e.userMessageFish.text=t.data.fish+""):tips.Tips.tip(t.errMsg+"("+t.code+")")}),this.changeFriendShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeFriendShowClick,this),this.staff.addEventListener(egret.TouchEvent.TOUCH_TAP,this.staffClick,this),this.facility.addEventListener(egret.TouchEvent.TOUCH_TAP,this.facilityClick,this),this.menu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.menuClick,this),this.mission.addEventListener(egret.TouchEvent.TOUCH_TAP,this.missionClick,this),this.warehouse.addEventListener(egret.TouchEvent.TOUCH_TAP,this.warehouseClick,this),core.EventCenter.getInstance().addEventListener(core.DataEventID.USERINFO_DATA,this.refreshMetarial,this),this.resize(),this.stage&&this.stage.addEventListener(egret.Event.RESIZE,this.resize,this),this.refreshShow(1,c),this.friendUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.friendUpClick,this),this.strangerUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.strangerUpClick,this),this.scar2.addEventListener(eui.UIEvent.CHANGE_END,function(){1==change?e.scar2.viewport.scrollH>=e.scar2.viewport.contentWidth-e.scar2.viewport.width&&(c++,e.refreshShow(1,c)):e.scar2.viewport.scrollH>=e.scar2.viewport.contentWidth-e.scar2.viewport.width&&(c++,e.refreshShow(2,c))
},this),this.refreshMetarial()},i.prototype.staffClick=function(){Log("员工"),this.yuangong=new e.staff.Staff,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.yuangong)},i.prototype.facilityClick=function(){Log("设施"),this.sheshi=new e.facility.Facility,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.sheshi)},i.prototype.menuClick=function(){Log("菜谱"),this.caipu=new e.cook.Cook(-1),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.caipu)},i.prototype.missionClick=function(){Log("订单"),this.dingdan=new e.order.Order,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.dingdan)},i.prototype.warehouseClick=function(){Log("仓库"),this.cangku=new e.cook.WareHouse,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.cangku)},i.prototype.friendUpClick=function(){c=0,change=!0,this.friendDown.visible=!0,this.friendUp.visible=!1,this.strangerDown.visible=!1,this.strangerUp.visible=!0,this.scar2.stopAnimation(),this.huitan2.scrollH=0,Log(this.huitan2.scrollH),this.refreshShow(1,c)},i.prototype.strangerUpClick=function(){c=0,change=!1,this.friendDown.visible=!1,this.friendUp.visible=!0,this.strangerDown.visible=!0,this.strangerUp.visible=!1,this.scar2.stopAnimation(),this.huitan2.scrollH=0,this.refreshShow(2,c)},i.prototype.changeFriendShowClick=function(){1==this.showFriend.visible?(this.changeFriendShow.source="hallUI.anniu_1_png",this.showFriend.visible=!1,this.showBtn.visible=!0):(this.changeFriendShow.source="hallUI.anniu_2_png",this.showFriend.visible=!0,this.showBtn.visible=!1)},i.prototype.resize=function(){this.stage&&(this.y=this.stage.stageHeight-this.height)},i.prototype.refreshMetarial=function(){var e=this,t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=(t.userInfo.userData,t.loginParam),n={token:i.token};core.Http.sendGetData("getFridge",n,function(t){0==t.code?(e.userMessageWheat.text=t.data.rice+"",e.userMessageBanana.text=t.data.banana+"",e.userMessageVegetable.text=t.data.vegetable+"",e.userMessageMeat.text=t.data.meat+"",e.userMessageFish.text=t.data.fish+""):tips.Tips.tip(t.errMsg+"("+t.code+")")})},i.prototype.refreshShow=function(e,t){var i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.loginParam;({token:n.token,type:e,page:1,pageNum:6+6*t})},i.prototype.dispose=function(){var e=this;this.removeChildren(),this.stage&&this.stage.removeEventListener(egret.Event.RESIZE,this.resize,this),this.parent&&this.parent.removeChild(this),b=0,c=0,change=!0,this.scar2.removeEventListener(eui.UIEvent.CHANGE_END,function(){1==change?e.scar2.viewport.scrollH>=e.scar2.viewport.contentWidth-e.scar2.viewport.width&&(c++,e.refreshShow(1,c)):e.scar2.viewport.scrollH>=e.scar2.viewport.contentWidth-e.scar2.viewport.width&&(c++,e.refreshShow(2,c))},this),this.friendUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,function(){c=0,change=!0,e.friendDown.visible=!0,e.friendUp.visible=!1,e.strangerDown.visible=!1,e.strangerUp.visible=!0,e.scar2.stopAnimation(),e.huitan2.scrollH=0,Log(e.huitan2.scrollH),e.refreshShow(1,c)},this),this.strangerUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,function(){c=0,change=!1,e.friendDown.visible=!1,e.friendUp.visible=!0,e.strangerDown.visible=!0,e.strangerUp.visible=!1,e.scar2.stopAnimation(),e.huitan2.scrollH=0,e.refreshShow(2,c)},this),this.friendDown=null,this.friendUp=null,this.strangerDown=null,this.strangerUp=null,this.listFriends=null,this.dsListFriends=null,this.huitan2=null,this.scar2=null,this.userMessageBanana=null,this.userMessageFish=null,this.userMessageMeat=null,this.userMessageVegetable=null,this.userMessageWheat=null},i}(eui.Component);t.friendship=i,__reflect(i.prototype,"view.friend.friendship",["core.IComponent"]);var n=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.onComplete,t),t.skinName="resource/ui_skin/GameFriendListSkin.exml",t}return __extends(t,e),t.prototype.onComplete=function(){var e=this,t=ModelManager.getInstance().getModel(ModuleName.FRIEND),i=t.friendData;1==change?(1==i[b].isInGame?(this.inviteJoinBtn.visible=!1,this.friendIconShow.visible=!0):(this.inviteJoinBtn.visible=!0,this.friendIconShow.visible=!1),b<i.length-1&&b++):(this.inviteJoinBtn.visible=!1,this.friendIconShow.visible=!0),this.iconBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){if(Log(t.currentFriendId+"----"+i[e.itemIndex].id),t.currentFriendId==i[e.itemIndex].id)tips.Tips.tip("您已经在该好友的大厅了！");else{var n=i[e.itemIndex].id,o=i[e.itemIndex].isInGame;if(0==o)return;t.currentFriendId=n,t.currentFriendName=i[e.itemIndex].friendName,core.Controller.getInstance().startTheSame("view.hall.FriendHall")}},this)},t.prototype.canStealShow=function(e){this.canSteal.visible=!1},t.prototype.dispose=function(){var e=this;this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this);var t=ModelManager.getInstance().getModel(ModuleName.FRIEND),i=t.friendData;this.iconBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,function(){Log(e.itemIndex);var n=i[e.itemIndex].id,o=i[e.itemIndex].isInGame;0!=o&&(t.currentFriendId=n,t.currentFriendName=i[e.itemIndex].friendName,core.Controller.getInstance().startTheSame("view.hall.FriendHall"))},this),this.iconBtn=null,this.inviteJoinBtn=null,this.friendIconShow=null,this.canSteal=null},t}(eui.ItemRenderer);__reflect(n.prototype,"FriendLineLogic",["core.IComponent"])}(t=e.friend||(e.friend={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.setItem=function(e){this.friendData=e,this.createHead()},t.prototype.createHead=function(){},t.prototype.createBitmapByName=function(e,t,i){RES.getResByUrl(e,function(e){var n=new egret.Bitmap;n.texture=e,n.scaleX=n.scaleY=.5,n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,n.x=t,n.y=i,this.addChild(n)},this,RES.ResourceItem.TYPE_IMAGE)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.friendData=null},t}(core.BaseUIComponent);e.FirendItem=t,__reflect(t.prototype,"view.friend.FirendItem")}(t=e.friend||(e.friend={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(t){function i(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.uiComplete,e),e.skinName="resource/ui_skin/FunctionButtonSkin.exml",e}return __extends(i,t),i.prototype.uiComplete=function(){this.cityChangeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cityChangeBtnClick,this),this.hideRightBtns.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hideRightBtnsClick,this),this.decorateBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.decorateBtnClick,this),this.publicityBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.publicityBtnClick,this),this.rankBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rankBtnClick,this),this.downloadBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.downloadBtnClick,this),this.recommendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.recommendBtnClick,this),this.mobileBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mobileBtnClick,this)},i.prototype.cityChangeBtnClick=function(e){core.Controller.getInstance().startMoule(ModuleName.TOWN),core.Controller.getInstance().hideFriend(),this.dispose()},i.prototype.hideRightBtnsClick=function(e){var t=this;egret.Tween.removeTweens(this.hideRightBtns),egret.Tween.get(this.hideRightBtns).to({rotation:360},200),1==this.rightBtns.visible?(egret.Tween.removeTweens(this.rightBtns),egret.Tween.get(this.rightBtns,{loop:!1}).to({scaleY:0},200).call(function(){t.rightBtns.visible=!1})):(egret.Tween.removeTweens(this.rightBtns),this.rightBtns.visible=!0,this.rightBtns.scaleY=0,egret.Tween.get(this.rightBtns,{loop:!1}).to({scaleY:1},200))},i.prototype.decorateBtnClick=function(t){Log("装饰"),this.zhuangshi=new e.decorate.Decorate,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.zhuangshi)},i.prototype.publicityBtnClick=function(e){Log("宣传待开发")},i.prototype.rankBtnClick=function(e){Log("排行")},i.prototype.downloadBtnClick=function(e){Log("微端待开发")},i.prototype.recommendBtnClick=function(e){Log("推荐待开发")},i.prototype.mobileBtnClick=function(e){Log("手机待开发")},i.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this)},i}(eui.Component);t.FunctionBtn=i,__reflect(i.prototype,"view.functionBtn.FunctionBtn",["core.IComponent"])}(t=e.functionBtn||(e.functionBtn={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=null,n=null,o=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/GradeSkin.exml",t}return __extends(t,e),t.prototype.uiComplete=function(){n=this,sendgetrequest("getRankSystem",this.showmission,this),this.updataBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.updataBtnClick,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.showmission=function(e){i=e;var t=e,o=t.Rank.startLevel;this.setStartSouce(o),this.updataNum.text=t.Rank.needgold+"",t.Rank.rateLevel<=3?(this.star1.x=176,this.star1.y=178.21,this.star2.x=285,this.star2.y=137.21,this.star3.x=395,this.star3.y=178.21,this.star4.visible=!1,this.star5.visible=!1):(this.star1.x=89,this.star1.y=251.21,this.star2.x=176,this.star2.y=178.21,this.star3.x=285,this.star3.y=137.21,this.star4.visible=!0,this.star5.visible=!0);var a=[0,1,2,3,4,5,9,10,11,6,7,8];this.levelIcon.source="windowUI_json.rate_lv_"+a[t.Rank.rateLevel]+"_png",this.gradeTitle.text=""+t.Rank.name,this.isComplete.visible=!1,this.noComplete.visible=!0;var s=t.Rank.taskList.length;t.Rank.needgold<=0&&(s=0),n=this,this.dsListGrade=[];for(var h=0,c=0;s>c;c++){var l=t.Rank.taskList[c],d=l.parament.split(","),u=this.gettaskicon(l.condition,d),p=l.describe,g=l.userNum,v=Number(d[d.length-1]),f=g+"/"+v,m="windowUI_json.rate_zy_06_png";g>=v&&(m="windowUI_json.Deta_zy_02_png",h++);var y=m;this.dsListGrade.push({gradeIcon:u,gradeName:p,gradeNum:f,geadeSureBtn:y})}this.listGrade.dataProvider=new eui.ArrayCollection(this.dsListGrade),this.listGrade.itemRenderer=r,h>=s?(this.isComplete.visible=!0,this.noComplete.visible=!1):this.noComplete.text="任务（"+h+"/"+s+"）",t.Rank.needgold<=0&&(this.MaxLevelTip.visible=!0,this.noComplete.visible=!0,this.noComplete.text="已满级",this.isComplete.visible=!1)},t.prototype.updataBtnClick=function(){var e=this,t=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=t.loginParam,o=t.userInfo.userData.gold-i.Rank.needgold;if(0>o)return void tips.Tips.tip("金币不足");var r={token:n.token};core.Http.sendGetData("inproveRank",r,function(i){0==i.code?(Log("inproveRank","====",i.data),t.userInfo.userData.gold=o,core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.USERINFO_GOLD)),e.showmission(i.data),tips.Tips.tip("提升等级成功")):tips.Tips.tip(i.errMsg+"("+i.code+")")})},t.prototype.closeBtnClick=function(e){this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.gettaskicon=function(e,t){var i,n="task";return n="windowUI_json.task"+e+"_png",t.length>1?i=Number(t[0]):t=null,null!=t&&(n="windowUI_json.task"+e+"_0"+i+"_png"),4==e&&(n="Food."+jsondata.JsonConfigManager.getFoodDataById(i).foodlogo+"_png"),n},t.prototype.setStartSouce=function(e){for(var t=0;5>t;t++)this["star"+(t+1)].source="windowUI_json.rate_zy_02_png";for(var t=0;e>t;t++)this["star"+(t+1)].source="windowUI_json.rate_zy_01_png"},t}(eui.Component);t.Grade=o,__reflect(o.prototype,"view.grade.Grade",["core.IComponent"]);var r=function(t){function o(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,e.dispose,e),e.skinName="resource/ui_skin/GradeListSkin.exml",e}return __extends(o,t),o.prototype.onComplete=function(){this.geadeSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.geadeSureBtnClick,this)},o.prototype.geadeSureBtnClick=function(){Log("评级任务点击type=====",i.Rank.taskList[this.itemIndex].condition);var t=i.Rank.taskList[this.itemIndex].condition;n.dispose();var o=null;switch(t){case 8:o=1;break;case 2:case 3:case 4:case 7:case 10:o=new e.cook.Cook(-1);break;case 5:core.Controller.getInstance().startMoule(ModuleName.TOWN);break;case 6:o=new e.decorate.Decorate;break;case 9:o=new e.staff.Staff}null!=o&&(8==t?(core.Controller.getInstance().startMoule(ModuleName.TOWN),core.Controller.getInstance().hideFriend()):core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(o))},o.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this)},o}(eui.ItemRenderer);__reflect(r.prototype,"gradeLogic",["core.IComponent"])}(t=e.grade||(e.grade={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddedToStage,t),t}return __extends(t,e),t.prototype.onAddedToStage=function(e){var t=this;this.touchEnabled=!0,this.width=core.LayerCenter.getInstance().stage.stageWidth,this.height=core.LayerCenter.getInstance().stage.stageHeight,this.createDemoBg(),this.createReverseMask(200,200,50),this.mask=this.reverseMask,this.addChild(this.reverseMask),this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Log("guidtouch"),t.createReverseMask(400,400,50),t.mask=t.reverseMask},this)},t.prototype.createDemoBg=function(){this.addChild(createRect(0,0,this.width,this.height,.6))},t.prototype.createReverseMask=function(e,t,i){var n=createCircle(e,t,i,1);n.blendMode=egret.BlendMode.ERASE;var o=new egret.Sprite;o.graphics.beginFill(0,1),o.graphics.drawRect(0,0,this.width,this.height),o.graphics.endFill(),o.addChild(n);var r=new egret.RenderTexture;r.drawToTexture(o),null==this.reverseMask?this.reverseMask=new egret.Bitmap(r):this.reverseMask.texture=r},t}(egret.DisplayObjectContainer);e.Guid=t,__reflect(t.prototype,"view.guid.Guid")}(t=e.guid||(e.guid={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(t){function i(){var e=t.call(this)||this;return e.rad=46,e.speed=0,e.angelStart=0,e.init(),e}return __extends(i,t),i.prototype.init=function(){this.frameFace=core.BitmapCreator.createBitmap("hallUI.Talk_png"),this.frameFace.anchorOffsetX=36,this.frameFace.anchorOffsetY=36,this.addChildAt(this.frameFace,0),this.sleepImage=core.BitmapCreator.createBitmap("hallUI.Talk_01_png"),this.sleepImage.x=-30,this.sleepImage.y=-10,this.addChildAt(this.sleepImage,2),this.shape=new egret.Shape,this.shape.anchorOffsetX=46,this.shape.anchorOffsetY=46,this.addChildAt(this.shape,3),this.clockFace=core.BitmapCreator.createBitmap("hallUI.Talk_png"),this.clockFace.anchorOffsetX=36,this.clockFace.anchorOffsetY=36,this.addChildAt(this.clockFace,4),this.timeTxt=core.TextUtils.createLeftText(16,76610,"Arial",!0),this.timeTxt.stroke=2,this.timeTxt.strokeColor=16777215,this.timeTxt.width=this.sleepImage.width,this.timeTxt.anchorOffsetX=this.sleepImage.width/2,this.timeTxt.textAlign="center",this.timeTxt.x=2,this.timeTxt.y=20,this.addChildAt(this.timeTxt,5)},i.prototype.showData=function(e){null==e&&(e=new data.MakeFoodState),this.makeFoodState=e,this.refreshClock()},i.prototype.removeStunt=function(){this.stunt&&(this.stunt.stop(),this.stunt.parent&&this.stunt.parent.removeChild(this.stunt))},i.prototype.addStunt=function(){null==this.stunt&&(this.stunt=core.StuntManager.getInstance().createStunt(3),this.stunt.y=-60,this.stunt.x=-10),this.bar.addChild(this.stunt),this.stunt.gotoAndPlay(1,-1)},i.prototype.refreshClock=function(){var e=this,t=this.makeFoodState;t.leftTime<=0&&(t.leftTime=0),t.leftTime>0&&t.foodID>0&&(t.status=1),this.totalTime=t.totalTime/1e3,this.leftTime=t.leftTime/1e3;var i=t.foodID,n=this.totalTime,o=this.leftTime,r=t.status;if(this.touchEnabled=!0,0==r)this.foodImage&&this.foodImage.parent&&this.foodImage.parent.removeChild(this.foodImage),core.EnterFrameManager.unregister(this),this.shape&&(this.shape.graphics.clear(),this.shape.parent&&this.shape.parent.removeChild(this.shape)),this.clockFace&&this.clockFace.parent&&this.clockFace.parent.removeChild(this.clockFace),this.sleepImage&&this.addChildAt(this.sleepImage,2),this.arrow&&this.arrow.parent&&this.arrow.parent.removeChild(this.arrow),this.remoceHaverstEvt(),this.parent.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openmenu,this),this.removeStunt();else if(1==r){if(this.angelStart=-90+Math.floor(360*((n-o)/n)),this.speed=360/(20*n),this.addFood(i),this.leftTime>0){core.EnterFrameManager.register(this),this.addChildAt(this.shape,3),this.addChildAt(this.clockFace,4),this.shape.mask=this.clockFace,this.timeTxt.text=core.TextUtils.getCookTimeFormatStrInTown(o),this.addChildAt(this.timeTxt,5);var a=setInterval(function(){o--,0>=o?(clearInterval(a),e.timeTxt.text=""):(e.timeTxt.text=core.TextUtils.getCookTimeFormatStrInTown(o),e.addChildAt(e.timeTxt,5))},1e3)}else this.timeTxt.text="",this.shape&&this.shape.parent&&this.shape.parent.removeChild(this.shape),this.clockFace&&this.clockFace.parent&&this.clockFace.parent.removeChild(this.clockFace),core.EnterFrameManager.unregister(this);this.sleepImage&&this.sleepImage.parent&&this.sleepImage.parent.removeChild(this.sleepImage),this.remoceHaverstEvt(),this.arrow&&this.arrow.parent&&this.arrow.parent.removeChild(this.arrow),this.addStunt(),this.parent.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openmenu,this)}else 2==r&&(this.addFood(i),core.EnterFrameManager.unregister(this),this.shape&&(this.shape.graphics.clear(),this.shape.parent&&this.shape.parent.removeChild(this.shape)),this.clockFace&&this.clockFace.parent&&this.clockFace.parent.removeChild(this.clockFace),this.sleepImage&&this.sleepImage.parent&&this.sleepImage.parent.removeChild(this.sleepImage),this.addHaverstEvt(),this.parent.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openmenu,this),this.removeStunt())},i.prototype.openmenu=function(t){Log("evt====",t);var i=new e.cook.Cook(this.makeFoodState.index);core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(i)},i.prototype.addFood=function(e){this.foodImage&&this.foodImage.parent&&this.foodImage.parent.removeChild(this.foodImage),this.foodImage=core.BitmapCreator.createFoodBitmapById(e),this.foodImage.width=60,this.foodImage.height=60,this.foodImage.anchorOffsetX=30,this.foodImage.anchorOffsetY=30,this.addChildAt(this.foodImage,2)},i.prototype.addHaverstEvt=function(){null==this.arrow&&(this.arrow=core.BitmapCreator.createBitmap("hallUI.Talk_02_png"),this.arrow.x=-16,this.arrow.y=-65),this.addChildAt(this.arrow,6);var e=this.arrow.y,t=e-8;egret.Tween.get(this.arrow,{loop:!0}).to({y:t},500).to({y:e},500),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.haverstClick,this)},i.prototype.remoceHaverstEvt=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.haverstClick,this)},i.prototype.haverstClick=function(t){var i=this;egret.Tween.removeTweens(this.foodImage);var n=ModelManager.getInstance().getModel(ModuleName.LOGIN),o=n.loginParam,r={token:o.token,foodID:this.makeFoodState.foodID,index:this.makeFoodState.index};core.Http.sendPostData("stockFood",r,function(t){if(0==t.code){1==t.data.critQuality&&(i.window=new e.window.Window(2,t,i.makeFoodState.foodID,t.data.quality),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(i.window));var n=new data.MakeFoodState;CopyUtil.copyData(t.data.MakeFoodState,n);t.data.currentNum,t.data.stockLimit;i.makeFoodState.status=0,i.arrow&&i.arrow.parent&&i.arrow.parent.removeChild(i.arrow),i.remoceHaverstEvt(),i.playFoodBoom(n.foodID),0==t.data.skillStatus||(1==t.data.skillStatus?(i.window=new e.window.Window(1,t,i.makeFoodState.foodID,t.data.reward),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(i.window)):2==t.data.skillStatus?(i.window=new e.window.Window(15,t,i.makeFoodState.foodID,t.data.reward),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(i.window)):3==t.data.skillStatus?(i.window=new e.window.Window(17,t,i.makeFoodState.foodID,t.data.reward),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(i.window)):4==t.data.skillStatus?(i.window=new e.window.Window(16,t,i.makeFoodState.foodID,t.data.reward),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(i.window)):5==t.data.skillStatus&&tips.Tips.tip("品质加成"))}else 1004==t.code?(i.window=new e.window.Window(6,t,t.data,t.data),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(i.window)):tips.Tips.tip(t.errMsg+"("+t.code+")")})},i.prototype.playFoodBoom=function(e){function t(){o.removeEventListener(egret.Event.COMPLETE,t,this),o.parent&&o.parent.removeChild(o)}var i=this.foodImage,n=this,o=core.StuntManager.getInstance().createStunt(6);if(o.x=-150,o.y=-150,this.addChild(o),o.gotoAndPlay(1,1),o.addEventListener(egret.Event.COMPLETE,t,this),i){var r=i.y-150;egret.Tween.get(this.foodImage,{loop:!1}).to({y:r,alpha:.5},1e3).call(function(){n.refreshClock(),egret.Tween.removeTweens(i),i.alpha=1,core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.FLY_FOOD,e))},n)}},i.prototype.enterFrame=function(){var e=this.angelStart;if(e>=270)return this.makeFoodState.status=2,this.makeFoodState.leftTime=0,void this.refreshClock();e%=360;var t=this,i=t.rad;t.shape.graphics.clear(),t.shape.graphics.lineStyle(1,7586799,.1),t.shape.graphics.moveTo(i,i),t.shape.graphics.lineTo(i,0),t.shape.graphics.beginFill(7586799,.5),t.shape.graphics.drawArc(i,i,i,e*Math.PI/180,270*Math.PI/180,!1),t.shape.graphics.lineTo(i,i),t.shape.graphics.endFill(),this.angelStart+=this.speed},i.prototype.displaySleep=function(){this.foodImage&&this.foodImage.parent&&this.foodImage.parent.removeChild(this.foodImage)},i.prototype.hide=function(){core.EnterFrameManager.unregister(this),this.parent&&this.parent.removeChild(this)},i.prototype.dispose=function(){this.remoceHaverstEvt(),this.foodImage&&egret.Tween.removeTweens(this.foodImage),this.arrow&&egret.Tween.removeTweens(this.arrow),core.EnterFrameManager.unregister(this),this.clockFace.parent&&(this.clockFace.parent.removeChild(this.clockFace),this.clockFace=null),this.shape=null,this.makeFoodState=null,this.foodImage=null,this.frameFace=null,this.arrow=null,this.removeStunt(),this.bar=null,this.stunt=null,this.removeChildren()},i}(core.BaseUIComponent);t.Clock=i,__reflect(i.prototype,"view.hall.Clock",["core.IEnterFrame"])}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return i.dinnerLevel=t,i.addEventListener(eui.UIEvent.COMPLETE,i.uiComplete,i),i.skinName="resource/ui_skin/dinner.exml",i}return __extends(t,e),t.prototype.uiComplete=function(){var e="resource/assets/dinner/"+this.dinnerLevel+".png";this.dinnerImage.source=e},t.prototype.dispose=function(){this.dinnerImage=null,this.removeChildren()},t}(eui.Component);e.Dinner=t,__reflect(t.prototype,"view.hall.Dinner",["core.IComponent"])}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(i){function n(){var e=i.call(this)||this;return e.mapLevel=1,e.init(),e}return __extends(n,i),n.prototype.init=function(){this.map=new t.HallMap,this.addChild(this.map),this.userMessage=new e.userMessage.UserMessage,core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).addChild(this.userMessage);ModelManager.getInstance().getModel(ModuleName.LOGIN);this.cfgEvt(),this.getUserData(),this.functionBtn=new e.functionBtn.FunctionBtn,core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).addChild(this.functionBtn)},n.prototype.getUserData=function(){var e=ModelManager.getInstance().getModel(ModuleName.LOGIN),t=e.loginParam,i={token:t.token},n=this;core.Http.sendGetData("getHall",i,function(t){0==t.code?(Log(t.data),e.receiveUserInfo(t.data),n.setData(e.userInfo)):tips.Tips.tip(t.errMsg+"("+t.code+")")})},n.prototype.setData=function(t){ModelManager.getInstance().getModel(ModuleName.LOGIN);null==this.userMessage?(this.userMessage=new e.userMessage.UserMessage,core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).addChild(this.userMessage)):this.userMessage.userMessageComplete(),this.map.createActive(t)},n.prototype.cfgEvt=function(){var e=core.EventCenter.getInstance();e.addEventListener(core.DataEventID.ROLE_GOTO_MAKE_FOOD,this.roleStartMakeFood,this)},n.prototype.show=function(){i.prototype.show.call(this),this.resize(),this.stage&&this.stage.addEventListener(egret.Event.RESIZE,this.resize,this)},n.prototype.resize=function(){this.stage},n.prototype.removeEvt=function(){var e=core.EventCenter.getInstance();e.removeEventListener(core.DataEventID.ROLE_GOTO_MAKE_FOOD,this.roleStartMakeFood,this),this.stage&&this.stage.removeEventListener(egret.Event.RESIZE,this.resize,this)},n.prototype.roleStartMakeFood=function(t){var i=t.messageData;this.makeFood=new e.cook.Trade,this.makeFood.show(i)},n.prototype.showMakeFood=function(e){this.mapLevel>=6||(this.mapLevel++,this.map.createOneChange(this.mapLevel))},n.prototype.stopClick=function(e){core.Controller.getInstance().friendList;e?core.Controller.getInstance().showFriend():core.Controller.getInstance().hideFriend()},n.prototype.dispose=function(){i.prototype.dispose.call(this),this.removeEvt(),this.map&&this.map.dispose(),this.map=null,this.hallData=null,this.userMessage=null,this.hallReward&&this.hallReward.dispose(),this.hallReward=null,this.makeFood&&this.makeFood.dispose(),this.functionBtn.dispose(),this.functionBtn=null,this.removeChildren()},n}(core.ModuleComponent);t.Hall=i,__reflect(i.prototype,"view.hall.Hall")}(t=e.hall||(e.hall={}))}(view||(view={}));var core;!function(e){var t=function(){function t(){this._actions=new Array,e.EnterFrameManager.register(this)}return t.prototype.act=function(e){for(var t,i,n=this._actions.length-1;n>=0;){if(t=this._actions[n],t.canReplace(e)){this._actions[n]=e,t.giveup(),i=!0;break}n--}i||this._actions.push(e)},t.prototype.enterFrame=function(){if(this._actions.length>0){var e=this._actions[0];e.isFinished()?this._actions.shift():e.execute()}},t.prototype.clearActions=function(){for(var e,t;t<this._actions.length;)e=this._actions[t],e.giveup(),t++;this._actions=new Array},t.prototype.dispose=function(){this.clearActions(),e.EnterFrameManager.unregister(this)},t}();e.ActionManager=t,__reflect(t.prototype,"core.ActionManager",["core.IEnterFrame"])}(core||(core={}));var view;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.createBar=function(e){this.barImg=core.BitmapCreator.createBitmap("Decode_json."+e+"_png"),this.addChild(this.barImg)},t.prototype.getBar=function(){return this.barImg},t.prototype.changeArticleImg=function(e){var t=this.barImg;t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x=t.x+t.width/2,t.y=t.y+t.height/2,egret.Tween.get(t,{loop:!1}).to({scaleX:0,scaleY:0},750).call(function(){t.texture=RES.getRes("Decode_json."+e.resourceid+"_png"),egret.Tween.get(t,{loop:!1}).to({scaleX:1.3,scaleY:1.3},100).to({scaleX:1,scaleY:1},250).call(function(){t.anchorOffsetX=0,t.anchorOffsetY=0,t.x=t.x-t.width/2,t.y=t.y-t.height/2,egret.Tween.removeTweens(t)},this)},this)},t.prototype.cfgEvt=function(){},t.prototype.removeEvt=function(){},t.prototype.dispose=function(){this.removeEvt(),this.barImg&&this.barImg.parent&&(this.barImg.parent.removeChild(this.barImg),this.barImg=null),this.removeChildren(),this.parent&&this.parent.removeChild(this)},t}(core.Component);e.HallBar=t,__reflect(t.prototype,"view.hall.HallBar")}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(i){function n(){var e=i.call(this)||this;return e.birdIn=!0,e.bowWaitNumber=0,e.longTimeCount=0,e.articleControl=null,e.cfgEvt(),e}return __extends(n,i),n.prototype.uiComplete=function(){i.prototype.uiComplete.call(this),this.initMap()},n.prototype.initMap=function(){this.articleList=new Array,this.AllarticleList=new Array,this.roleList=new Array,this.waitingRoleList=new Array,this.barList=new Array,this.tableList=new Array,this.chairFrontList=new Array,this.waitorList=new Array,this.chefList=new Array,this.birdList=new Array,this.trophyList=new Array},n.prototype.cfgEvt=function(){var e=core.EventCenter.getInstance();e.addEventListener(core.DataEventID.MAKE_FOOD_REFUSE,this.refuseMake,this),e.addEventListener(core.DataEventID.NEW_ROLE_ENTER,this.getNewRoleEnter,this),e.addEventListener(core.DataEventID.SALE_FOOD_SUCCESS,this.saleSuccess,this),e.addEventListener(core.DataEventID.MAKE_FOOD_START,this.startMakeFood,this),e.addEventListener(core.DataEventID.FLY_FOOD,this.flyFood,this),e.addEventListener(core.DataEventID.HIRE_SUCCESS,this.hireSuccess,this),e.addEventListener(core.DataEventID.FIRE_SUCCESS,this.fireSuccess,this),core.EventCenter.getInstance().addEventListener(core.DataEventID.UPDATE_ARTICLE_INHALL,this.updateArticle,this)},n.prototype.removeEvt=function(){var e=core.EventCenter.getInstance();e.removeEventListener(core.DataEventID.MAKE_FOOD_REFUSE,this.refuseMake,this),e.removeEventListener(core.DataEventID.NEW_ROLE_ENTER,this.getNewRoleEnter,this),e.removeEventListener(core.DataEventID.SALE_FOOD_SUCCESS,this.saleSuccess,this),e.removeEventListener(core.DataEventID.MAKE_FOOD_START,this.startMakeFood,this),e.removeEventListener(core.DataEventID.FLY_FOOD,this.flyFood,this),e.removeEventListener(core.DataEventID.HIRE_SUCCESS,this.hireSuccess,this),e.removeEventListener(core.DataEventID.FIRE_SUCCESS,this.fireSuccess,this),core.EventCenter.getInstance().removeEventListener(core.DataEventID.UPDATE_ARTICLE_INHALL,this.updateArticle,this)},n.prototype.hireSuccess=function(e){var t=e.messageData.employId,i=e.messageData.type;this.requestEmployee(0,t,i)},n.prototype.fireSuccess=function(e){var t=e.messageData.employId,i=e.messageData.type;this.requestEmployee(1,t,i)},n.prototype.requestEmployee=function(e,t,i){var n=ModelManager.getInstance().getModel(ModuleName.LOGIN),o=n.loginParam,r={token:o.token},a=this;core.Http.sendGetData("getStaff",r,function(o){if(0==o.code){var r=new data.StaffAll;r.copyData(o.data),n.userInfo.staffAll=r,1==i?0==e?a.createOneChefHireEnter(t,r):1==e&&a.createOneFireChef(t):0==e?a.createOneWaitorEnter(t,r):1==e&&a.createOneFireWaitor(t)}else tips.Tips.tip(o.errMsg+"("+o.code+")")})},n.prototype.createOneWaitorEnter=function(e,t){for(var i,n=(this.waitorList,0),o=0;n<t.asherList.length;n++)if(e==t.asherList[n].id){o=t.asherList[n].index,i=t.asherList[n];break}if(null==i)return void tips.Tips.tip("没有找到迎宾置 HallMap ->createOneWaitorEnter() ");var r=core.RoleManager.getInstance().createWaitor(i);r.playAction("DR");var a=jsondata.JsonDataManager_copy.getInstance().getWaitorEnterRoad(i.index);r.x=a[0].start.x,r.y=a[0].start.y,r.sectionType="enter",r.currentSection=a,this.activeLayer.addChild(r),this.swapRoleDepth(r),this.createWaitorRoad(r)},n.prototype.createOneFireWaitor=function(e){for(var t,i=this.waitorList,n=this,o=0;o<i.length;o++)if(t=i[o],t.employeeData.id==e){var r=jsondata.JsonDataManager_copy.getInstance().getWaitorOutRoad(t.employeeData.index);t.sectionType="out",t.currentSection=r,t.playDialog(1,function(){n.createWaitorRoad(t)})}},n.prototype.createOneChefHireEnter=function(e,t){for(var i,n=this,o=(n.chefList,0),r=0;o<t.chefList.length;o++)if(e==t.chefList[o].id){r=t.chefList[o].index,i=t.chefList[o];break}if(null==i)return void tips.Tips.tip("没有找到厨师位置 HallMap ->createOneChefExchanged() ");var a=null,s=ModelManager.getInstance().getModel(ModuleName.LOGIN),h=s.loginParam,c={token:h.token};core.Http.sendGetData("getHall",c,function(e){if(0==e.code){Log(e.data),s.receiveUserInfo(e.data);var t=s.userInfo.restaurant.makeFoodState;Log("");for(var o=0;o<t.length;o++)if(t[o].index==i.index){a=t[o];
break}n.createOneChefEnter(i,a)}else tips.Tips.tip(e.errMsg+"("+e.code+")")})},n.prototype.createOneChefEnter=function(e,t){var i=this,n=(e.index,core.RoleManager.getInstance().createChef("DR",e.index)),o=ModelManager.getInstance().getModel(ModuleName.LOGIN),r=o.userInfo.restaurant.area,a=jsondata.JsonDataManager_copy.getInstance().getBarPositionByIndex(r,e.index);if(null==a)return void tips.Tips.tip("没有找到厨师位置");var s=this.barList[e.index],h=new egret.Point(a.x+100,a.y-10),c=jsondata.JsonDataManager_copy.getInstance().getChefEnterRoadByMapLevelAndIndex(h,r,e.index);n.x=c[0].start.x,n.y=c[0].start.y,n.setData(e,t,s),i.chefList.push(n),i.activeLayer.addChild(n),i.swapRoleDepth(n),n.sectionType="enter",n.currentSection=c,i.createChefRode(n)},n.prototype.createOneFireChef=function(e){for(var t,i=this.chefList,n=0,o=this;n<i.length;n++)if(t=i[n],null!=t.data&&t.data.id==e){var r=ModelManager.getInstance().getModel(ModuleName.LOGIN),a=r.userInfo.restaurant.area,s=new egret.Point(t.x,t.y),h=jsondata.JsonDataManager_copy.getInstance().getChefOutRoadByMapLevelAndIndex(s,a,t.data.index);return t.sectionType="out",t.currentSection=h,void t.playDialog(1,function(){o.createChefRode(t)})}},n.prototype.flyFood=function(e){e.messageData},n.prototype.startMakeFood=function(e){var t=e.messageData,i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.userInfo.restaurant.makeFoodState,o=0;for(o=0;o<n.length;o++)n[o].index==t.chef.index&&(n[o].status=t.chef.status,n[o].foodID=t.chef.foodID,n[o].totalTime=t.chef.totalTime,n[o].leftTime=t.chef.leftTime);var r;for(o=0;o<this.chefList.length;o++)if(r=this.chefList[o],r.index==t.chef.index){r.makeFoodState=t.chef,r.updateDownTime();break}},n.prototype.refuseMake=function(e){var t=e.messageData.refuseRes,i=e.messageData.role,n=t.nextRole;this.createOneHarvest(i,n,2)},n.prototype.saleSuccess=function(e){var t=e.messageData.saleRes,i=e.messageData.role,n=t.nextRole;this.createOneHarvest(i,n)},n.prototype.updateBarData=function(e){var t,i=this.chefList,n=0;for(n=0;n<i.length;n++)t=i[n],t.updateDownTime()},n.prototype.createOneHarvest=function(e,t,i){void 0===i&&(i=1);var n=this.roleList.indexOf(e),o=e.seatNumber;if(n>=0){this.roleList.splice(n,1),e.removeFood();var r,a=(e.getRoleData(),ModelManager.getInstance().getModel(ModuleName.LOGIN)),s=a.userInfo.restaurant.area;r=jsondata.JsonDataManager_copy.getInstance().getReturnSectionByIndex(s,o,e.x,e.y),e.currentSection=r,this.createRoleRode(e),null!=t&&this.createNextRole(o,t)}},n.prototype.createNextRole=function(e,t){this.createRole(t,this.waitingRoleList.length+1);var i=this.waitingRoleList[0];i.seatNumber=e,this.createRoleEnter(i);for(var n,o=0;o<this.waitingRoleList.length;o++)n=this.waitingRoleList[o],n.sectionType="startWatingMove",n.currentSection=jsondata.JsonDataManager_copy.getInstance().createWatingMoveSection(o+1,n.x,n.y),this.createRoleRode(n)},n.prototype.createActive=function(e){var t=this,i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.userInfo.restaurant.area;this.userInfo=e,this.createMapFlower(n);var o=i.userInfo.roleList,r=o.length,a=test.TestDataCenter.getStaticArticle(i.userInfo.article),s=a.length;e.restaurant.makeFoodState,this.userInfo.staffAll.chefList;this.createSomeBirds();var h=e.restaurant.getBarNumberByLevel(),c=0;for(c=0;s>c;c++)t.createArticle(a[c]);for(c=0;h>c;c++)t.createBar(c,this.userInfo.staffAll.findChefData(c));this.createLogo();var l=i.loginParam.isFirst;if(l){for(c=0;r>c;c++)t.createRole(o[c],c+1);i.loginParam.isFirst=!1,r>0&&this.createEnterRoleByHallLevel()}else this.createHasEnterRole(o);var d=i.userInfo.staffAll.asherList,u=i.userInfo.restaurant.getWaitorNumber();u>d.length&&(u=d.length);var p;for(c=0;u>c;c++)p=d[c],this.createWaitor(p);this.createTrophy()},n.prototype.createTrophy=function(){for(var e,t=[{x:1240,y:112},{x:1113,y:57},{x:1349,y:159}],i=0;i<t.length;i++)e=core.BitmapCreator.createBitmap("hallUI.Trophy_0"+(i+1)+"_png"),e.x=t[i].x,e.y=t[i].y,this.activeLayer.addChildAt(e,3+i),this.trophyList.push(e)},n.prototype.createSomeBirds=function(){for(var e,t=jsondata.JsonDataManager_copy.getInstance().getBirdPosition(),i=0;i<t.length;i++)e=core.RoleManager.getInstance().createBird(),e.x=t[i].x,e.y=t[i].y,this.flySkyLayer.addChild(e),this.birdList.push(e);this.startBirdAction()},n.prototype.startBirdAction=function(){var e=this;e.flyTime=setInterval(function(){e.birdIn?(e.birdsFly(),e.birdIn=!1):(e.birdsEnter(),e.birdIn=!0)},1e4)},n.prototype.birdsEnter=function(){for(var e=jsondata.JsonDataManager_copy.getInstance().getBirdPosition(),t=0;t<this.birdList.length;t++)this.birdList[t].rotation=0,this.flySkyLayer.addChild(this.birdList[t]),this.birdList[t].back(e[t].x,e[t].y)},n.prototype.birdsFly=function(){for(var e=0;e<this.birdList.length;e++)this.birdList[e].fly()},n.prototype.createWaitor=function(e){var t,i;t=jsondata.JsonDataManager_copy.getInstance().getWaitorPosition(e.index),i=core.RoleManager.getInstance().createWaitor(e),i.x=t.x,i.y=t.y,this.activeLayer.addChild(i),i.showwaitor(),this.swapRoleDepth(i),this.waitorList.push(i)},n.prototype.createHasEnterRole=function(e){var t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.userInfo.restaurant.area,n=t.userInfo.restaurant.getTableNumberByLevel(),o=0,r=0;for(o=0;o<e.length;o++){var a=e[o];if(n>o){var s=void 0,h=void 0;s=core.RoleManager.getInstance().createRole(a,"DL"),s.seatNumber=o+1,h=jsondata.JsonDataManager_copy.getInstance().getSeatPositionBySeatNumber(i,s.seatNumber),s.sectionType="hall",s.setPosition(h.x,h.y),this.activeLayer.addChild(s),this.swapRoleDepth(s),this.roleList.push(s),3008!=a.id&&s.stopActionInSence(),this.playRoleSitdown(s)}else r++,this.createRole(a,r)}},n.prototype.createEnterRoleByHallLevel=function(){var e=this;if(null!=e.waitingRoleList){var t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=(this.waitingRoleList.length,t.userInfo.restaurant.getTableNumberByLevel());e.waitingTime=setTimeout(function(){clearTimeout(e.waitingTime);for(var t,n=0;i>n&&(t=e.waitingRoleList.shift(),null!=t);)t.seatNumber=n+1,e.createRoleEnter(t),n++;for(n=0;n<e.waitingRoleList.length;n++)t=e.waitingRoleList[n],t.sectionType="startWatingMove",t.currentSection=jsondata.JsonDataManager_copy.getInstance().createWatingMoveSection(n+1,t.x,t.y),e.createRoleRode(t)},2e3)}},n.prototype.createRoleEnter=function(e){var t=this;t.removeRoleFromWaiting(e);var i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.userInfo.restaurant.area,o=jsondata.JsonDataManager_copy.getInstance().getEnterSectionByIndex(n,e.seatNumber,e.x,e.y);e.currentSection=o,t.createRoleRode(e),t.bowWaitNumber=setTimeout(function(){if(null==t.waitorList)return void clearTimeout(t.bowWaitNumber);for(var e=0;e<t.waitorList.length;++e)t.waitorList[e].playBow()},2e3)},n.prototype.createBar=function(t,i){if(!(t>4)){var n=new e.hall.HallBar,o=ModelManager.getInstance().getModel(ModuleName.LOGIN),r=o.userInfo.restaurant.area,a=jsondata.JsonDataManager_copy.getInstance().getBarPositionByIndex(r,t);n.x=a.x,n.y=a.y;var s=o.userInfo.article[0].model;if(n.createBar(s),this.barList.push(n),this.activeLayer.addChild(n),this.swapBarDepth(n),!(t>0)||null!=i&&null!=i.id){for(var h,c=o.userInfo.restaurant.makeFoodState,l=0;l<c.length&&(h=c[l],h.index!=t);l++);var d=core.RoleManager.getInstance().createChef("DL",t);d.x=a.x+100,d.y=a.y-10,d.sectionType="out",d.setData(i,h,n),this.chefList.push(d),this.activeLayer.addChild(d),this.swapRoleDepth(d),d.playStand()}}},n.prototype.createRole=function(e,t){Log("roledata=====",e);var i,n;i=core.RoleManager.getInstance().createRole(e,"UL"),i.waitingNumber=t,n=jsondata.JsonDataManager_copy.getInstance().getWatingPosition(i.waitingNumber),i.sectionType="waiting",i.setPosition(n.x,n.y),this.activeLayer.addChild(i),i.playAction("UL"),3008!=e.id&&i.stopActionInSence(),this.swapRoleDepth(i),this.waitingRoleList.push(i)},n.prototype.getNewRoleEnter=function(e){},n.prototype.createArticle=function(e){var t=e.articletype,i=this;if(t!=ArticleType.ZAOTAI){var n,o,r=ModelManager.getInstance().getModel(ModuleName.LOGIN),a=r.userInfo.restaurant.area,s=jsondata.JsonDataManager_copy.getInstance().getArticlePostionByPositionIdx(a,e.articletype),h=0;if(t==ArticleType.ZHAOPAI)n=core.BitmapCreator.createDecode(e.resourceid),n.x=s.x,n.y=s.y,i.createShadom(s.x,s.y,n.height,1),i.activeLayer.addChild(n),i.articleList.push(n),i.swapStandArticleDepth(n),i.AllarticleList.push(this.getarticdata(t,n)),n=core.BitmapCreator.createDecode(e.resourceid),n.x=s.x1,n.y=s.y1,i.createShadom(s.x1,s.y1,n.height,2),i.activeLayer.addChild(n),i.articleList.push(n),i.swapStandArticleDepth(n),i.AllarticleList.push(this.getarticdata(t,n));else if(t==ArticleType.ZHUOZI){for(o=s.position,h=0;h<o.length;h++)n=core.BitmapCreator.createDecode(e.resourceid),n.x=o[h].x,n.y=o[h].y,i.activeLayer.addChild(n),i.swapStandArticleDepth(n),i.articleList.push(n),i.tableList.push(n),i.AllarticleList.push(this.getarticdata(t,n));var c="hallUI.tableShadom_png";for(h=0;h<o.length;h++){var l=core.BitmapCreator.createBitmap(c);l.x=o[h].x+5,l.y=o[h].y+n.height-l.height+3,i.activeLayer.addChildAt(l,h+2)}}else if(t==ArticleType.YIZI){var d=e.resourceid.split(","),u=d[0];d[1];for(o=s.position_front,h=0;h<o.length;h++)n=core.BitmapCreator.createDecode(u),n.x=o[h].x,n.y=o[h].y,i.activeLayer.addChild(n),i.swapStandArticleDepth(n),i.articleList.push(n),i.chairFrontList.push(n),i.AllarticleList.push(this.getarticdata(t,n));var c="hallUI.chairShadom_png";for(h=0;h<o.length;h++){var l=core.BitmapCreator.createBitmap(c);l.x=o[h].x+n.width-l.width-8,l.y=o[h].y+n.height-l.height-3,i.activeLayer.addChildAt(l,h+2)}}else n=core.BitmapCreator.createDecode(e.resourceid),n.x=s.x,n.y=s.y,i.activeLayer.addChild(n),i.swapDepth(n),i.articleList.push(n),i.AllarticleList.push(this.getarticdata(t,n))}},n.prototype.getarticdata=function(e,t){var i={type:e,img:t};return i},n.prototype.createShadom=function(e,t,i,n){var o=core.BitmapCreator.getArticleShadom(n);o.x=e+5,o.y=t+i-o.height/2-20,this.activeLayer.addChildAt(o,1)},n.prototype.createRoleRode=function(e){this.createOneSection(e,this.createOneSection)},n.prototype.createOneSection=function(e,t){var i=e.currentSection;if(0==i.length)return void("hall"==e.sectionType?(e.stopAction(),this.removeRoleFromHallList(e),this.removeRoleFromWaiting(e),e.dispose()):"startWatingMove"==e.sectionType?(e.sectionType="waiting",e.stopActionInSence()):"waiting"==e.sectionType&&(this.addRoleToHallList(e),e.sectionType="hall",e.playAction("DL"),e.stopAction(),this.playRoleSitdown(e)));var n=i.shift(),o=core.MapCaculator.caculateOritation(n);e.playAction(o);var r=new comm.action.MoveAction(e,n.start,n.end,n.speed,t,this);e.playMoveAction(r)},n.prototype.createChefRode=function(e){this.createOneChefSection(e,this.createChefRode)},n.prototype.createOneChefSection=function(e,t){var i=e.currentSection;if(0==i.length)return void("out"==e.sectionType?(e.stopAction(),this.removeRoleFromChefList(e),e.dispose()):"enter"==e.sectionType&&(e.playAction("DL"),e.stopAction(),e.sectionType="out",this.addRoleToChefList(e),e.playStand()));var n=i.shift(),o=core.MapCaculator.caculateOritation(n);e.playAction(o);var r=new comm.action.MoveAction(e,n.start,n.end,n.speed,t,this);e.playMoveAction(r)},n.prototype.createWaitorRoad=function(e){this.createOneWaitorSection(e,this.createOneWaitorSection)},n.prototype.createOneWaitorSection=function(e,t){var i=e.currentSection;if(0==i.length)return void("out"==e.sectionType?(e.stopAction(),this.removeWaitorFromWaitorList(e),e.dispose()):"enter"==e.sectionType&&(e.stopAction(),e.playStand(),e.sectionType="out",this.addOneToWaitorList(e)));var n=i.shift(),o=core.MapCaculator.caculateOritation(n);e.playAction(o);var r=new comm.action.MoveAction(e,n.start,n.end,n.speed,t,this);e.playMoveAction(r)},n.prototype.playRoleSitdown=function(e){var t=this,i=e.seatNumber,n=t.chairFrontList[i-1],o=t.tableList[i-1],r=t.activeLayer.getChildIndex(n),a=t.activeLayer.getChildIndex(o),s=t.activeLayer.getChildIndex(e),h=r,c=s,l=a;h>c&&(h=s,c=r),c>l&&(c=a,l=s),n&&t.activeLayer.setChildIndex(n,h),t.activeLayer.setChildIndex(e,c),o&&t.activeLayer.setChildIndex(o,l),e.playSitDown()},n.prototype.removeWaitorFromWaitorList=function(e){var t=this.waitorList.indexOf(e);t>-1&&this.waitorList.splice(t,1)},n.prototype.addOneToWaitorList=function(e){var t=this.waitorList.indexOf(e);0>t&&this.waitorList.push(e)},n.prototype.removeRoleFromChefList=function(e){var t=this.chefList.indexOf(e);t>-1&&this.chefList.splice(t,1)},n.prototype.addRoleToChefList=function(e){var t=this.chefList.indexOf(e);0>t&&this.chefList.push(e)},n.prototype.removeRoleFromWaiting=function(e){var t=this.waitingRoleList.indexOf(e);t>-1&&this.waitingRoleList.splice(t,1)},n.prototype.addOneRoleToWaiting=function(e){var t=this.waitingRoleList.indexOf(e);0>t&&this.waitingRoleList.push(e)},n.prototype.removeRoleFromHallList=function(e){var t=this.roleList.indexOf(e);t>-1&&this.roleList.splice(t,1)},n.prototype.addRoleToHallList=function(e){var t=this.roleList.indexOf(e);0>t&&this.roleList.push(e)},n.prototype.createLogo=function(){var e=ModelManager.getInstance().getModel(ModuleName.LOGIN),t=e.userInfo.restaurant.area,i=core.BitmapCreator.createBitmap("hallUI.logo_png"),n=jsondata.JsonDataManager_copy.getInstance().getLogoPositionByLevel(t);i.x=n.x,i.y=n.y,this.activeLayer.addChildAt(i,0)},n.prototype.updateArticle=function(e){var t=e.messageData,i=this.AllarticleList,n=t.id+1;if(n!=ArticleType.ZAOTAI)for(var o=function(e){var o=i[e];if(o.type==n){var a=o.img;a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.x=a.width/2+a.x,a.y=a.height/2+a.y,egret.Tween.get(a,{loop:!1}).to({scaleX:0,scaleY:0},750).call(function(){a.texture=RES.getRes("Decode_json."+t.resourceid+"_png"),egret.Tween.get(a,{loop:!1}).to({scaleX:1.3,scaleY:1.3},100).to({scaleX:1,scaleY:1},250).call(function(){a.anchorOffsetX=0,a.anchorOffsetY=0,a.x=a.x-a.width/2,a.y=a.y-a.height/2,egret.Tween.removeTweens(a)},this)},r)}},r=this,a=0;a<i.length;a++)o(a);else for(var s=function(e){var i=h.barList[e].getBar();i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=i.width/2+i.x,i.y=i.height/2+i.y,egret.Tween.get(i,{loop:!1}).to({scaleX:0,scaleY:0},750).call(function(){i.texture=RES.getRes("Decode_json."+t.resourceid+"_png"),egret.Tween.get(i,{loop:!1}).to({scaleX:1.3,scaleY:1.3},100).to({scaleX:1,scaleY:1},250).call(function(){i.anchorOffsetX=0,i.anchorOffsetY=0,i.x=i.x-i.width/2,i.y=i.y-i.height/2,egret.Tween.removeTweens(i)},this)},h)},h=this,a=0;a<this.barList.length;a++)s(a)},n.prototype.touchbegin=function(e){for(var t=this,i=this.AllarticleList,n=0;n<i.length;n++){var o=i[n].img,r=new egret.Point(this.dinner.x,this.dinner.y);if(getrect(o,r).contains(e.localX,e.localY)){Log("touchbegin====",i[n].type),this.selectArticle=n,this.Intervaltouch=setInterval(function(){if(t.longTimeCount++,t.longTimeCount>=2){t.startPoint=new egret.Point,t.movePoint=new egret.Point,clearInterval(t.Intervaltouch),t.longTimeCount=0,t.articleControl=new egret.DisplayObjectContainer,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(t.articleControl),t.articleControl.$setTouchEnabled(!0),t.articleControl.$setTouchChildren(!0);var e=createRect(0,0,t.stage.width,t.stage.height,.4);t.articleControl.addChild(e);var i=new egret.Bitmap(t.AllarticleList[t.selectArticle].img.texture);i.x=t.AllarticleList[t.selectArticle].img.localToGlobal().x,i.y=t.AllarticleList[t.selectArticle].img.localToGlobal().y,t.articleControl.addChild(i);var n=new egret.Point(i.x,i.y),o=new egret.Point(i.x,i.y);t.articleControl.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(e){getrect(i,new egret.Point(0,0)).contains(e.stageX,e.stageY)&&t.startPoint.setTo(e.stageX,e.stageY)},t.articleControl),t.articleControl.addEventListener(egret.TouchEvent.TOUCH_MOVE,function(e){getrect(i,new egret.Point(0,0)).contains(e.stageX,e.stageY)&&(t.movePoint.setTo(e.stageX,e.stageY),i.x=n.x+(t.movePoint.x-t.startPoint.x),i.y=n.y+(t.movePoint.y-t.startPoint.y))},t.articleControl),t.articleControl.addEventListener(egret.TouchEvent.TOUCH_END,function(e){getrect(i,new egret.Point(0,0)).contains(e.stageX,e.stageY)&&(t.judecommon(i)?(i.x=n.x=o.x,i.y=n.y=o.y):(n.x=o.x+(t.movePoint.x-t.startPoint.x),n.y=o.y+(t.movePoint.y-t.startPoint.y)))},t.articleControl)}},1e3);break}}},n.prototype.touchend=function(e){clearInterval(this.Intervaltouch),this.longTimeCount=0},n.prototype.judecommon=function(e){for(var t=!1,i=this.AllarticleList,n=0;n<i.length;n++)if(n!=this.selectArticle){var o=i[n].img,r=o.getBounds();if(r.x=o.localToGlobal().x,r.y=o.localToGlobal().y,getrect(e,new egret.Point(0,0)).containsRect(r)){t=!0;break}}return t},n.prototype.dispose=function(){i.prototype.dispose.call(this),clearInterval(this.flyTime),clearTimeout(this.bowWaitNumber),clearTimeout(this.waitingTime),t.HallRoleDialog.getInstance().hideDialogInSence(),this.removeEvt(),e.fly.FlyMyster.disposeFly();var n=0;for(n=0;n<this.roleList.length;n++)this.roleList[n].dispose();for(n=0;n<this.waitingRoleList.length;n++)this.waitingRoleList[n].dispose();for(n=0;n<this.chefList.length;n++)this.chefList[n].dispose();for(this.chefList.length=0,this.waitingRoleList.length=0,this.waitingRoleList=null,this.roleList.length=0,n=0;n<this.waitorList.length;n++)this.waitorList[n].dispose();for(this.waitorList.length=0,this.waitorList=null,n=0;n<this.articleList.length;n++){var o=this.articleList[n];o.parent&&o.parent.removeChild(o)}for(n=0;n<this.barList.length;n++){var r=this.barList[n];r.dispose()}for(n=0;n<this.trophyList.length;n++){var a=this.trophyList[n];a.parent&&a.parent.removeChild(a)}for(this.articleList.length=0,this.barList.length=0,this.articleList.length=0,this.AllarticleList.length=0,this.tableList.length=0,this.chairFrontList.length=0,this.chefList.length=0,this.trophyList.length=0,this.trophyList=null,n=0;n<this.birdList.length;n++)this.birdList[n].dispose();this.birdList.length=0,this.birdList=null,this.roleList=null,this.articleList=null,this.barList=null,this.userInfo=null,this.tableList=null,this.chairFrontList=null,this.chefList=null,this.waitorList=null,this.removeChildren()},n}(t.HallBackMap);t.HallMap=i,__reflect(i.prototype,"view.hall.HallMap")}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.analyseHallReward=function(e,t){e==RewardType.food||(e==RewardType.defender?this.playShieldToStone():e==RewardType.stealDefender?this.playShieldToStone():e==RewardType.meterial||(e==RewardType.youAreLimit?tips.Tips.tip("道具已达上限"):e==RewardType.gold||e==RewardType.pysical||e==RewardType.skill))},t.prototype.getShield=function(){var e=this;null==e.shield&&(e.shield=core.StuntManager.getInstance().createStunt(8)),e.shield.scaleX=1,e.shield.scaleY=1,e.shield.anchorOffsetX=190,e.shield.anchorOffsetY=170;var t=core.LayerCenter.stageWidth,i=core.LayerCenter.stageHeight;e.shield.x=t/2,e.shield.y=i/2},t.prototype.playBigReward=function(t){var i="Food.food_"+t+"_png";null==this.rewardGlory&&(this.rewardGlory=new e.GetGift(i)),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.rewardGlory)},t.prototype.playBigShield=function(){var e=this;e.getShield(),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(e.shield),e.shield.addEventListener(egret.Event.COMPLETE,e.shiledToCover,e),e.shield.gotoAndPlay(1,1)},t.prototype.playShieldToStone=function(){var e=this;e.getShield(),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(e.shield),e.shield.addEventListener(egret.Event.COMPLETE,e.shieldToStone,e),e.shield.gotoAndPlay(1,1)},t.prototype.shiledToCover=function(e){var t=this;t.shield.gotoAndStop(8),egret.Tween.get(t.shield,{onChange:function(){}}).to({scaleX:2,scaleY:2},500).call(function(){t.shield.parent&&t.shield.parent.removeChild(t.shield)})},t.prototype.shieldToStone=function(e){var t=this;t.shield.gotoAndStop(8),egret.Tween.get(t.shield).to({x:180,y:135,scaleX:.2,scaleY:.2},500).call(function(){t.shield.parent&&t.shield.parent.removeChild(t.shield)})},t.prototype.dispose=function(){this.shield&&(this.shield.removeEventListener(egret.Event.COMPLETE,this.shiledToCover,this),this.shield.removeEventListener(egret.Event.COMPLETE,this.shieldToStone,this),this.shield.parent&&this.shield.parent.removeChild(this.shield)),this.rewardGlory&&this.rewardGlory.dispose()},t}();e.HallRewardCheck=t,__reflect(t.prototype,"view.hall.HallRewardCheck")}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(i){function n(){var e=i.call(this)||this;return e.friendDefender=0,e.init(),e}return __extends(n,i),n.prototype.init=function(){var i=this;i.map=new t.FriendHallMap,i.addChild(this.map),i.userMessage=new e.userMessage.UserMessage,i.userMessage.type=2,core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).addChild(this.userMessage),i.backBtn=core.BitmapCreator.createBitmap("hallUI.fanhui_png"),i.backBtn.cacheAsBitmap=!0,i.backBtn.touchEnabled=!0,i.backBtn.x=380,i.backBtn.y=700,core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).addChild(this.backBtn),i.friendTownBtn=core.BitmapCreator.createBitmap("hallUI.taren_png"),i.friendTownBtn.touchEnabled=!0,i.friendTownBtn.x=500,i.friendTownBtn.y=50,core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).addChild(this.friendTownBtn),core.Controller.getInstance().showFriend(),i.cfgEvt()},n.prototype.checkCanBeTrouble=function(){var e=this,t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.loginParam,n=ModelManager.getInstance().getModel(ModuleName.FRIEND),o={token:i.token,friendId:n.currentFriendId},r=this;core.Http.sendPostData("isCanTrouble",o,function(t){(0==t.code||9==t.code)&&(9==t.code&&(r.friendDefender=9),r.addEventListener(egret.TouchEvent.TOUCH_TAP,r.trickClick,r),r.friendTownBtn&&(e.friendTownBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.firendTownBtnClick,e),r.friendTownBtn.parent&&r.friendTownBtn.parent.removeChild(r.friendTownBtn)),r.backBtn&&(e.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.backBtnClick,e),r.backBtn.parent&&r.backBtn.parent.removeChild(r.backBtn)),core.Controller.getInstance().hideFriend())})},n.prototype.trickClick=function(e){if(9==this.friendDefender)return this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.trickClick,this),t.FriendShieldBomm.getInstance().playShieldBoom(),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backBtnClick,this),void core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).addChild(this.backBtn);var i=e.localX+this.map.x,n=e.localY+this.map.y,o=Math.ceil(6*Math.random());this.createTroubleImage(o,i,n)},n.prototype.cfgEvt=function(){this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backBtnClick,this),this.friendTownBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.firendTownBtnClick,this)},n.prototype.removeEvt=function(){this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.backBtnClick,this),this.friendTownBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.firendTownBtnClick,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.trickClick,this)},n.prototype.firendTownBtnClick=function(e){core.Controller.getInstance().startTheSame("view.town.FriendTown")},n.prototype.backBtnClick=function(e){core.Controller.getInstance().startMoule(ModuleName.HALL)},n.prototype.show=function(){i.prototype.show.call(this),this.updateFriendHall()},n.prototype.updateFriendHall=function(){this.getUserData()},n.prototype.getUserData=function(){var e=this,t=this,i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.loginParam,o=ModelManager.getInstance().getModel(ModuleName.FRIEND),r={token:n.token,friendId:o.currentFriendId};core.Http.sendPostData("friendInfo",r,function(i){0==i.code?(Log(i.data),o.receiveFirendInfo(i.data),t.setData(o.currentFriendInfo),o.trickStuntState&&(o.trickStuntState=!1,e.checkCanBeTrouble())):tips.Tips.tip(i.errMsg+"("+i.code+")")})},n.prototype.setData=function(e){core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).addChild(this.friendTownBtn),this.userMessage.refreshFriendUserData(),this.map.createActive(e)},n.prototype.createTroubleImage=function(e,t,i){var n,o="InterfaceUI_json.trouble"+e+"_png";n=core.BitmapCreator.createBitmap(o),n.x=t,n.y=i,this.map.addChild(n)},n.prototype.dispose=function(){i.prototype.dispose.call(this);var e=this;e.removeEvt(),e.map.dispose(),e.map=null;var t=ModelManager.getInstance().getModel(ModuleName.FRIEND);t.currentUuid=null,e.backBtn.parent&&(e.backBtn.parent.removeChild(e.backBtn),e.backBtn=null),e.friendTownBtn&&e.friendTownBtn.parent&&(e.friendTownBtn.parent.removeChild(e.friendTownBtn),e.friendTownBtn=null),e.userMessage&&e.userMessage.dispose(),e.userMessage=null,this.removeChildren()},n}(core.ModuleComponent);t.FriendHall=i,__reflect(i.prototype,"view.hall.FriendHall")}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(i){function n(){return i.call(this)||this}return __extends(n,i),n.prototype.uiComplete=function(){i.prototype.uiComplete.call(this),this.initMap()},n.prototype.initMap=function(){this.articleList=new Array,this.roleList=new Array,this.barList=new Array,this.tableList=new Array,this.chairFrontList=new Array,this.waitingRoleList=new Array;var e=(ModelManager.getInstance().getModel(ModuleName.LOGIN),1),t=core.BitmapCreator.createBitmap("hallUI.logo_png"),i=jsondata.JsonDataManager_copy.getInstance().getLogoPositionByLevel(e);t.x=i.x,t.y=i.y,this.activeLayer.addChild(t)},n.prototype.createActive=function(e){this.userInfo=e,this.hasCreateActive&&this.removeCurrent(),this.hasCreateActive=!0;var t=e.roleList,i=(t.length,e.articleList),n=i.length,o=e.barList,r=o.length,a=0;for(a=0;n>a;a++)this.createArticle(i[a]);for(a=0;r>a;a++)this.createBar(o[a]);var s=(ModelManager.getInstance().getModel(ModuleName.LOGIN),2),h=0;for(a=0;a<t.length;a++){var c=t[a];if(s>a){var l=void 0,d=void 0;l=core.RoleManager.getInstance().createRole(c,"DL");var u=1;l.seatNumber=a+1,d=jsondata.JsonDataManager_copy.getInstance().getSeatPositionBySeatNumber(u,l.seatNumber),l.sectionType="hall",l.setPosition(d.x,d.y),this.activeLayer.addChild(l),this.swapRoleDepth(l),this.roleList.push(l),3008!=c.id&&l.stopActionInSence(),this.playRoleSitdown(l)}else h++,this.createRole(c,h)}},n.prototype.createRole=function(e,t){var i,n;i=core.RoleManager.getInstance().createRole(e,"UL"),i.waitingNumber=t,n=jsondata.JsonDataManager_copy.getInstance().getWatingPosition(i.waitingNumber),i.sectionType="waiting",i.setPosition(n.x,n.y),this.activeLayer.addChild(i),i.playAction("UL"),3008!=e.id&&i.stopActionInSence(),this.swapRoleDepth(i),this.waitingRoleList.push(i)},n.prototype.playRoleSitdown=function(e){var t=this,i=e.seatNumber,n=t.chairFrontList[i-1],o=t.tableList[i-1],r=t.activeLayer.getChildIndex(n),a=t.activeLayer.getChildIndex(o),s=t.activeLayer.getChildIndex(e),h=r,c=s,l=a;h>c&&(h=s,c=r),c>l&&(c=a,l=s),t.activeLayer.setChildIndex(n,h),t.activeLayer.setChildIndex(e,c),t.activeLayer.setChildIndex(o,l)},n.prototype.removeCurrent=function(){var e=0;for(e=0;e<this.roleList.length;e++)this.roleList[e].dispose();for(this.roleList.length=0,e=0;e<this.waitingRoleList.length;e++)this.waitingRoleList[e].dispose();for(this.waitingRoleList.length=0,e=0;e<this.articleList.length;e++){var t=this.articleList[e];t.parent&&t.parent.removeChild(t)}for(this.articleList.length=0,e=0;e<this.barList.length;e++){var i=this.barList[e];i.dispose()}for(this.barList.length=0,e=0;e<this.tableList.length;e++){var t=this.tableList[e];t.parent&&t.parent.removeChild(t)}for(e=0;e<this.chairFrontList.length;e++){var t=this.chairFrontList[e];t.parent&&t.parent.removeChild(t)}this.tableList.length=0,this.chairFrontList.length=0,this._depthManager&&this._depthManager.clearDepthDictionary()},n.prototype.createBar=function(t){var i=new e.hall.HallBar,n=(ModelManager.getInstance().getModel(ModuleName.LOGIN),1),o=jsondata.JsonDataManager_copy.getInstance().getBarPositionByIndex(n,t.index);null!=o&&(i.x=o.x,i.y=o.y,this.barList.push(i),this.activeLayer.addChild(i),this.swapBarDepth(i))},n.prototype.createArticle=function(e){var t=e.id,i=this;if(47!=t&&!(t>100)){var n,o,r=(ModelManager.getInstance().getModel(ModuleName.LOGIN),1),a=jsondata.JsonDataManager_copy.getInstance().getArticlePostionByPositionIdx(r,e.id),s=0;if(43==t)n=core.BitmapCreator.createDecode(e.resourceid),n.x=a.x,n.y=a.y,i.createShadom(a.x,a.y,n.height,1),i.activeLayer.addChild(n),i.articleList.push(n),i.swapStandArticleDepth(n),n=core.BitmapCreator.createDecode(e.resourceid),n.x=a.x1,n.y=a.y1,i.createShadom(a.x1,a.y1,n.height,2),i.activeLayer.addChild(n),i.articleList.push(n),i.swapStandArticleDepth(n);else if(44==t){for(o=a.position,s=0;s<o.length;s++)n=core.BitmapCreator.createDecode(e.resourceid),n.x=o[s].x,n.y=o[s].y,i.activeLayer.addChild(n),i.swapStandArticleDepth(n),i.articleList.push(n),i.tableList.push(n);var h="hallUI.tableShadom_png";for(s=0;s<o.length;s++){var c=core.BitmapCreator.createBitmap(h);c.x=o[s].x-5,c.y=o[s].y+30,i.activeLayer.addChildAt(c,s+2)}}else if(45==t){var l=e.resourceid.split(","),d=l[0];l[1];for(o=a.position_front,s=0;s<o.length;s++)n=core.BitmapCreator.createDecode(d),n.x=o[s].x,n.y=o[s].y,i.activeLayer.addChild(n),i.swapStandArticleDepth(n),i.articleList.push(n),i.chairFrontList.push(n)}else n=core.BitmapCreator.createDecode(e.resourceid),n.x=a.x,n.y=a.y,i.activeLayer.addChild(n),i.swapDepth(n),i.articleList.push(n)}},n.prototype.createShadom=function(e,t,i,n){var o=core.BitmapCreator.getArticleShadom(n);o.x=e+5,o.y=t+i-o.height/2-20,this.activeLayer.addChildAt(o,1)},n.prototype.dispose=function(){i.prototype.dispose.call(this),t.HallRoleDialog.getInstance().hideDialogInSence(),e.fly.FlyMyster.disposeFly();var n=0;for(n=0;n<this.roleList.length;n++)this.roleList[n].dispose();for(n=0;n<this.waitingRoleList.length;n++)this.waitingRoleList[n].dispose();for(this.waitingRoleList.length=0,this.waitingRoleList=null,core.RoleManager.getInstance().clearRole(),this.roleList.length=0,n=0;n<this.articleList.length;n++){var o=this.articleList[n];o.parent&&o.parent.removeChild(o)}for(n=0;n<this.barList.length;n++){var r=this.barList[n];r.dispose()}this.articleList.length=0,this.barList.length=0,this.articleList.length=0,this.tableList.length=0,this.chairFrontList.length=0,this.roleList=null,this.articleList=null,this.barList=null,this.userInfo=null,this.tableList=null,this.chairFrontList=null,this.removeChildren()},n}(t.HallBackMap);t.FriendHallMap=i,__reflect(i.prototype,"view.hall.FriendHallMap")}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(){function e(){}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.playShieldBoom=function(){this.bling=new test.BlingBling(this.shieldBoom,this),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.bling)},e.prototype.removeShieldBoom=function(){this.bling&&this.bling.dispose()},e.prototype.shieldBoom=function(){var e=this,t=core.StuntManager.getInstance().createStunt(9);t.anchorOffsetX=200,t.anchorOffsetY=250;var i=core.LayerCenter.stageWidth,n=core.LayerCenter.stageHeight;t.x=i/2,t.y=n/2,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(t),t.gotoAndPlay(1,1);var o=function(){t.parent&&t.parent.removeChild(t),t.removeEventListener(egret.Event.COMPLETE,o,e)};t.addEventListener(egret.Event.COMPLETE,o,this)},e}();e.FriendShieldBomm=t,__reflect(t.prototype,"view.hall.FriendShieldBomm")}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this.back=core.BitmapCreator.createBitmap("hallUI.daojishi_01_png"),this.back.width=100,this.addChild(this.back),this.timeTxt=core.TextUtils.createCenterText(20,16777215,"Arial",!1),this.timeTxt.width=this.back.width,this.timeTxt.height=this.back.height,this.addChild(this.timeTxt)},t.prototype.hide=function(){core.TickerManager.unregister(this),this.parent&&this.parent.removeChild(this)
},t.prototype.updateTime=function(e,t,i){this.friendUserData=e,this.friendUserData.resourceCoolTime>0?(core.TickerManager.register(this),this.friendUserData=e,this.callback=t,this.callee=i):(this.friendUserData=null,this.callback=null,this.callee=null,this.hide())},t.prototype.tick=function(){if(null==this.friendUserData)return void this.hide();if(this.friendUserData.resourceCoolTime<0)return this.hide(),this.callback&&this.callback.call(this.callee),this.friendUserData=null,this.callback=null,void(this.callee=null);var e=core.TextUtils.getTimeFormatStr(this.friendUserData.resourceCoolTime);this.timeTxt.text=e,this.friendUserData.resourceCoolTime-=1e3},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.friendUserData=null,this.callback=null,this.callee=null,core.TickerManager.unregister(this),this.back&&this.back.parent&&this.back.parent.removeChild(this.back),this.back=null,this.process&&this.process.parent&&this.process.parent.removeChild(this.process),this.process=null,this.parent&&this.parent.removeChild(this)},t}(core.BaseUIComponent);e.StoneProcess=t,__reflect(t.prototype,"view.hall.StoneProcess",["core.ITicker"])}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.backImage=core.BitmapCreator.createBitmap("hallUI.daoluan_15_png"),t.addChild(t.backImage),t.numberTxt=core.TextUtils.createLeftText(28,16775504,"Arial",!0),t.numberTxt.stroke=2,t.numberTxt.strokeColor=0,t.numberTxt.y=t.backImage.height-30,t.numberTxt.x=t.backImage.width,t.addChild(t.numberTxt),t}return __extends(t,e),t.prototype.setTrickTime=function(e){this.numberTxt.text=e.toString()},t.prototype.setTrickTimeMinus=function(){var e=Number(this.numberTxt.text);this.numberTxt.text=(e-1).toString()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.removeChildren(),this.backImage=null,this.numberTxt=null},t}(core.BaseUIComponent);e.TrickStunt=t,__reflect(t.prototype,"view.hall.TrickStunt")}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(t){var i=e.call(this,t)||this;return i.flyTime=0,i}return __extends(t,e),t.prototype.setMcFactory=function(e){this.mc_factory=e},t.prototype.fly=function(){var e={x:this.x-1.3*core.LayerCenter.stageWidth,y:500*Math.random()},t="Brid_FLY",i=this.mc_factory.generateMovieClipData(t),n=this;n.rotation=0,n.movieClipData=i,n.gotoAndPlay(1,-1),n.scaleX=1,egret.Tween.get(this,{loop:!1}).to({x:e.x,y:e.y,rotation:60},3e3).call(function(){n.stop(),egret.Tween.removeTweens(this),n.parent&&n.parent.removeChild(n)})},t.prototype.stand=function(){var e="Brid_STAND",t=this.mc_factory.generateMovieClipData(e);this.movieClipData=t,this.frameRate=6+Math.floor(3*Math.random()),this.gotoAndPlay(Math.floor(4*Math.random()),-1)},t.prototype.back=function(e,t){var i=({x:this.x-core.LayerCenter.stageWidth,y:500*Math.random()},"Brid_FLY"),n=this.mc_factory.generateMovieClipData(i),o=this;o.rotation=0,o.movieClipData=n,o.scaleX=-1,o.gotoAndPlay(1,-1),egret.Tween.get(this,{loop:!1}).to({x:e,y:t,rotation:0},3e3).call(function(){o.scaleX=1,egret.Tween.removeTweens(this),o.stand()})},t.prototype.dispose=function(){this.stop(),egret.Tween.removeTweens(this),this.movieClipData=null,this.mc_factory=null,this.parent&&this.parent.removeChild(this)},t}(egret.MovieClip);e.HallBird=t,__reflect(t.prototype,"view.hall.HallBird")}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(i){function n(){var e=i.call(this)||this;return e.isShowDialog=!1,e.touchEnabled=!0,e}return __extends(n,i),n.prototype.setData=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!0),this.data=e,i&&(this.bar=i),this.makeFoodState=t,this.isHall=n,this.setResourceId(100),n&&this.updateDownTime()},n.prototype.updateDownTime=function(){return this.startClock(),null==this.data&&0!=this.index||null==this.makeFoodState?void core.TickerManager.unregister(this):void(this.makeFoodState.leftTime>0?core.TickerManager.register(this):core.TickerManager.unregister(this))},n.prototype.playAction=function(e){i.prototype.playAction.call(this,e)},n.prototype.getMcResNameByType=function(e,t){jsondata.JsonConfigManager.getRoleCfgById(e);return"DL"==t||"DR"==t?"Npc_100_DL":"Npc_100_UR"},n.prototype.playDialog=function(e,i){void 0===e&&(e=0),this.clock&&(this.clock.dispose(),this.clock.parent&&this.clock.parent.removeChild(this.clock)),this.stopAction();var n=t.HallRoleDialog.isShowDialog;if(!n){this.isShowDialog=!0;var o=t.HallRoleDialog.getInstance();this.addChild(o),o.showChefDialogback(this.data.id,e,i)}},n.prototype.startClock=function(){null==this.clock&&(this.clock=new e.hall.Clock,this.clock.bar=this.bar,this.clock.x=0,this.clock.y=this.body.y-112,this.clock.visible=!1),this.addChild(this.clock),this.clock.showData(this.makeFoodState)},n.prototype.removeClock=function(){this.clock&&this.clock.parent&&this.clock.parent.removeChild(this.clock)},n.prototype.tick=function(){return null==this.data?void core.TickerManager.unregister(this):void(this.makeFoodState.leftTime>0?this.makeFoodState.leftTime-=1e3:core.TickerManager.unregister(this))},n.prototype.playStand=function(){var e="Npc_100_STAND";this.body.matrix=RoleMatrix.plus_matrix;var t=this.mc_factory.generateMovieClipData(e);this.body.movieClipData=t,this.body.gotoAndPlay(1,-1),this.clock.visible=!0},n.prototype.cfgEvt=function(){},n.prototype.removeEvt=function(){},n.prototype.dispose=function(){i.prototype.dispose.call(this),this.removeEvt(),core.TickerManager.unregister(this),this.data=null,this.makeFoodState=null,this.clock&&(this.clock.dispose(),this.clock=null),this.removeChildren(),this.parent&&this.parent.removeChild(this),this.bar=null,this.isHall=null},n}(core.Role);t.HallChef=i,__reflect(i.prototype,"view.hall.HallChef")}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(i){function n(){var e=i.call(this)||this;return e.foodMakeState=0,e.seatNumber=0,e.waitingNumber=0,e.stopMove=!1,e.randomMove=0,e.isShowDialog=!1,e}return __extends(n,i),n.prototype.checkFood=function(){this.roleData&&this.roleData.food&&this.createFood(this.roleData.food.foodID)},n.prototype.setRoleData=function(e){this.roleData=e,this.setResourceId(e.id)},n.prototype.getRoleData=function(){return this.roleData},n.prototype.receiveSellInfo=function(e){this.roleData.food.foodID=e.foodId,this.food&&this.food.parent&&(this.food.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.foodClick,this),this.food.parent.removeChild(this.food),this.foodBackImage.parent.removeChild(this.foodBackImage)),this.createFood(e.foodId),this.addFoodEvt()},n.prototype.createFood=function(e){if(e){var t=this;t.foodBackImage=core.BitmapCreator.createBitmap("hallUI.tishi_png"),t.foodBackImage.anchorOffsetX=t.foodBackImage.width/2,t.foodBackImage.y=-128,t.addChild(t.foodBackImage),t.food=core.BitmapCreator.createFoodBitmapById(e),t.food.anchorOffsetX=t.food.width/5,t.food.height=60,t.food.width=60,t.food.y=-128,t.addChild(this.food)}},n.prototype.addFoodEvt=function(){this.food&&(this.food.touchEnabled=!0,this.food.addEventListener(egret.TouchEvent.TOUCH_TAP,this.foodClick,this))},n.prototype.foodClick=function(e){if(1==this.foodMakeState)return void tips.Tips.tip("正在制作您的食物！");this.stopRandomMove(),t.HallRoleDialog.getInstance().hideDialog();var i=this;core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.ROLE_GOTO_MAKE_FOOD,i))},n.prototype.removeFood=function(){var e=this;e.foodBackImage&&e.foodBackImage&&e.foodBackImage.parent.removeChild(e.foodBackImage),e.foodBackImage=null,e.food&&(e.food.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.foodClick,e),e.food.parent&&e.food.parent.removeChild(e.food),e.food=null)},n.prototype.playAction=function(e){i.prototype.playAction.call(this,e),null!=this.body&&("UR"==e||"DL"==e?(this.body.matrix=RoleMatrix.plus_matrix,this.food&&(this.food.matrix=RoleMatrix.plus_matrix,this.food.y=-120)):(this.body.matrix=RoleMatrix.minus_matrix,this.food&&(this.food.matrix=RoleMatrix.minus_matrix,this.food.y=-130)))},n.prototype.playSitDown=function(){var e=jsondata.JsonConfigManager.getRoleCfgById(this.roleData.id),t=e.resources.length-2,i=e.resources.substr(0,t)+"wait",n=this.mc_factory.generateMovieClipData(i);this.body.movieClipData=n,this.body.gotoAndPlay(1,-1),this.checkFood(),this.addFoodEvt()},n.prototype.sendMakeEnd=function(t,i){var n=this,o=ModelManager.getInstance().getModel(ModuleName.LOGIN),r=o.loginParam,a=this.roleData,s={token:r.token,foodId:a.food.foodID,roleId:a.id,index:a.seatNumber};core.Http.sendPostData("saleFood",s,function(o){if(0==o.code){n.foodMakeState=2,n.removeFood(),n.stopAction();var r=ModelManager.getInstance().getModel(ModuleName.LOGIN),a=new data.SaleResData;a.copyData(o.data);for(var s=0;s<a.typeList.length;s++)8==a.typeList[s].currencyType&&(e.fly.Fly.flyGoldInHallStunt(),tips.ShowMoney.ShowMoney(a.typeList[s].currencyNum));var h={saleRes:a,role:n};n.playDialog(2,function(){core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.SALE_FOOD_SUCCESS,h))});var c=o.data.heartNumber,l=o.data.heartVariable,d=new data.LoveValue(c,l,t,i);core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.FLUSH_LOVE_VALUE,d));var u=o.data.goldNumber;r.userInfo.userData.gold=u,core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.USERINFO_GOLD))}else tips.Tips.tip(o.errMsg+"("+o.code+")")})},n.prototype.sendRefuse=function(e,t){var i=this,n=ModelManager.getInstance().getModel(ModuleName.LOGIN),o=n.loginParam,r=this.roleData,a={token:o.token,foodId:r.food.id,roleId:r.id,index:r.seatNumber},s=this;core.Http.sendPostData("refuseCustomer",a,function(e){if(0==e.code){i.stopRandomMove(),i.removeFood(),i.stopAction(),i.foodMakeState=2;var t=new data.RefuseRes;t.copyData(e.data);var n={refuseRes:t,role:i};s.playDialog(1,function(){core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.MAKE_FOOD_REFUSE,n))});var o=new data.LoveValue(e.data.heartNumber,0,0,0);core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.FLUSH_LOVE_VALUE,o))}else tips.Tips.tip(e.errMsg+"("+e.code+")")})},n.prototype.playDialog=function(e,i){void 0===e&&(e=0),this.stopInLook();var n=t.HallRoleDialog.isShowDialog;if(!n){this.isShowDialog=!0;var o=t.HallRoleDialog.getInstance();this.addChild(o),o.showDialogback(this.roleData.id,e,i)}},n.prototype.stopActionInSence=function(){this.body&&3008!=this.roleData.id&&this.body.stop(),this.stopMove=!1},n.prototype.playRandomMoveAction=function(e){this.moveActionManager.act(e)},n.prototype.playMoveAction=function(e){this.stopRandomMove(),this.moveActionManager.act(e)},n.prototype.stopRandomMove=function(){clearTimeout(this.randomMove),this.stopMove=!0,this.moveActionManager&&this.moveActionManager.clearActions()},n.prototype.stopAction=function(){this.body&&3008!=this.roleData.id&&this.body.stop()},n.prototype.createShadom=function(){var e=this,t=e.body.height;null==e.shadom&&(e.shadom=core.BitmapCreator.createBitmap("hallUI.roleShaden_png"),e.addChildAt(e.shadom,0)),"UL"==e.currentAction||"DR"==e.currentAction?3008==e.roleData.id?(e.shadom.y=t/2+15,e.shadom.x=-50):(e.shadom.y=t/4,e.shadom.x=-50):3008==e.roleData.id?(e.shadom.y=t/2+15,e.shadom.x=-15):(e.shadom.y=t/4,e.shadom.x=-15)},n.prototype.dispose=function(){var e=this;this.stopRandomMove(),e.food&&(e.food.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.foodClick,e),this.food.parent&&e.food.parent.removeChild(e.food)),i.prototype.dispose.call(this),e.roleData=null},n}(core.Role);t.HallRole=i,__reflect(i.prototype,"view.hall.HallRole")}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.init=function(){this.talk_background=core.BitmapCreator.createBitmap("hallUI.duihuakuang_png"),this.addChild(this.talk_background),this.talk_text=core.TextUtils.createCenterText(15,0,"黑体",!0),this.talk_text.multiline=!0,this.talk_text.x=2,this.talk_text.y=2,this.talk_text.width=this.talk_background.width-8,this.talk_text.height=this.talk_background.height-8,this.addChild(this.talk_text),this.y=-45-this.talk_background.height,this.x=-this.talk_background.width/2},t.prototype.showDialog=function(e){if(!t.isShowDialog){t.isShowDialog=!0;var i=jsondata.JsonConfigManager.getRoleCfgById(e),n=i.dialogue;this.talk_text.text=n.toString()}},t.prototype.showDialogback=function(e,i,n){if(!t.isShowDialog){t.isShowDialog=!0;var o=jsondata.JsonConfigManager.getRoleCfgById(e),r=o.dialogue;r=1==i?"这是真的么?":"非常感谢！",this.talk_text.text=r.toString();var a=setTimeout(function(){clearTimeout(a),n&&n()},2e3)}},t.prototype.showWaitorDialogback=function(e,i,n){if(!t.isShowDialog){t.isShowDialog=!0;var o="";o=1==i?"好吧，再见！":"非常感谢！",this.talk_text.text=o.toString();var r=setTimeout(function(){clearTimeout(r),n&&n()},2e3)}},t.prototype.showChefDialogback=function(e,i,n){if(!t.isShowDialog){t.isShowDialog=!0;var o="";o=1==i?"好吧，再见！":"非常感谢！",this.talk_text.text=o.toString();var r=this,a=setTimeout(function(){clearTimeout(a),r.hideDialog(),n&&n()},2e3)}},t.prototype.hideDialog=function(){t.isShowDialog&&(t.isShowDialog=!1,this.parent&&this.parent.removeChild(this))},t.prototype.hideDialogInSence=function(){t.isShowDialog=!1,this.parent&&this.parent.removeChild(this)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.removeChildren(),this.talk_background=null,this.talk_text=null,t.isShowDialog=!1},t.isShowDialog=!1,t}(core.BaseUIComponent);e.HallRoleDialog=t,__reflect(t.prototype,"view.hall.HallRoleDialog")}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.isShowDialog=!1,e}return __extends(i,t),i.prototype.playBow=function(){var e=this,t="waitor_"+this.employeeData.index;this.body.matrix=RoleMatrix.plus_matrix;var i=this.mc_factory.generateMovieClipData(t);this.body.movieClipData=i,this.body.gotoAndPlay(1,1),this.body.addEventListener(egret.Event.COMPLETE,function(t){e.playStand()},this)},i.prototype.getMcResNameByType=function(e,t){jsondata.JsonConfigManager.getRoleCfgById(e);return"DL"==t||"DR"==t?"waitor_DL":"waitor_UR"},i.prototype.showwaitor=function(){this.name="waitor",this.playStand()},i.prototype.playStand=function(){var e=["waitor_standB","waitor_standF"],t=e[this.employeeData.index-1];this.body.matrix=RoleMatrix.minus_matrix;var i=this.mc_factory.generateMovieClipData(t);this.body.movieClipData=i,this.body.gotoAndPlay(0,-1);var n=this.height;this.shadom.y=n/4+5,this.shadom.x=-10,1!=this.employeeData.index&&(this.shadom.y=n/4+2,this.shadom.x=-30)},i.prototype.playDialog=function(t,i){void 0===t&&(t=0),this.stopAction();var n=e.HallRoleDialog.isShowDialog;if(!n){this.isShowDialog=!0;var o=e.HallRoleDialog.getInstance();this.addChild(o),o.showWaitorDialogback(this.employeeData.id,t,i)}},i.prototype.dispose=function(){t.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this)},i}(core.Role);e.HallWaitor=t,__reflect(t.prototype,"view.hall.HallWaitor")}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.firstEnter=!1,t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/getGiftSkin.exml",t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.uiComplete=function(){this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBtnClick,this),this.firstEnter&&this.playGlory(this.resource,this.callback,this.callee)},t.prototype.playGlory=function(e,t,i){return this.resource=e,this.callback=t,this.callee=i,null==this.sureBtn?void(this.firstEnter=!0):(this.getGiftIcon.source=this.resource,egret.Tween.get(this.bgLight,{loop:!0}).to({rotation:360},6e3),null==this.circle&&(this.circle=core.StuntManager.getInstance().createStunt(7)),this.groupShow.addChild(this.circle),this.circle.play(-1),void core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this))},t.prototype.sureBtnClick=function(e){this.circle&&this.circle.stop(),this.parent&&this.parent.removeChild(this),this.callback&&this.callback.call(this.callee),this.callback=null,this.callee=null},t.prototype.dispose=function(){this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this),this.parent&&this.parent.removeChild(this),this.sureBtn&&this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBtnClick,this),this.removeChildren(),this.sureBtn=null},t}(eui.Component);e.CommonGift=t,__reflect(t.prototype,"view.hall.CommonGift",["core.IComponent"])}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(t,i){var n=e.call(this)||this;return n.resource=t,n.data=i,n.addEventListener(eui.UIEvent.COMPLETE,n.uiComplete,n),n.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,n.dispose,n),n.skinName="resource/ui_skin/getGiftSkin.exml",n}return __extends(t,e),t.prototype.uiComplete=function(){Log(this.data),this.getGiftIcon.source=this.resource,egret.Tween.get(this.bgLight,{loop:!0}).to({rotation:360},6500),this.circle=core.StuntManager.getInstance().createStunt(7),this.groupShow.addChild(this.circle),this.circle.play(-1),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBtnClick,this)},t.prototype.sureBtnClick=function(e){this.parent&&this.parent.removeChild(this),this.sureBtn&&this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBtnClick,this)},t.prototype.powerMovie=function(e){this.powerSp=core.BitmapCreator.createBitmap("hallUI.currency6_png"),this.powerSp.y=504-this.powerSp.height/2,this.powerSp.x=320-this.powerSp.width/2,this.powerSp.scaleX=1.5,this.powerSp.scaleY=1.5,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.powerSp),this.powerNb=core.TextUtils.createCenterText(1.5*this.powerSp.height,3997183,"Arial",!0),this.powerNb.y=this.powerSp.y,this.powerNb.x=this.powerSp.x+this.powerSp.width+.5*this.powerSp.width,this.powerNb.text="+"+e,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.powerNb),egret.Tween.get(this.powerSp,{loop:!1}).to({x:173,y:92,scaleX:.3,scaleY:.3},500),egret.Tween.get(this.powerNb,{loop:!1}).to({x:173+this.powerSp.width-.7*this.powerSp.width,y:92,scaleX:.3,scaleY:.3},500).call(function(){this.powerSp.parent&&(this.powerSp.parent.removeChild(this.powerSp),egret.Tween.removeTweens(this.powerSp),this.powerSp=null),this.powerNb.parent&&(this.powerNb.parent.removeChild(this.powerNb),egret.Tween.removeTweens(this.powerNb),this.powerNb.text="",this.powerNb=null)},this)},t.prototype.dispose=function(){this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this),this.parent&&this.parent.removeChild(this),this.sureBtn&&this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBtnClick,this),this.removeChildren(),this.sureBtn=null},t}(eui.Component);e.GetGift=t,__reflect(t.prototype,"view.hall.GetGift",["core.IComponent"])}(t=e.hall||(e.hall={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=null,i=null,n=(new Array,0),o=function(e){function o(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/HandbookSkin.exml",t}return __extends(o,e),o.prototype.uiComplete=function(){var e=this,o=ModelManager.getInstance().getModel(ModuleName.LOGIN),r=o.loginParam,a={token:r.token};core.Http.sendGetData("drawing",a,function(o){if(0==o.code){Log(o.data),t=o.data;for(var r=0,a=0,s=0;s<t.length;s++){r=t[s].list.length+r;for(var h=0;h<t[s].list.length;h++)0==t[s].list[h].state&&a++}e.currentStrength.text="已收集 "+a+"/"+r,e.showList(0),i=0,n=0}else tips.Tips.tip(o.errMsg+"("+o.code+")")}),this.handbookSelect1.source="windowUI_json.Menu_tab4_01_png",this.handbookSelect2.source="windowUI_json.Menu_tab1_02_png",this.handbookSelect3.source="windowUI_json.Menu_tab2_02_png",this.handbookSelect4.source="windowUI_json.Menu_tab3_02_png",this.handbookSelect5.source="windowUI_json.Menu_tab5_02_png";for(var s=0;5>s;s++)toutap(this["handbookSelect"+(s+1)],this.handbookSelectClick,this,[s]);this.closeRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this)},o.prototype.showList=function(e){ModelManager.getInstance().getModel(ModuleName.HALL);this.dsListHandbook=[];for(var i=0;i<t[e].list.length;i++){var n="",o="",a="",s="";0==t[e].list[i].state?(n="windowUI_json.catalog_bg_01_png",o=""+jsondata.JsonConfigManager.getFoodDataById(t[e].list[i].foodID).foodlevel,a=jsondata.JsonConfigManager.getFoodDataById(t[e].list[i].foodID).foodname,s="Food."+jsondata.JsonConfigManager.getFoodDataById(t[e].list[i].foodID).foodlogo+"_png"):n="windowUI_json.catalog_bg_02_png",this.dsListHandbook.push({num:o,iconBg:n,name:a,icon:s})}this.listHandbook.dataProvider=new eui.ArrayCollection(this.dsListHandbook),this.listHandbook.itemRenderer=r},o.prototype.handbookSelectClick=function(e){var t=[4,1,2,3,5];e==i?tips.Tips.tip("请勿重复点击"):(this.handbookScroll.stopAnimation(),this.handbookGroup.scrollV=0,this["handbookSelect"+(i+1)].source="windowUI_json.Menu_tab"+t[i]+"_02_png",i=e,this["handbookSelect"+(i+1)].source="windowUI_json.Menu_tab"+t[i]+"_01_png",this.showList(e),n=0)},o.prototype.closeRectClick=function(e){this.parent&&this.parent.removeChild(this),this.closeRect&&this.closeRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this)},o.prototype.dispose=function(){this.removeChildren(),this.listHandbook.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeRect&&this.closeRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRectClick,this)},o}(eui.Component);e.Handbook=o,__reflect(o.prototype,"view.handbook.Handbook",["core.IComponent"]);var r=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.onComplete,t),t.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,t.dispose,t),t.skinName="resource/ui_skin/HandbookListSkin.exml",t}return __extends(t,e),t.prototype.onComplete=function(){},t.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this)},t}(eui.ItemRenderer);__reflect(r.prototype,"handbookLogic",["core.IComponent"])}(t=e.handbook||(e.handbook={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return i.type=t,i.addEventListener(eui.UIEvent.COMPLETE,i.uiComplete,i),i.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,i.dispose,i),i.skinName="resource/ui_skin/newLeaderSkin.exml",i}return __extends(t,e),t.prototype.uiComplete=function(){this.runAction=0,this.changeSize(),egret.Tween.get(this.newHand,{loop:!0}).to({rotation:10},500).to({rotation:0},500),this.newLight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeSize,this)},t.prototype.textKuangMove=function(){-1==this.newKuang.scaleY?this.newText.y=31:this.newText.y=68},t.prototype.changeSize=function(){var e=ModelManager.getInstance().getModel(ModuleName.LOGIN),t=e.loginParam;if(0==this.runAction)this.runAction++,this.newText.text="点击图标制作食物",this.newKuang.scaleX=-1,this.newKuang.scaleY=-1,this.newGroup.x=212,this.newGroup.y=256,this.newHand.x=504,this.newHand.y=617,this.newLight.x=305,this.newLight.y=443,this.newLight.width=130,this.newLight.height=130,this.rectTop.height=this.newLight.y,this.rectBottom.height=1008-this.rectTop.height-this.newLight.height,this.rectLeft.width=this.newLight.x,this.rectRight.width=640-this.newLight.width-this.rectLeft.width,this.rectLeft.height=this.rectRight.height=this.newLight.height,this.rectLeft.y=this.rectRight.y=this.newLight.y,this.zhezhao.pixelHitTest=!1,this.zhezhao.source="hallUI.zhezhao_01_png",this.zhezhao.width=this.newLight.width,this.zhezhao.height=this.newLight.height,this.textKuangMove();else if(1==this.runAction)this.runAction++,this.newText.text="点击菜单中的对应食物开始制作",this.newGroup.x=31,this.newGroup.y=385,this.newKuang.scaleX=-1,this.newKuang.scaleY=-1,this.newHand.x=342,this.newHand.y=773,this.newLight.x=-25,this.newLight.y=520,this.newLight.width=400,this.newLight.height=242,this.rectTop.height=this.newLight.y,this.rectBottom.height=1008-this.rectTop.height-this.newLight.height,this.rectLeft.width=0,this.rectRight.width=640-this.newLight.width-this.rectLeft.width+25,this.rectLeft.height=this.rectRight.height=this.newLight.height,this.rectLeft.y=this.rectRight.y=this.newLight.y,this.zhezhao.pixelHitTest=!1,this.zhezhao.source="hallUI.zhezhao_06_png",this.zhezhao.width=this.newLight.width,this.zhezhao.height=this.newLight.height,this.textKuangMove();else if(2==this.runAction){var i={token:t.token,guideType:1};core.Http.sendPostData("updateRookieGuide",i,function(e){0==e.code?Log(e.data):tips.Tips.tip(e.errMsg+"("+e.code+")")}),this.runAction++,this.newText.text="点击食物图标，满足神秘客人，获得特殊奖励",this.newKuang.scaleX=-1,this.newKuang.scaleY=-1,this.newGroup.x=92,this.newGroup.y=300,this.newHand.x=384,this.newHand.y=637,this.newLight.x=192,this.newLight.y=490,this.newLight.width=135,this.newLight.height=135,this.rectTop.height=this.newLight.y,this.rectBottom.height=1008-this.rectTop.height-this.newLight.height,this.rectLeft.width=this.newLight.x,this.rectRight.width=640-this.newLight.width-this.rectLeft.width,this.rectLeft.height=this.rectRight.height=this.newLight.height,this.rectLeft.y=this.rectRight.y=this.newLight.y,this.zhezhao.pixelHitTest=!1,this.zhezhao.source="hallUI.zhezhao_01_png",this.zhezhao.width=this.newLight.width,this.zhezhao.height=this.newLight.height,this.textKuangMove()}else if(3==this.runAction){var i={token:t.token,guideType:2};core.Http.sendPostData("updateRookieGuide",i,function(e){0==e.code?Log(e.data):tips.Tips.tip(e.errMsg+"("+e.code+")")}),this.runAction++,this.newText.text="这是特殊食物，需要邀请好友帮助，请点击按钮",this.newKuang.scaleX=1,this.newKuang.scaleY=-1,this.newGroup.x=319,this.newGroup.y=102,this.newHand.x=569,this.newHand.y=392,this.newLight.x=448,this.newLight.y=261,this.newLight.width=80,this.newLight.height=80,this.rectTop.height=this.newLight.y,this.rectBottom.height=1008-this.rectTop.height-this.newLight.height,this.rectLeft.width=this.newLight.x,this.rectRight.width=640-this.newLight.width-this.rectLeft.width,this.rectLeft.height=this.rectRight.height=this.newLight.height,this.rectLeft.y=this.rectRight.y=this.newLight.y,this.zhezhao.pixelHitTest=!1,this.zhezhao.source="hallUI.zhezhao_01_png",this.zhezhao.width=this.newLight.width,this.zhezhao.height=this.newLight.height,this.textKuangMove()}else if(4==this.runAction){var i={token:t.token,guideType:3};core.Http.sendPostData("updateRookieGuide",i,function(e){0==e.code?Log(e.data):tips.Tips.tip(e.errMsg+"("+e.code+")")}),this.runAction++,this.newText.text="点击进入我的小镇",this.newKuang.scaleX=1,this.newKuang.scaleY=1,this.newGroup.x=349,this.newGroup.y=102,this.newHand.x=579,this.newHand.y=142,this.newLight.x=402,this.newLight.y=2,this.newLight.width=135,this.newLight.height=135,this.rectTop.height=this.newLight.y,this.rectBottom.height=1008-this.rectTop.height-this.newLight.height,this.rectLeft.width=this.newLight.x,this.rectRight.width=640-this.newLight.width-this.rectLeft.width,this.rectLeft.height=this.rectRight.height=this.newLight.height,this.rectLeft.y=this.rectRight.y=this.newLight.y,this.zhezhao.pixelHitTest=!1,this.zhezhao.source="hallUI.zhezhao_03_png",this.zhezhao.width=this.newLight.width,this.zhezhao.height=this.newLight.height,this.textKuangMove()}else if(5==this.runAction)this.runAction++,this.newText.text="点击餐厅",this.newKuang.scaleX=1,this.newKuang.scaleY=-1,this.newGroup.x=82,this.newGroup.y=415,this.newHand.x=375,this.newHand.y=870,this.newLight.x=80,this.newLight.y=535,this.newLight.width=380,this.newLight.height=380,this.rectTop.height=this.newLight.y,this.rectBottom.height=1008-this.rectTop.height-this.newLight.height,this.rectLeft.width=this.newLight.x,this.rectRight.width=640-this.newLight.width-this.rectLeft.width,this.rectLeft.height=this.rectRight.height=this.newLight.height,this.rectLeft.y=this.rectRight.y=this.newLight.y,this.zhezhao.pixelHitTest=!1,this.zhezhao.source="hallUI.zhezhao_05_png",this.zhezhao.width=this.newLight.width,this.zhezhao.height=this.newLight.height,this.textKuangMove();else if(6==this.runAction)this.runAction++,this.newText.text="点击升级按钮升级建筑，升级后可获得更多收益",this.newKuang.scaleX=1,this.newKuang.scaleY=-1,this.newGroup.x=164,this.newGroup.y=697,this.newHand.x=466,this.newHand.y=1e3,this.newLight.x=205,this.newLight.y=870,this.newLight.width=260,this.newLight.height=90,this.rectTop.height=this.newLight.y,this.rectBottom.height=1008-this.rectTop.height-this.newLight.height,this.rectLeft.width=this.newLight.x,this.rectRight.width=640-this.newLight.width-this.rectLeft.width,this.rectLeft.height=this.rectRight.height=this.newLight.height,this.rectLeft.y=this.rectRight.y=this.newLight.y,this.zhezhao.pixelHitTest=!1,this.zhezhao.source="hallUI.zhezhao_04_png",this.zhezhao.width=this.newLight.width,this.zhezhao.height=this.newLight.height,this.textKuangMove();else if(7==this.runAction)this.runAction++,this.newText.text="点击确定按钮，完成本次升级",this.newKuang.scaleX=1,this.newKuang.scaleY=-1,this.newGroup.x=52,this.newGroup.y=300,this.newHand.x=354,this.newHand.y=603,this.newLight.x=70,this.newLight.y=480,this.newLight.width=260,this.newLight.height=90,this.rectTop.height=this.newLight.y,this.rectBottom.height=1008-this.rectTop.height-this.newLight.height,this.rectLeft.width=this.newLight.x,this.rectRight.width=640-this.newLight.width-this.rectLeft.width,this.rectLeft.height=this.rectRight.height=this.newLight.height,this.rectLeft.y=this.rectRight.y=this.newLight.y,this.zhezhao.pixelHitTest=!1,this.zhezhao.source="hallUI.zhezhao_04_png",this.zhezhao.width=this.newLight.width,this.zhezhao.height=this.newLight.height,this.textKuangMove();else if(8==this.runAction){var i={token:t.token,guideType:4};core.Http.sendPostData("updateRookieGuide",i,function(e){0==e.code?Log(e.data):tips.Tips.tip(e.errMsg+"("+e.code+")")}),this.parent&&this.parent.removeChild(this)}},t.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this)},t}(eui.Component);e.Leader=t,__reflect(t.prototype,"view.leader.Leader",["core.IComponent"])}(t=e.leader||(e.leader={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/loginSkin.exml",t}return __extends(t,e),t.prototype.setloginSuccess=function(e,t){this._success=e,this.caller=t},t.prototype.uiComplete=function(){this.inputID=core.TextUtils.createCenterText(26,65280,"黑体",!0),this.inputID.type=egret.TextFieldType.INPUT,this.inputID.text="yy",this.inputID.width=300,this.inputID.height=36,this.inputID.x=187,this.inputID.y=725,this.addChild(this.inputID),this.inputPassword=core.TextUtils.createCenterText(26,65280,"黑体",!0),this.inputPassword.text="123456",this.inputPassword.maxChars=11,this.inputPassword.width=300,this.inputPassword.height=36,this.inputPassword.type=egret.TextFieldType.INPUT,this.inputPassword.inputType=egret.TextFieldInputType.PASSWORD,this.inputPassword.x=187,this.inputPassword.y=775,this.addChild(this.inputPassword);var e=egret.localStorage.getItem("userID"),t=egret.localStorage.getItem("password");null!=e&&e.length>0&&(this.inputID.text=e),null!=t&&t.length>0&&(this.inputPassword.text=t);this.loginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.loginClick,this)},t.prototype.loginClick=function(e){var t=this.inputID.text,i=this.inputPassword.text,n=ModelManager.getInstance().getModel(ModuleName.LOGIN);n.loginParam.userID=t,n.loginParam.password=i,this._success&&this._success.call(this.caller)
},t.prototype.dispose=function(){this.loginBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.loginClick,this),this.removeChildren(),this.parent&&this.parent.removeChild(this)},t}(eui.Component);e.LoginLogic=t,__reflect(t.prototype,"view.login.LoginLogic",["core.IComponent"])}(t=e.login||(e.login={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(i){function n(){var e=i.call(this)||this;return e.init(),e}return __extends(n,i),n.prototype.init=function(){this.facadeItem=new t.MenuItem,this.facadeItem.setImage("hallUI.zhuangshi_png"),this.addChild(this.facadeItem),this.facadeItem.x+=108,this.facadeItem.y+=8,this.cfgEvt()},n.prototype.show=function(){core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).addChild(this)},n.prototype.cfgEvt=function(){this.facadeItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.facadeClick,this)},n.prototype.facadeClick=function(t){this.decorate=new e.decorate.Decorate,core.LayerCenter.getInstance().getLayer(LayerEnum.WINDOW).addChild(this.decorate)},n.prototype.removeEvt=function(){this.facadeItem.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.facadeClick,this)},n.prototype.dispose=function(){i.prototype.dispose.call(this),this.removeEvt(),this.facadeItem&&this.facadeItem.dispose(),this.facadeItem=null,this.removeChildren(),this.parent&&this.parent.removeChild(this)},n}(core.BaseUIComponent);t.BottomMenu=i,__reflect(i.prototype,"view.menu.BottomMenu")}(t=e.menu||(e.menu={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!0,t.touchChildren=!0,t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.setImage=function(e){this.image=core.BitmapCreator.createBitmap(e),this.addChild(this.image)},t.prototype.getWidth=function(){return this.image.width},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.image.parent&&this.image.parent.removeChild(this.image),this.image=null,this.removeChildren(),this.parent&&this.parent.removeChild(this)},t}(core.BaseUIComponent);e.MenuItem=t,__reflect(t.prototype,"view.menu.MenuItem")}(t=e.menu||(e.menu={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(i){function n(){var e=i.call(this)||this;return e.distanceHeight=85,e.initYPosition=0,e.init(),e}return __extends(n,i),n.prototype.init=function(){this.backImg=core.BitmapCreator.createBitmap("hallUI.caidan_png");var e=this.backImg.width;this.nodeItem=new t.MenuItem,this.nodeItem.setImage("hallUI.caidan_2_png"),this.nodeItem.x=e/2-this.nodeItem.getWidth()/2,this.nodeItem.y=this.initYPosition,this.addChild(this.nodeItem),this.archiveItem=new t.MenuItem,this.archiveItem.setImage("hallUI.caidan_1_png"),this.archiveItem.x=e/2-this.archiveItem.getWidth()/2,this.archiveItem.y+=this.initYPosition+this.distanceHeight,this.addChild(this.archiveItem),this.missionItem=new t.MenuItem,this.missionItem.setImage("hallUI.caidan_3_png"),this.missionItem.x=e/2-this.missionItem.getWidth()/2,this.missionItem.y+=this.initYPosition+2*this.distanceHeight,this.addChild(this.missionItem),this.rankItem=new t.MenuItem,this.rankItem.setImage("hallUI.caidan_5_png"),this.rankItem.x=e/2-this.rankItem.getWidth()/2,this.rankItem.y+=this.initYPosition+3*this.distanceHeight,this.addChild(this.rankItem),this.makeFoodItem=new t.MenuItem,this.makeFoodItem.setImage("hallUI.toMakeFood_png"),this.makeFoodItem.x=e/2-this.rankItem.getWidth()/2,this.makeFoodItem.y+=this.initYPosition+4*this.distanceHeight,this.makeFoodItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoMakeFood,this),this.addChild(this.makeFoodItem)},n.prototype.show=function(){core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).addChild(this),this.cftEvt()},n.prototype.hide=function(){this.parent&&core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).removeChild(this),this.removeEvt()},n.prototype.cftEvt=function(){this.archiveItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.achieveItemClick,this),this.missionItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.missionItemClick,this),this.rankItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rankClick,this),core.EventCenter.getInstance().addEventListener(core.UIEventID.CHANGE_RIGHT_MENU,this.changeVisible,this)},n.prototype.changeVisible=function(e){this.parent?this.hide():this.show()},n.prototype.achieveItemClick=function(t){null==this.achievement?this.achievement=new e.achievement.Achievement:this.achievement.uiComplete(),core.LayerCenter.getInstance().getLayer(LayerEnum.WINDOW).addChild(this.achievement)},n.prototype.missionItemClick=function(t){null==this.mission?this.mission=new e.mission.Mission:this.mission.uiComplete(),core.LayerCenter.getInstance().getLayer(LayerEnum.WINDOW).addChild(this.mission)},n.prototype.rankClick=function(t){null==this.rank?this.rank=new e.rank.RankLogic:this.rank.uiComplete(),core.LayerCenter.getInstance().getLayer(LayerEnum.WINDOW).addChild(this.rank)},n.prototype.gotoMakeFood=function(e){},n.prototype.removeEvt=function(){this.archiveItem.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.achieveItemClick,this),this.missionItem.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.missionItemClick,this),this.rankItem.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.rankClick,this),this.makeFoodItem.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoMakeFood,this)},n.prototype.dispose=function(){i.prototype.dispose.call(this);var e=this;core.EventCenter.getInstance().removeEventListener(core.UIEventID.CHANGE_RIGHT_MENU,e.changeVisible,e),e.removeEvt(),e.achievement&&e.achievement.dispose(),e.achievement=null,e.mission&&e.mission.dispose(),e.mission=null,e.rank&&e.rank.dispose(),e.rank=null,e.makeFoodItem&&e.makeFoodItem.dispose(),e.makeFoodItem=null,e.backImg.parent&&e.backImg.parent.removeChild(e.backImg),e.backImg=null,e.nodeItem.dispose(),e.archiveItem.dispose(),e.missionItem.dispose(),e.rankItem.dispose(),e.nodeItem=null,e.archiveItem=null,e.missionItem=null,e.rankItem=null,e.removeChildren(),e.parent&&e.parent.removeChild(e)},n}(core.ModuleComponent);t.RightMenu=i,__reflect(i.prototype,"view.menu.RightMenu")}(t=e.menu||(e.menu={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(i){function n(){var e=i.call(this)||this;return e.init(),e}return __extends(n,i),n.prototype.init=function(){this.barroom=new t.MenuItem,this.barroom.setImage("hallUI.cangku_png"),this.barroom.x=-108,this.addChild(this.barroom),this.myTown=new t.MenuItem,this.myTown.setImage("hallUI.xiaozhen_png"),this.addChild(this.myTown),this.expand=new t.MenuItem,this.expand.setImage("hallUI.kuozhan_png"),this.expand.x=108,this.addChild(this.expand),this.cfgEvt()},n.prototype.show=function(){core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).addChild(this),this.cfgEvt()},n.prototype.cfgEvt=function(){this.barroom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoBarroomClick,this),this.myTown.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoTownClick,this),this.expand.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchRightClick,this)},n.prototype.gotoBarroomClick=function(t){null==this.cook?this.cook=new e.cook.WareHouse:this.cook.uiComplete(),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.cook)},n.prototype.gotoTownClick=function(e){core.Controller.getInstance().startMoule(ModuleName.TOWN)},n.prototype.switchRightClick=function(e){core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.UIEventID.CHANGE_RIGHT_MENU))},n.prototype.removeEvt=function(){this.barroom.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoBarroomClick,this),this.myTown.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoTownClick,this),this.expand.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchRightClick,this)},n.prototype.dispose=function(){i.prototype.dispose.call(this),this.cook&&this.cook.dispose(),this.cook=null,this.removeEvt(),this.barroom.dispose(),this.myTown.dispose(),this.expand.dispose(),this.barroom=null,this.myTown=null,this.expand=null,this.removeChildren(),this.parent&&this.parent.removeChild(this)},n}(core.BaseUIComponent);t.TopMenu=i,__reflect(i.prototype,"view.menu.TopMenu")}(t=e.menu||(e.menu={}))}(view||(view={}));var missionData=null,missionThe=null,o=0,view;!function(e){var t;!function(t){var i=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/MissionSkin.exml",t}return __extends(t,e),t.prototype.uiComplete=function(){missionThe=this,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this),this.updateData()},t.prototype.updateData=function(){var e=ModelManager.getInstance().getModel(ModuleName.LOGIN),t=e.loginParam,i={token:t.token},r=this;core.Http.sendPostData("taskList",i,function(e){o=0,missionData=e.data,r.dsListHeros=[];for(var t=0;t<e.data.length;t++){var i=e.data[t].describe;r.dsListHeros.push({tupian:"InterfaceUI_json.renwu_05_png",name:i})}r.listHeros.dataProvider=new eui.ArrayCollection(r.dsListHeros),r.listHeros.itemRenderer=n,Log(r.listHeros.dataProvider),Log(r.listHeros.itemRenderer)})},t.prototype.closeBtnClick=function(e){this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this),this.listHeros=null,this.dsListHeros=null,this.closeBtn=null},t}(eui.Component);t.Mission=i,__reflect(i.prototype,"view.mission.Mission",["core.IComponent"]);var n=function(t){function i(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,e.dispose,e),e.skinName="resource/ui_skin/MissionListSkin.exml",e}return __extends(i,t),i.prototype.onComplete=function(){this.getBtn.visible=!1,this.complete.visible=!1,this.uncomplete.visible=!1,1==missionData[o].achieveStatus?this.getBtn.visible=!0:2==missionData[o].achieveStatus?this.uncomplete.visible=!0:3==missionData[o].achieveStatus&&(this.complete.visible=!0),o<missionData.length-1&&o++,this.missionGroup1.visible=!1,this.missionGroup2.visible=!1,this.missionGroup3.visible=!1,this.missionGroup4.visible=!1,this.missionGroup5.visible=!1;for(var e=0;e<missionData[o].reward.length;e++)0==e?(this.missionGroup1.visible=!0,this.mission1Img.source="hallUI.currency"+missionData[o].reward[e].currencyType+"_png",this.mission1Txt.text=""+missionData[o].reward[e].currencyNum):1==e?(this.missionGroup2.visible=!0,this.mission2Img.source="hallUI.currency"+missionData[o].reward[e].currencyType+"_png",this.mission2Txt.text=""+missionData[o].reward[e].currencyNum):2==e?(this.missionGroup3.visible=!0,this.mission3Img.source="hallUI.currency"+missionData[o].reward[e].currencyType+"_png",this.mission3Txt.text=""+missionData[o].reward[e].currencyNum):3==e?(this.missionGroup4.visible=!0,this.mission4Img.source="hallUI.currency"+missionData[o].reward[e].currencyType+"_png",this.mission4Txt.text=""+missionData[o].reward[e].currencyNum):4==e&&(this.missionGroup5.visible=!0,this.mission5Img.source="hallUI.currency"+missionData[o].reward[e].currencyType+"_png",this.mission5Txt.text=""+missionData[o].reward[e].currencyNum);this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getBtnClick,this)},i.prototype.getBtnClick=function(){var t=this,i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.loginParam,o={token:n.token,taskId:missionData[this.itemIndex].taskId};core.Http.sendPostData("rewardThing",o,function(n){if(0==n.code){for(var o=new Array,r=0;r<n.currencyTypes.length;r++)o.push({currencyType:n.currencyTypes[r].currencyType,currencyNum:n.currencyTypes[r].currencyNum});i.updateUserData(o,1),t.achievementGet=new e.achievement.AchievementGetReward(n.data),core.LayerCenter.getInstance().getLayer(LayerEnum.WINDOW).addChild(t.achievementGet),tips.Tips.tip("领取成功")}})},i.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this),this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getBtnClick,this)},i}(eui.ItemRenderer);__reflect(n.prototype,"RankingLineLogic",["core.IComponent"])}(t=e.mission||(e.mission={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=null,n=null,o=[],r=function(e){function t(){var t=e.call(this)||this;return t.interval=-1,t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/OrderSkin.exml",t}return __extends(t,e),t.prototype.uiComplete=function(){var e=this,t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.loginParam,n={token:i.token};core.Http.sendGetData("getOrders",n,function(t){0==t.code?e.showinfo(t):tips.Tips.tip(t.errMsg+"("+t.code+")")}),toutap(this.refreshBtn,this.refresh,this,[!1]),this.closeRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this)},t.prototype.showinfo=function(e){var t=this;i=this,n=e,this.dsListOrder=[];for(var r=0;r<n.data.length;r++){var s=""+n.data[r].taskLevel,h="windowUI_json.order_zy_07_png",c="";n.data[r].taskQualify>1&&(c="windowUI_json.level_0"+(n.data[r].taskQualify-1)+"_png");var l="";n.data[r].orderId;o[r]=!0,1==n.data[r].state?(l="windowUI_json.order_zy_04_png",o[r]=!1):0==n.data[r].state&&(l="windowUI_json.order_zy_05_png");for(var d=[],u=[],p=0;p<n.data[r].rewards.length;p++)u[p]=n.data[r].rewards[p].currencyNum,n.data[r].rewards[p].currencyType<10?d[p]="hallUI.currency"+getresourceinfo(n.data[r].rewards[p].currencyType,n.data[r].rewards[p].propId)+"_png":(d[p]="windowUI_json."+jsondata.JsonConfigManager.getPropDataById(n.data[r].rewards[p].currencyType).logo+"_png",h=d[p]);for(var g=[],v=[],f=[],m=[],y=[],w=[],L=[],C=[],T=0;T<n.data[r].orderFoods.length;T++){for(var I=0,_=(n.inventory,n.inventory.foodList),E=0;E<_.length;E++){var k=_[E];k.foodID==n.data[r].orderFoods[T].foodid&&k.foodQualify>=n.data[r].orderFoods[T].foodqualify&&(I+=k.num)}g[T]="Food."+jsondata.JsonConfigManager.getFoodDataById(n.data[r].orderFoods[T].foodid).foodlogo+"_png";var x=getStartSouce(n.data[r].orderFoods[T].foodqualify-1);v[T]=x[0],f[T]=x[1],m[T]=x[2],y[T]=x[3],w[T]=x[4],L[T]=I+"/"+n.data[r].orderFoods[T].needNumber,I>=n.data[r].orderFoods[T].needNumber?(C[T]="windowUI_json.Deta_zy_02_png",L[T]=""):0==n.data[r].state&&(l="windowUI_json.order_zy_05_01_png",o[r]=!1)}this.dsListOrder.push({orderLevel:s,orderIcon:h,orderIconBg:c,isComplete:l,Img1:d[0],num1:u[0],Img2:d[1],num2:u[1],Img3:d[2],num3:u[2],Img4:d[3],num4:u[3],Img5:d[4],num5:u[4],onefoodIcon:g[0],twofoodIcon:g[1],threefoodIcon:g[2],fourfoodIcon:g[3],fivefoodIcon:g[4],oneIsComplete:C[0],twoIsComplete:C[1],threeIsComplete:C[2],fourIsComplete:C[3],fiveIsComplete:C[4],oneNum:L[0],twoNum:L[1],threeNum:L[2],fourNum:L[3],fiveNum:L[4],oneStar1:v[0],oneStar2:f[0],oneStar3:m[0],oneStar4:y[0],oneStar5:w[0],twoStar1:v[1],twoStar2:f[1],twoStar3:m[1],twoStar4:y[1],twoStar5:w[1],threeStar1:v[2],threeStar2:f[2],threeStar3:m[2],threeStar4:y[2],threeStar5:w[2],fourStar1:v[3],fourStar2:f[3],fourStar3:m[3],fourStar4:y[3],fourStar5:w[3],fiveStar1:v[4],fiveStar2:f[4],fiveStar3:m[4],fiveStar4:y[4],fiveStar5:w[4]})}if(this.listOrder.dataProvider=new eui.ArrayCollection(this.dsListOrder),this.listOrder.itemRenderer=a,0!=e.refreshManager.num)this.refreshTxt.text="免费",this.refreshIcon.source="",this.refreshNum.text="";else{this.refreshTxt.text="",this.refreshIcon.source="hallUI.currency9_png";var M=10+10*n.refreshManager.totleNum;M>=200&&(M=200),this.refreshNum.text=""+M}this.leftTimeCount=n.data[0].endTime-n.data[0].startTime,this.leftTime.text=core.TextUtils.getTimeFormatStr(this.leftTimeCount)+"后刷新",-1!=this.interval&&clearInterval(this.interval),this.interval=setInterval(function(){t.leftTimeCount-=1e3,t.leftTimeCount=t.leftTimeCount<0?0:t.leftTimeCount,t.leftTime.text=core.TextUtils.getTimeFormatStr(t.leftTimeCount)+"后刷新",t.leftTimeCount<=0&&t.refresh(!0)},1e3),this.lastitemnum=-20},t.prototype.refresh=function(e){var t=this;void 0===e&&(e=!1),Log("刷新");var i=ModelManager.getInstance().getModel(ModuleName.LOGIN),o=i.loginParam,r={token:o.token},a="refreshReward";e?a="getOrders":0==n.refreshManager.num;var s="刷新成功",h=!1;0==n.refreshManager.num&&(h=!0),core.Http.sendGetData(a,r,function(e){if(0==e.code){if(t.showinfo(e),0==n.refreshManager.num){var o=10*n.refreshManager.totleNum;o>=200&&(o=200),h&&(s+="消耗了"+o+"钻石");var r=e.user.diamond;i.userInfo.userData.diamond=r,core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.USERINFO_DATA))}tips.Tips.tip(s)}else tips.Tips.tip(e.errMsg+"("+e.code+")")})},t.prototype.dispose=function(){this.removeChildren(),clearInterval(this.interval),this.refreshBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.refresh,this),this.closeRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this.parent&&this.parent.removeChild(this)},t}(eui.Component);t.Order=r,__reflect(r.prototype,"view.order.Order",["core.IComponent"]);var a=function(t){function r(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,e.dispose,e),e.skinName="resource/ui_skin/OrderListSkin.exml",e}return __extends(r,t),r.prototype.onComplete=function(){this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBtnClick,this)},r.prototype.sureBtnClick=function(){var t=this;if(o[this.itemIndex]){var r=ModelManager.getInstance().getModel(ModuleName.LOGIN),a=r.loginParam,s={token:a.token,orderId:n.data[this.itemIndex].orderId};core.Http.sendPostData("receiveReward",s,function(o){if(0==o.code){var a=new e.window.Window(19,i,n.data[t.itemIndex].rewards);core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(a),i.showinfo(o);var s=o.user.gold;r.userInfo.userData.gold=s;var h=o.user.diamond;r.userInfo.userData.diamond=h,core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.USERINFO_DATA))}else tips.Tips.tip(o.errMsg+"("+o.code+")")})}},r.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this)},r}(eui.ItemRenderer);__reflect(a.prototype,"orderLogic",["core.IComponent"])}(t=e.order||(e.order={}))}(view||(view={}));var showRankType=null,k=0,rankData=null,view;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.pageNum=0,t.i=0,t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/RankSkin.exml",t}return __extends(t,e),t.prototype.uiComplete=function(){var e=this;this.rankData=null,this.select2.visible=!1,this.select3.visible=!1,this.noselect1.visible=!1,this.paihbText1.textColor=26817,this.paihbText2.textColor=16777215,this.paihbText3.textColor=16777215,this.paihbText1.size=26,this.paihbText2.size=24,this.paihbText3.size=24,this.type=1,this.type2=1,this.rankPage=0,this.donateText.textColor=16186,this.levelText.textColor=40336,this.moneyText.textColor=40336,this.pageNum=0,this.showRank(this.type,this.type2,this.pageNum),showRankType=1,this.scar.addEventListener(eui.UIEvent.CHANGE_END,function(){Log(e.scar.viewport.scrollV+"----"+e.scar.viewport.contentHeight+"===="+e.scar.viewport.height),e.scar.viewport.scrollV>=e.scar.viewport.contentHeight-e.scar.viewport.height&&(Log("触发！"),e.pageNum++,e.showRank(e.type,e.type2,e.pageNum))},this),this.donateSelect.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){1!=e.type&&(showRankType=1,e.scar.stopAnimation(),e.huitan.scrollV=0,e.select1.visible=!0,e.select2.visible=!1,e.select3.visible=!1,e.noselect1.visible=!1,e.noselect2.visible=!0,e.noselect3.visible=!0,e.paihbText1.textColor=26817,e.paihbText2.textColor=16777215,e.paihbText3.textColor=16777215,e.paihbText1.size=26,e.paihbText2.size=24,e.paihbText3.size=24,e.donateText.textColor=16186,e.levelText.textColor=40336,e.moneyText.textColor=40336,e.type=1,e.pageNum=0,e.showRank(e.type,1,e.pageNum))},this),this.levelSelect.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){2!=e.type&&(showRankType=2,e.scar.stopAnimation(),e.huitan.scrollV=0,e.select1.visible=!0,e.select2.visible=!1,e.select3.visible=!1,e.noselect1.visible=!1,e.noselect2.visible=!0,e.noselect3.visible=!0,e.paihbText1.textColor=26817,e.paihbText2.textColor=16777215,e.paihbText3.textColor=16777215,e.paihbText1.size=26,e.paihbText2.size=24,e.paihbText3.size=24,e.donateText.textColor=40336,e.levelText.textColor=16186,e.moneyText.textColor=40336,e.type=2,e.pageNum=0,e.showRank(e.type,1,e.pageNum))},this),this.moneySelect.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){3!=e.type&&(showRankType=1,e.scar.stopAnimation(),e.huitan.scrollV=0,e.select1.visible=!0,e.select2.visible=!1,e.select3.visible=!1,e.noselect1.visible=!1,e.noselect2.visible=!0,e.noselect3.visible=!0,e.paihbText1.textColor=26817,e.paihbText2.textColor=16777215,e.paihbText3.textColor=16777215,e.paihbText1.size=26,e.paihbText2.size=24,e.paihbText3.size=24,e.donateText.textColor=40336,e.levelText.textColor=40336,e.moneyText.textColor=16186,e.type=3,e.pageNum=0,e.showRank(e.type,1,e.pageNum))},this),this.noselect1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.scar.stopAnimation(),e.huitan.scrollV=0,e.select1.visible=!0,e.select2.visible=!1,e.select3.visible=!1,e.noselect1.visible=!1,e.noselect2.visible=!0,e.noselect3.visible=!0,e.paihbText1.textColor=26817,e.paihbText2.textColor=16777215,e.paihbText3.textColor=16777215,e.paihbText1.size=26,e.paihbText2.size=24,e.paihbText3.size=24,e.type2=1,e.pageNum=0,e.showRank(e.type,e.type2,e.pageNum)},this),this.noselect2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.scar.stopAnimation(),e.huitan.scrollV=0,e.select1.visible=!1,e.select2.visible=!0,e.select3.visible=!1,e.noselect1.visible=!0,e.noselect2.visible=!1,e.noselect3.visible=!0,e.paihbText1.textColor=16777215,e.paihbText2.textColor=26817,e.paihbText3.textColor=16777215,e.paihbText1.size=24,e.paihbText2.size=26,e.paihbText3.size=24,e.type2=2,e.pageNum=0,e.showRank(e.type,e.type2,e.pageNum)},this),this.noselect3.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.scar.stopAnimation(),e.huitan.scrollV=0,e.select1.visible=!1,e.select2.visible=!1,e.select3.visible=!0,e.noselect1.visible=!0,e.noselect2.visible=!0,e.noselect3.visible=!1,e.paihbText1.textColor=16777215,e.paihbText2.textColor=16777215,e.paihbText3.textColor=26817,e.paihbText1.size=24,e.paihbText2.size=24,e.paihbText3.size=26,e.type2=3,e.pageNum=0,e.showRank(e.type,e.type2,e.pageNum)},this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.closeBtnClick=function(e){this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.showRank=function(e,t,i){var n=this,o=ModelManager.getInstance().getModel(ModuleName.LOGIN),r=o.loginParam,a={token:r.token,page:1,pageNum:10+10*i};core.Http.sendPostData("rankList",a,function(i){n.rankData=i.data,n.paihbText1.text=""+i.data.userArea,n.showRankListArr=null,n.showSelfListArr=null,1==e?1==t?(n.showRankListArr=i.data.donationRanks.areaRanks,n.showSelfListArr=i.data.donationRanks.myAreaRank,n.myMoney.text=i.data.incomeRanks.myFriendRank.rankValue+"",n.myLevel.text=i.data.incomeRanks.myFriendRank.rankValue+"",rankData=n.showRankListArr,n.buildList(),n.showSelf(e)):2==t?(n.showRankListArr=i.data.donationRanks.provinceRanks,n.showSelfListArr=i.data.donationRanks.myProvinceRank,n.myMoney.text=i.data.incomeRanks.myFriendRank.rankValue+"",n.myLevel.text=i.data.incomeRanks.myFriendRank.rankValue+"",rankData=n.showRankListArr,n.buildList(),n.showSelf(e)):3==t&&(n.showRankListArr=i.data.donationRanks.friendRanks,n.showSelfListArr=i.data.donationRanks.myFriendRank,n.myMoney.text=i.data.incomeRanks.myFriendRank.rankValue+"",n.myLevel.text=i.data.incomeRanks.myFriendRank.rankValue+"",rankData=n.showRankListArr,n.buildList(),n.showSelf(e)):2==e?1==t?(n.showRankListArr=i.data.levelRanks.areaRanks,n.showSelfListArr=i.data.levelRanks.myAreaRank,n.myMoney.text=i.data.incomeRanks.myFriendRank.rankValue+"",n.myLevel.text=i.data.incomeRanks.myFriendRank.rankValue+"",rankData=n.showRankListArr,n.buildList(),n.showSelf(e)):2==t?(n.showRankListArr=i.data.levelRanks.provinceRanks,n.showSelfListArr=i.data.levelRanks.myProvinceRank,n.myMoney.text=i.data.incomeRanks.myFriendRank.rankValue+"",n.myLevel.text=i.data.incomeRanks.myFriendRank.rankValue+"",rankData=n.showRankListArr,n.buildList(),n.showSelf(e)):3==t&&(n.showRankListArr=i.data.levelRanks.friendRanks,n.showSelfListArr=i.data.levelRanks.myFriendRank,n.myMoney.text=i.data.incomeRanks.myFriendRank.rankValue+"",n.myLevel.text=i.data.incomeRanks.myFriendRank.rankValue+"",rankData=n.showRankListArr,n.buildList(),n.showSelf(e)):3==e&&(1==t?(n.showRankListArr=i.data.incomeRanks.areaRanks,n.showSelfListArr=i.data.incomeRanks.myAreaRank,n.myMoney.text=i.data.incomeRanks.myFriendRank.rankValue+"",n.myLevel.text=i.data.incomeRanks.myFriendRank.rankValue+"",rankData=n.showRankListArr,n.buildList(),n.showSelf(e)):2==t?(n.showRankListArr=i.data.incomeRanks.provinceRanks,n.showSelfListArr=i.data.incomeRanks.myProvinceRank,n.myMoney.text=i.data.incomeRanks.myFriendRank.rankValue+"",n.myLevel.text=i.data.incomeRanks.myFriendRank.rankValue+"",rankData=n.showRankListArr,n.buildList(),n.showSelf(e)):3==t&&(n.showRankListArr=i.data.incomeRanks.friendRanks,n.showSelfListArr=i.data.incomeRanks.myFriendRank,n.myMoney.text=i.data.incomeRanks.myFriendRank.rankValue+"",n.myLevel.text=i.data.incomeRanks.myFriendRank.rankValue+"",rankData=n.showRankListArr,n.buildList(),n.showSelf(e)))})},t.prototype.buildList=function(){k=0,this.dsListRanks=[];for(var e=0;e<this.showRankListArr.length;e++){var t="",n="",o=this.showRankListArr[e].playerName,r=this.showRankListArr[e].id%6+1,a="hallUI.tx_"+r+"_png";switch(this.showRankListArr[e].rankIndex){case 1:n="InterfaceUI_json.paihb_06_png",t="";break;case 2:n="InterfaceUI_json.paihb_07_png",t="";break;case 3:n="InterfaceUI_json.paihb_08_png",t="";break;default:n="",t=this.showRankListArr[e].rankIndex+""}this.dsListRanks.push({line:n,rank:t,name:o,icon:a})}this.listRanks.dataProvider=new eui.ArrayCollection(this.dsListRanks),this.listRanks.itemRenderer=i},t.prototype.showSelf=function(e){this.names.text=this.showSelfListArr.playerName,this.icons.source="hallUI.tx_1_png",1==this.showSelfListArr.rankIndex?this.lines.source="InterfaceUI_json.paihb_06_png":2==this.showSelfListArr.rankIndex?this.lines.source="InterfaceUI_json.paihb_07_png":3==this.showSelfListArr.rankIndex?this.lines.source="InterfaceUI_json.paihb_08_png":(this.lines.source="",this.ranks.text=this.showSelfListArr.rankIndex),this.rankingImg.anchorOffsetX=24,0==this.showSelfListArr.ranking?(this.rankingImg.source="InterfaceUI_json.paihb_13_png",this.rankingText.text="持平",this.rankingImg.x=165-24*this.rankingText.text.length-5):this.showSelfListArr.ranking<0?(this.rankingImg.source="InterfaceUI_json.paihb_12_png",this.rankingText.text=-this.showSelfListArr.ranking+"名",this.rankingImg.x=165-12*this.showSelfListArr.ranking.toString().length-12-5):this.showSelfListArr.ranking>0&&(this.rankingImg.source="InterfaceUI_json.paihb_11_png",this.rankingText.text=this.showSelfListArr.ranking+"名",this.rankingImg.x=165-12*this.showSelfListArr.ranking.toString().length-24-5),2==e?(this.showSelfMoney.visible=!1,this.showSelfLevel.visible=!0):(this.showSelfMoney.visible=!0,this.showSelfLevel.visible=!1),this.myMoney.text=this.showSelfListArr.rankValue+"",this.myLevel.text=this.showSelfListArr.rankValue+"",this.myMoneyIcon.anchorOffsetX=44,this.myLevelIcon.anchorOffsetX=44,this.myMoneyIcon.x=257-15*this.myMoney.text.length,this.myLevelIcon.x=257-15*this.myMoney.text.length},t.prototype.dispose=function(){var e=this;this.removeChildren(),this.parent&&this.parent.removeChild(this),this.donateSelect.removeEventListener(egret.TouchEvent.TOUCH_TAP,function(){1!=e.type&&(e.scar.stopAnimation(),e.huitan.scrollV=0,e.select1.visible=!0,e.select2.visible=!1,e.select3.visible=!1,e.noselect1.visible=!1,e.noselect2.visible=!0,e.noselect3.visible=!0,e.paihbText1.textColor=26817,e.paihbText2.textColor=16777215,e.paihbText3.textColor=16777215,e.paihbText1.size=26,e.paihbText2.size=24,e.paihbText3.size=24,e.donateText.textColor=16186,e.levelText.textColor=40336,e.moneyText.textColor=40336,e.type=1,e.showRank(e.type,1))},this),this.levelSelect.removeEventListener(egret.TouchEvent.TOUCH_TAP,function(){2!=e.type&&(e.scar.stopAnimation(),e.huitan.scrollV=0,e.select1.visible=!0,e.select2.visible=!1,e.select3.visible=!1,e.noselect1.visible=!1,e.noselect2.visible=!0,e.noselect3.visible=!0,e.paihbText1.textColor=26817,e.paihbText2.textColor=16777215,e.paihbText3.textColor=16777215,e.paihbText1.size=26,e.paihbText2.size=24,e.paihbText3.size=24,e.donateText.textColor=40336,e.levelText.textColor=16186,e.moneyText.textColor=40336,e.type=2,e.showRank(e.type,1))},this),this.moneySelect.removeEventListener(egret.TouchEvent.TOUCH_TAP,function(){3!=e.type&&(e.scar.stopAnimation(),e.huitan.scrollV=0,e.select1.visible=!0,e.select2.visible=!1,e.select3.visible=!1,e.noselect1.visible=!1,e.noselect2.visible=!0,e.noselect3.visible=!0,e.paihbText1.textColor=26817,e.paihbText2.textColor=16777215,e.paihbText3.textColor=16777215,e.paihbText1.size=26,e.paihbText2.size=24,e.paihbText3.size=24,e.donateText.textColor=40336,e.levelText.textColor=40336,e.moneyText.textColor=16186,e.type=3,e.showRank(e.type,1))},this),this.noselect1.removeEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.scar.stopAnimation(),e.huitan.scrollV=0,e.select1.visible=!0,e.select2.visible=!1,e.select3.visible=!1,e.noselect1.visible=!1,e.noselect2.visible=!0,e.noselect3.visible=!0,e.paihbText1.textColor=26817,e.paihbText2.textColor=16777215,e.paihbText3.textColor=16777215,e.paihbText1.size=26,e.paihbText2.size=24,e.paihbText3.size=24,e.type2=1,e.showRank(e.type,e.type2)},this),this.noselect2.removeEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.scar.stopAnimation(),e.huitan.scrollV=0,e.select1.visible=!1,e.select2.visible=!0,e.select3.visible=!1,e.noselect1.visible=!0,e.noselect2.visible=!1,e.noselect3.visible=!0,e.paihbText1.textColor=16777215,e.paihbText2.textColor=26817,e.paihbText3.textColor=16777215,e.paihbText1.size=24,e.paihbText2.size=26,e.paihbText3.size=24,e.type2=2,e.showRank(e.type,e.type2)},this),this.noselect3.removeEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.scar.stopAnimation(),e.huitan.scrollV=0,e.select1.visible=!1,e.select2.visible=!1,e.select3.visible=!0,e.noselect1.visible=!0,e.noselect2.visible=!0,e.noselect3.visible=!1,e.paihbText1.textColor=16777215,e.paihbText2.textColor=16777215,e.paihbText3.textColor=26817,e.paihbText1.size=24,e.paihbText2.size=24,e.paihbText3.size=26,e.type2=3,e.showRank(e.type,e.type2)},this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this),this.listRanks=null,this.dsListRanks=null,this.closeBtn=null,this.select1=null,this.select2=null,this.select3=null,this.noselect1=null,this.noselect2=null,this.noselect3=null,this.paihbText1=null,this.paihbText2=null,this.paihbText3=null,this.huitan=null,this.scar=null,this.donateSelect=null,this.levelSelect=null,this.moneySelect=null,this.donateText=null,this.levelText=null,this.moneyText=null,this.rankData=null,this.rankPage=null,this.type=null,this.type2=null,this.showRankListArr=null,this.showSelfListArr=null,this.names=null,this.ranks=null,this.icons=null,this.lines=null,this.showSelfMoney=null,this.showSelfLevel=null,this.myMoney=null,this.myMoneyIcon=null,this.myLevel=null,this.myLevelIcon=null,this.rankingImg=null,this.rankingText=null,this.pageNum=null,rankData=null},t}(eui.Component);e.RankLogic=t,__reflect(t.prototype,"view.rank.RankLogic",["core.IComponent"]);var i=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,t.dispose,t),t.addEventListener(eui.UIEvent.COMPLETE,t.onComplete,t),t.skinName="resource/ui_skin/RankListSkin.exml",t
}return __extends(t,e),t.prototype.onComplete=function(){if(k<rankData.length){var e=rankData[k].rankValue,t=rankData[k].rankValue;this.dsListShows=[],this.dsListShows.push({xing:e,count:t,dollImg:"hallUI.currency8_png",starImg:"hallUI.currency7_png"}),this.listShows.dataProvider=new eui.ArrayCollection(this.dsListShows),this.listShows.itemRenderer=n,k++}},t.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this),this.listShows=null,this.dsListShows=null},t}(eui.ItemRenderer);__reflect(i.prototype,"RankLineLogic",["core.IComponent"]);var n=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,t.dispose,t),t.addEventListener(eui.UIEvent.COMPLETE,t.onComplete,t),t.skinName="resource/ui_skin/RankList2Skin.exml",t}return __extends(t,e),t.prototype.onComplete=function(){1==showRankType?(this.showMoney.visible=!0,this.showLevel.visible=!1):2==showRankType&&(this.showMoney.visible=!1,this.showLevel.visible=!0),this.star.x=this.starText.x,this.doll.x=this.dollText.x},t.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this),this.starText=null,this.star=null,this.dollText=null,this.doll=null},t}(eui.ItemRenderer);__reflect(n.prototype,"RankLineLogic2",["core.IComponent"])}(t=e.rank||(e.rank={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/shareSKin.exml",t}return __extends(t,e),t.prototype.uiComplete=function(){var e="你获得了XXXXXXXXXX，分享给好友！";this.shareText.text=e,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.closeBtnClick=function(e){this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this),this.closeBtn=null,this.shareText=null},t}(eui.Component);e.Share=t,__reflect(t.prototype,"view.share.Share",["core.IComponent"])}(t=e.share||(e.share={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=null,n=null,o=null,r=null,a=null,s=null,h=null,c=null,l=null,d=function(e){function t(t,i,n,o){var r=e.call(this)||this;return s=t,h=i,c=n,l=o,r.addEventListener(eui.UIEvent.COMPLETE,r.uiComplete,r),r.skinName="resource/ui_skin/HireSkin.exml",r}return __extends(t,e),t.prototype.uiComplete=function(){var e=this;i=this;var t=ModelManager.getInstance().getModel(ModuleName.LOGIN),s=t.loginParam,h={token:s.token};core.Http.sendGetData("employSource",h,function(t){if(0==t.code){n=1;for(var i=0;i<t.data.length;i++)1==t.data[i].type?o=t.data[i].employSource:2==t.data[i].type?r=t.data[i].employSource:3==t.data[i].type&&(a=t.data[i].employSource);e.dsListHire=[];for(var i=0;i<o.length;i++){var s="玩家"+i,h=o[i].user.strength+"",c=o[i].user.level+"",l=o[i].gold;e.dsListHire.push({HireName:s,chefPower:h,chefLevel:c,money:l})}e.listHire.dataProvider=new eui.ArrayCollection(e.dsListHire),e.listHire.itemRenderer=u}else tips.Tips.tip(t.errMsg+"("+t.code+")")}),this.hireSelect1.source="windowUI_json.Hire_tab2_01_png",this.hireSelect2.source="windowUI_json.Hire_tab1_02_png",this.hireSelect3.source="windowUI_json.Hire_tab3_02_png",this.hireSelect1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hireSelect1Click,this),this.hireSelect2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hireSelect2Click,this),this.hireSelect3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hireSelect3Click,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.hireSelect1Click=function(){n=1,this.hireSelect1.source="windowUI_json.Hire_tab2_01_png",this.hireSelect2.source="windowUI_json.Hire_tab1_02_png",this.hireSelect3.source="windowUI_json.Hire_tab3_02_png",this.dsListHire=[];for(var e=0;e<o.length;e++){var t="玩家"+e,i=o[e].user.strength+"",r=o[e].user.level+"",a=o[e].gold;this.dsListHire.push({HireName:t,chefPower:i,chefLevel:r,money:a})}this.listHire.dataProvider=new eui.ArrayCollection(this.dsListHire),this.listHire.itemRenderer=u},t.prototype.hireSelect2Click=function(){n=2,this.hireSelect1.source="windowUI_json.Hire_tab2_02_png",this.hireSelect2.source="windowUI_json.Hire_tab1_01_png",this.hireSelect3.source="windowUI_json.Hire_tab3_02_png",this.dsListHire=[];for(var e=0;e<a.length;e++){var t="玩家"+e,i=a[e].user.strength+"",o=a[e].user.level+"",r=a[e].gold+"";this.dsListHire.push({HireName:t,chefPower:i,chefLevel:o,money:r})}this.listHire.dataProvider=new eui.ArrayCollection(this.dsListHire),this.listHire.itemRenderer=u},t.prototype.hireSelect3Click=function(){n=3,this.hireSelect1.source="windowUI_json.Hire_tab2_02_png",this.hireSelect2.source="windowUI_json.Hire_tab1_02_png",this.hireSelect3.source="windowUI_json.Hire_tab3_01_png",this.dsListHire=[];for(var e=0;e<r.length;e++){var t="玩家"+e,i=r[e].user.strength+"",o=r[e].user.level+"",a=r[e].gold+"";this.dsListHire.push({HireName:t,chefPower:i,chefLevel:o,money:a})}this.listHire.dataProvider=new eui.ArrayCollection(this.dsListHire),this.listHire.itemRenderer=u},t.prototype.closeBtnClick=function(e){i=null,n=null,o=null,r=null,a=null,s=null,h=null,this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t}(eui.Component);t.Hire=d,__reflect(d.prototype,"view.staff.Hire",["core.IComponent"]);var u=function(t){function d(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,e.dispose,e),e.skinName="resource/ui_skin/HireListSkin.exml",e}return __extends(d,t),d.prototype.onComplete=function(){1==n?(this.friendB.visible=!0,this.friendC.visible=!0):(this.friendB.visible=!1,this.friendC.visible=!1),this.HireBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.HireBtnClick,this)},d.prototype.HireBtnClick=function(){var t=this;Log("雇佣");var d=ModelManager.getInstance().getModel(ModuleName.LOGIN),u=d.loginParam,p="",g="";1==n?(p=o[this.itemIndex].user.id,g=o[this.itemIndex]):2==n?(p=a[this.itemIndex].user.id,g=a[this.itemIndex]):3==n&&(p=r[this.itemIndex].user.id,g=r[this.itemIndex]);var v={token:u.token,id:p,type:s,index:l};Log(l),core.Http.sendPostData("employ",v,function(l){if(0==l.code){Log("雇用成功"),h.dispose(),i.dispose(),t.window=new e.window.Window(7,g,c,p,s),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(t.window);var u=l.user.gold;d.userInfo.userData.gold=u,core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.USERINFO_GOLD))}else 1004==l.code?1==n?(t.window=new e.window.Window(8,l.user,o[t.itemIndex].gold),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(t.window)):2==n?(t.window=new e.window.Window(8,l.user,a[t.itemIndex].gold),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(t.window)):3==n&&(t.window=new e.window.Window(8,l.user,r[t.itemIndex].gold),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(t.window)):tips.Tips.tip(l.errMsg+"("+l.code+")")})},d.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this)},d}(eui.ItemRenderer);__reflect(u.prototype,"hireLogic",["core.IComponent"])}(t=e.staff||(e.staff={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=null,n=null,o=null,r=null,a=0,s=0,h=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplete,t),t.skinName="resource/ui_skin/StaffSkin.exml",t}return __extends(t,e),t.prototype.uiComplete=function(){var e=this;r=this;var t=ModelManager.getInstance().getModel(ModuleName.LOGIN),h=t.loginParam,c={token:h.token};core.Http.sendGetData("getStaff",c,function(t){if(0==t.code){Log(t.data),i=t.data.chefList,n=t.data.asherList,o=t.data.restaurantLevel,Log(i),e.dsListChef=[],e.dsListWaiter=[];for(var r=0;r<i.length;r++)if(1==i[r].staffType){var h="hallUI.tx_1_png",c=Math.floor(i[r].leftTime/3600),l=Math.floor(i[r].leftTime%3600/60),p=Math.floor(i[r].leftTime%60),g="";c>0?(g=c+"小时后离开",a=100*i[r].level+a):l>0?(g=l+"分钟后离开",a=100*i[r].level+a):p>0?(g=">1分钟后离开",a=100*i[r].level+a):g="合同已到期";var v=i[r].level+"";e.dsListChef.push({staffIcon:h,staffTxt:g,level:v})}else if(2==i[r].staffType){var h="windowUI_json.Staff_zy_01_png";e.dsListChef.push({staffIcon:h})}else if(3==i[r].staffType){var h="windowUI_json.Staff_zy_02_png",g="餐厅"+i[r].openLevel+"级开放";e.dsListChef.push({staffIcon:h,staffTxt:g})}for(var r=0;r<n.length;r++)if(1==n[r].staffType){var h="hallUI.tx_1_png",c=Math.floor(n[r].leftTime/3600),l=Math.floor(n[r].leftTime%3600/60),p=Math.floor(n[r].leftTime%60),g="";c>0?(g=c+"小时后离开",s=100*n[r].level+s):l>0?(g=l+"分钟后离开",s=100*n[r].level+s):p>0?(g=">1分钟后离开",s=100*n[r].level+s):g="合同已到期";var v=n[r].level+"";e.dsListWaiter.push({staffIcon:h,staffTxt:g,level:v})}else if(2==n[r].staffType){var h="windowUI_json.Staff_zy_01_png";e.dsListWaiter.push({staffIcon:h})}else if(3==n[r].staffType){var h="windowUI_json.Staff_zy_02_png",g="餐厅"+n[r].openLevel+"级开放";e.dsListWaiter.push({staffIcon:h,staffTxt:g})}e.chefAddNum.text=a+"",e.waiterAddNum.text=s+"",e.listChef.dataProvider=new eui.ArrayCollection(e.dsListChef),e.listChef.itemRenderer=d,e.listWaiter.dataProvider=new eui.ArrayCollection(e.dsListWaiter),e.listWaiter.itemRenderer=u}else tips.Tips.tip(t.errMsg+"("+t.code+")")}),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},t.prototype.closeBtnClick=function(e){this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this),this.dispose()},t.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this),i=null,n=null,r=null,a=0,s=0},t}(eui.Component);t.Staff=h,__reflect(h.prototype,"view.staff.Staff",["core.IComponent"]);var c=0,l=0,d=function(t){function n(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,e.dispose,e),e.skinName="resource/ui_skin/StaffListSkin.exml",e}return __extends(n,t),n.prototype.onComplete=function(){this.Icon.mask=this.IconMask,2==i[c].staffType?this.levelGroup.visible=!1:3==i[c].staffType?this.levelGroup.visible=!1:this.levelGroup.visible=!0,c<i.length-1&&c++,this.IconBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.IconBtnClick,this)},n.prototype.IconBtnClick=function(){2==i[this.itemIndex].staffType?(Log("跳转雇佣界面"),this.hire=new e.staff.Hire(1,r,a,this.itemIndex+1),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.hire)):3==i[this.itemIndex].staffType?(Log("未解锁"),this.window=new e.window.Window(11,r,i[this.itemIndex].openLevel,o),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.window)):0==i[this.itemIndex].leftTime?(this.window=new e.window.Window(10,i[this.itemIndex],r,1,this.itemIndex+1),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.window)):(Log("已经雇佣，后续待开发"),this.window=new e.window.Window(9,i[this.itemIndex],r,1),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.window))},n.prototype.dispose=function(){i=null,c=0,this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this)},n}(eui.ItemRenderer);__reflect(d.prototype,"chefLogic",["core.IComponent"]);var u=function(t){function i(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,e.dispose,e),e.skinName="resource/ui_skin/StaffListSkin.exml",e}return __extends(i,t),i.prototype.onComplete=function(){this.Icon.mask=this.IconMask,2==n[l].staffType?this.levelGroup.visible=!1:3==n[l].staffType?this.levelGroup.visible=!1:this.levelGroup.visible=!0,l<n.length-1&&l++,this.IconBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.IconBtnClick,this)},i.prototype.IconBtnClick=function(){Log(this.itemIndex),2==n[this.itemIndex].staffType?(Log("跳转雇佣界面"),this.hire=new e.staff.Hire(2,r,s,this.itemIndex+1),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.hire)):3==n[this.itemIndex].staffType?(this.window=new e.window.Window(11,r,n[this.itemIndex].openLevel,o),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.window)):0==n[this.itemIndex].leftTime?(this.window=new e.window.Window(10,n[this.itemIndex],r,2,this.itemIndex+1),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.window)):(Log("已经雇佣，后续待开发"),this.window=new e.window.Window(9,n[this.itemIndex],r,2),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.window))},i.prototype.dispose=function(){n=null,l=0,this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this)},i}(eui.ItemRenderer);__reflect(u.prototype,"waiterLogic",["core.IComponent"])}(t=e.staff||(e.staff={}))}(view||(view={}));var TownThe=null,view;!function(e){var t;!function(t){var i=0,n=0,o=0,r=0,a=0,s=function(t){function s(){var e=t.call(this)||this;return e.lock=!0,e.isFirst=!0,e.intecount=[],e.addEventListener(eui.UIEvent.COMPLETE,e.uiComplete,e),e.skinName="resource/ui_skin/TownSkin.exml",e}return __extends(s,t),s.prototype.uiComplete=function(){for(var e=this,t=0;9>t;t++)clearInterval(this.intecount[t]),this.intecount[t]=-1,0==t&&clearInterval(this.lockInterval);if(egret.Tween.removeTweens(this.farmMask),egret.Tween.removeTweens(this.orchardMask),egret.Tween.removeTweens(this.vegetableMask),egret.Tween.removeTweens(this.pastureMask),egret.Tween.removeTweens(this.fishMask),egret.Tween.removeTweens(this.farmShowAddNumGroup),egret.Tween.removeTweens(this.orchardShowAddNumGroup),egret.Tween.removeTweens(this.vegetableShowAddNumGroup),egret.Tween.removeTweens(this.pastureShowAddNumGroup),egret.Tween.removeTweens(this.fishShowAddNumGroup),this.isFirst){this.townScroller.viewport.scrollH=487,this.townScroller.viewport.scrollV=102,toutap(this.restaurantUpdataBtn,this.UpdataBtnClick,this,[1]),toutap(this.farmUpdataBtn,this.UpdataBtnClick,this,[2]),toutap(this.orchardUpdataBtn,this.UpdataBtnClick,this,[3]),toutap(this.vegetableUpdataBtn,this.UpdataBtnClick,this,[4]),toutap(this.pastureUpdataBtn,this.UpdataBtnClick,this,[5]),toutap(this.fishUpdataBtn,this.UpdataBtnClick,this,[6]),toutap(this.foodcenterUpdataBtn,this.UpdataBtnClick,this,[7]),toutap(this.orderUpdataBtn,this.UpdataBtnClick,this,[8]),toutap(this.restaurantSpeedBtn,this.SpeedBtnClick,this,[1]),toutap(this.farmSpeedBtn,this.SpeedBtnClick,this,[2]),toutap(this.orchardSpeedBtn,this.SpeedBtnClick,this,[3]),toutap(this.vegetableSpeedBtn,this.SpeedBtnClick,this,[4]),toutap(this.pastureSpeedBtn,this.SpeedBtnClick,this,[5]),toutap(this.fishSpeedBtn,this.SpeedBtnClick,this,[6]),toutap(this.foodcenterSpeedBtn,this.SpeedBtnClick,this,[7]),toutap(this.orderSpeedBtn,this.SpeedBtnClick,this,[8]),toutap(this.restaurantStopBtn,this.StopBtnClick,this,[1]),toutap(this.foodcenterStopBtn,this.StopBtnClick,this,[7]),toutap(this.farmStopBtn,this.StopBtnClick,this,[2]),toutap(this.orchardStopBtn,this.StopBtnClick,this,[3]),toutap(this.vegetableStopBtn,this.StopBtnClick,this,[4]),toutap(this.pastureStopBtn,this.StopBtnClick,this,[5]),toutap(this.fishStopBtn,this.StopBtnClick,this,[6]),toutap(this.orderStopBtn,this.StopBtnClick,this,[8]),toutap(this.farmGetBtn,this.GetBtnClick,this,[2]),toutap(this.orchardGetBtn,this.GetBtnClick,this,[3]),toutap(this.vegetableGetBtn,this.GetBtnClick,this,[4]),toutap(this.pastureGetBtn,this.GetBtnClick,this,[5]),toutap(this.fishGetBtn,this.GetBtnClick,this,[6]),toutap(this.BG,this.SClick,this,[0]),toutap(this.restaurantS,this.SClick,this,[1]),toutap(this.foodcenterS,this.SClick,this,[7]),toutap(this.farmS,this.SClick,this,[2]),toutap(this.orchardS,this.SClick,this,[3]),toutap(this.vegetableS,this.SClick,this,[4]),toutap(this.pastureS,this.SClick,this,[5]),toutap(this.fishS,this.SClick,this,[6]),toutap(this.orderS,this.SClick,this,[8]);for(var i=[[726,703],[709,725],[739,726],[811,703],[798,726],[829,726],[940,311],[970,311],[957,332],[1138,419],[1170,418],[1151,439]],n=[[120,612,-1],[664,301,-1],[747,350,1],[1342,724,1]],o=0;o<i.length;o++)this.showChicken(i[o][0],i[o][1]),o<n.length&&this.showCow(n[o][0],n[o][1],n[o][2]);this.isFirst=!1}TownThe=this,core.EventCenter.getInstance().addEventListener(core.DataEventID.USERINFO_DATA,this.refreshMetarial2,this),this.townScroller.addEventListener(eui.UIEvent.CHANGE,function(){e.townScroller.viewport.scrollH>=946&&(e.townScroller.viewport.scrollH=946)},this),egret.Tween.get(this.windmill,{loop:!0}).to({rotation:360},5e3);for(var r=[this.cloudy1,this.cloudy2,this.cloudy3,this.cloudy4,this.cloudy5,this.cloudy6],a=[15e3,20700,29100,39300,50700,57e3],s=function(e){var t=r[e];egret.Tween.get(t).to({x:1700},a[e]).call(function(){t.x=-t.width,egret.Tween.get(t,{loop:!0}).to({x:1700},88e3)})},h=0;h<r.length;h++)s(h);for(var c=[this.farmIcon,this.orchardIcon,this.vegetableIcon,this.pastureIcon,this.fishIcon],l=0;l<c.length;l++){var d=c[l];egret.Tween.get(d,{loop:!0}).to({y:d.y+3},300).to({y:d.y},300)}this.farmImg.mask=this.farmRect,this.orchardImg.mask=this.orchardRect,this.vegetableImg.mask=this.vegetableRect,this.pastureImg.mask=this.pastureRect,this.fishImg.mask=this.fishRect;var u=ModelManager.getInstance().getModel(ModuleName.LOGIN),p=u.loginParam,g={token:p.token};core.Http.sendGetData("getBuildAll",g,function(t){0==t.code?(e.currencyBuildingShow(t),e.restaurantBuildingShow(t),e.foodcenterBuildingShow(t),e.orderBuildingShow(t),e.townData=t.data):tips.Tips.tip(t.errMsg+"("+t.code+")")}),core.Http.sendGetData("getFridge",g,function(t){0==t.code?(e.userMessageWheat.text=t.data.rice+"",e.userMessageBanana.text=t.data.banana+"",e.userMessageVegetable.text=t.data.vegetable+"",e.userMessageMeat.text=t.data.meat+"",e.userMessageFish.text=t.data.fish+""):tips.Tips.tip(t.errMsg+"("+t.code+")")}),this.orderShowBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.orderShowBtnClick,this),this.foodcenterBookBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.foodcenterBookBtnClick,this),this.foodcenterResearchBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.foodcenterResearchBtnClick,this),this.foodcenterSpeed2Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.foodcenterSpeed2BtnClick,this),this.foodcenterStop2Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.foodcenterStop2BtnClick,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this.resize();var v=core.LayerCenter.getInstance().stage;v&&v.addEventListener(egret.Event.RESIZE,this.resize,this)},s.prototype.showChicken=function(e,t){var i=RES.getRes("hero_json"),n=RES.getRes("hero_img"),o=new egret.MovieClipDataFactory(i,n),r="Chicken_Stand",a=o.generateMovieClipData(r);this.chicken=new egret.MovieClip(a),this.chicken.gotoAndPlay(RandomUtils.limitInteger(0,2),-1),this.chicken.x=e,this.chicken.y=t;var s=RandomUtils.limitInteger(0,1);0==s&&(s=-1),this.chicken.scaleX=s,this.showActionGroup.addChild(this.chicken)},s.prototype.showCow=function(e,t,i){var n=RES.getRes("hero_json"),o=RES.getRes("hero_img"),r=new egret.MovieClipDataFactory(n,o),a="Cow_Stand",s=r.generateMovieClipData(a);this.cow=new egret.MovieClip(s),this.cow.gotoAndPlay(RandomUtils.limitInteger(0,2),-1);var h=RandomUtils.limitInteger(0,1);0==h&&(h=-1),this.cow.scaleX=i,this.cow.x=e,this.cow.y=t,this.showActionGroup.addChild(this.cow)},s.prototype.resize=function(){var e=core.LayerCenter.getInstance().stage;this.showMaterials.y=e.stageHeight-this.showMaterials.height,Log(this.showMaterials.y),this.orderSelect.y=e.stageHeight,this.foodcenterSelect.y=e.stageHeight,this.restaurantSelect.y=e.stageHeight,this.pastureSelect.y=e.stageHeight,this.fishSelect.y=e.stageHeight,this.orchardSelect.y=e.stageHeight,this.farmSelect.y=e.stageHeight,this.vegetableSelect.y=e.stageHeight},s.prototype.bshowicon=function(e,t){e.visible=t},s.prototype.UpdataBtnClick=function(t){var i=this;if(this.lock){this.lock=!1;var n=ModelManager.getInstance().getModel(ModuleName.LOGIN),o=n.loginParam,r={token:o.token,type:t},a=["","manorRestaurant","manorFarm","manorOrchard","manorVegetableGarden","manorPasture","manorFishpond","manorResearch","manorOrderCenter"],s=this.townData[a[t]].needGold;core.Http.sendPostData("isAllowUpgrade",r,function(t){0==t.code?(i.uiComplete(),tips.Tips.tip("升级成功"),i.lock=!0):4002==t.code?(i.window=new e.window.Window(8,t.user,s),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(i.window),i.lock=!0):4003==t.code?(tips.Tips.tip(t.errMsg),i.lock=!0):(tips.Tips.tip(t.errMsg+"("+t.code+")"),i.lock=!0)})}},s.prototype.SpeedBtnClick=function(e){var t=this;if(this.lock){this.lock=!1;var i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.loginParam,o={token:n.token,type:e},r=["restaurant","farm","orchard","vegetable","pasture","fish","foodcenter","order"],a=r[e-1]+"S",s=r[e-1]+"P",h=r[e-1]+"UpdataTxt",c=r[e-1]+"Specil";core.Http.sendPostData("accelerateAllowUpgrade",o,function(i){0==i.code?(tips.Tips.tip("升级加速成功"),clearInterval(t.intecount[e]),t.showCompilete(t[a],e,t[s],t[c],0,t[h]),t.lock=!0):(tips.Tips.tip(i.errMsg+"("+i.code+")"),t.lock=!0)})}},s.prototype.StopBtnClick=function(e){var t=this;if(this.lock){this.lock=!1;var i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.loginParam,o={token:n.token,type:e};core.Http.sendPostData("quitAllowUpgrade",o,function(e){0==e.code?(t.uiComplete(),tips.Tips.tip("取消升级成功"),t.lock=!0):(tips.Tips.tip(e.errMsg+"("+e.code+")"),t.lock=!0)})}},s.prototype.GetBtnClick=function(e){var t=this;if(this.lock){this.lock=!1;var s=[0,0,i,n,o,r,a,0],h=["restaurant","farm","orchard","vegetable","pasture","fish","foodcenter","order"],c=h[e-1]+"P",l=this[c].localToGlobal().x,d=this[c].localToGlobal().y;if(0==s[e])tips.Tips.tip("暂无出产，稍后再试"),this.uiComplete(),this.lock=!0;else{var u=ModelManager.getInstance().getModel(ModuleName.LOGIN),p=u.loginParam,g={token:p.token,type:e};core.Http.sendPostData("collect",g,function(i){0==i.code?(t.uiComplete(),tips.Tips.tip("收取成功"),tips.ShowNum.AddNum(s[e],e-1,t.stage.stageHeight-25),t.getCurrencyAction(e-1,l,d),t.lock=!0):(tips.Tips.tip(i.errMsg+"("+i.code+")"),t.lock=!0)})}}},s.prototype.orderShowBtnClick=function(){this.order=new e.order.Order,core.LayerCenter.getInstance().getLayer(LayerEnum.WINDOW).addChild(this.order)},s.prototype.foodcenterBookBtnClick=function(){this.handbook=new e.handbook.Handbook,core.LayerCenter.getInstance().getLayer(LayerEnum.WINDOW).addChild(this.handbook)},s.prototype.foodcenterResearchBtnClick=function(){this.cook=new e.cook.Research,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.cook)},s.prototype.foodcenterSpeed2BtnClick=function(){var e=this,t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.loginParam,n={token:i.token};core.Http.sendGetData("addSpeed",n,function(t){0==t.code?(e.uiComplete(),tips.Tips.tip("研究加速成功")):tips.Tips.tip(t.errMsg+"("+t.code+")")})},s.prototype.foodcenterStop2BtnClick=function(){var e=this,t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.loginParam,n={token:i.token,foodID:this.townData.foodID};core.Http.sendPostData("cancerBookResearch",n,function(t){0==t.code?(e.uiComplete(),tips.Tips.tip("取消研究成功")):tips.Tips.tip(t.errMsg+"("+t.code+")")})},s.prototype.SClick=function(e){for(var t=[null,this.restaurantSelect,this.farmSelect,this.orchardSelect,this.vegetableSelect,this.pastureSelect,this.fishSelect,this.foodcenterSelect,this.orderSelect],i=[null,this.restaurantP,this.farmP,this.orchardP,this.vegetableP,this.pastureP,this.fishP,this.foodcenterP,this.orderP],n=0;n<t.length;n++){var o=t[n],r=i[n];o&&(o==t[e]?(egret.Tween.get(o).to({y:this.stage.stageHeight-194},600),egret.Tween.get(r).to({scaleX:1.15,scaleY:1.15},200)):(egret.Tween.get(o).to({y:this.stage.stageHeight},600),r.scaleX=1,r.scaleY=1))}},s.prototype.restaurantBuildingShow=function(e){this.restaurantUpdataNum.text=e.data.manorRestaurant.needGold,this.restaurantSpeedNum.text=""+Math.ceil(e.data.manorRestaurant.leftTime/1e3/60),this.restaurantStopNum.text="剩余："+core.TextUtils.getTimeFormatStrInTown(e.data.manorRestaurant.leftTime/1e3),this.restaurantName.text="餐厅Lv."+e.data.restaurant.level,0==e.data.manorRestaurant.needGold&&(this.restaurantUpdataImg.source="hallUI.Update_button_01_01_png",this.restaurantUpdataNum.text=""),e.data.manorRestaurant.leftTime>0?(this.restaurantIsUpdata.visible=!0,this.restaurantNU.visible=!1,this.restaurantUD.visible=!0,this.restaurantUpdataTxt.text=core.TextUtils.getTimeFormatStr(e.data.manorRestaurant.leftTime)+"",this.restaurantSpecil||(this.restaurantSpecil=core.StuntManager.getInstance().createStunt(4),this.restaurantSpecil.play(-1),this.restaurantSpecil.x=this.restaurantP.x-120,this.restaurantSpecil.y=this.restaurantP.y-80,this.restaurantS.addChild(this.restaurantSpecil),this.restaurantP.visible=!1),this.showCompilete(this.restaurantS,TownBuildType.restaurant,this.restaurantP,this.restaurantSpecil,e.data.manorRestaurant.leftTime,this.restaurantUpdataTxt)):(this.restaurantSpecil&&(this.restaurantSpecil.parent.removeChild(this.restaurantSpecil),this.restaurantSpecil=null,this.restaurantP.visible=!0),this.restaurantNU.visible=!0,this.restaurantIsUpdata.visible=!1,this.restaurantUD.visible=!1)},s.prototype.orderBuildingShow=function(e){this.orderUpdataNum.text=e.data.manorOrderCenter.needGold,this.orderSpeedNum.text=""+Math.ceil(e.data.manorOrderCenter.leftTime/1e3/60),this.orderStopNum.text="剩余："+core.TextUtils.getTimeFormatStrInTown(e.data.manorOrderCenter.leftTime/1e3),this.orderName.text="订单中心Lv."+e.data.orderCenter.level,0==e.data.manorOrderCenter.needGold&&(this.orderUpdataImg.source="hallUI.Update_button_01_01_png",this.orderUpdataNum.text=""),e.data.manorOrderCenter.leftTime>0?(this.orderIsUpdata.visible=!0,this.orderNU.visible=!1,this.orderUD.visible=!0,this.orderUpdataTxt.text=core.TextUtils.getTimeFormatStr(e.data.manorOrderCenter.leftTime)+"",this.orderSpecil||(this.orderSpecil=core.StuntManager.getInstance().createStunt(4),this.orderSpecil.play(-1),this.orderSpecil.x=this.orderP.x-120,this.orderSpecil.y=this.orderP.y-40,this.orderS.addChild(this.orderSpecil),this.orderP.visible=!1),this.showCompilete(this.orderS,TownBuildType.order,this.orderP,this.orderSpecil,e.data.manorOrderCenter.leftTime,this.orderUpdataTxt)):(this.orderSpecil&&(this.orderSpecil.parent.removeChild(this.orderSpecil),this.orderSpecil=null,this.orderP.visible=!0),this.orderNU.visible=!0,this.orderIsUpdata.visible=!1,this.orderUD.visible=!1)},s.prototype.foodcenterBuildingShow=function(e){var t=this;this.foodcenterUpdataNum.text=e.data.manorResearch.needGold,this.foodcenterSpeedNum.text=""+Math.ceil(e.data.manorResearch.leftTime/1e3/60),this.foodcenterStopNum.text="剩余："+core.TextUtils.getTimeFormatStrInTown(e.data.manorResearch.leftTime/1e3),this.foodcenterSpeed2Num.text=""+Math.ceil(e.data.foodcenter.lefttime/1e3/60),this.foodcenterStop2Num.text="剩余："+core.TextUtils.getTimeFormatStrInTown(e.data.foodcenter.lefttime/1e3),this.foodcenterName.text="美食中心Lv."+e.data.foodcenter.level,0==e.data.manorResearch.needGold&&(this.foodcenterUpdataImg.source="hallUI.Update_button_01_01_png",this.foodcenterUpdataNum.text=""),e.data.manorResearch.leftTime>0?(this.foodcenterNU.visible=!1,this.foodcenterRD.visible=!1,this.foodcenterUD.visible=!0,this.foodcenterIsUpdata.visible=!0,this.foodcenterUpdataTxt.text=core.TextUtils.getTimeFormatStr(e.data.manorResearch.leftTime)+"",this.foodcenterSpecil||(this.foodcenterSpecil=core.StuntManager.getInstance().createStunt(4),this.foodcenterSpecil.play(-1),this.foodcenterSpecil.x=this.foodcenterP.x-120,this.foodcenterSpecil.y=this.foodcenterP.y-60,this.foodcenterS.addChild(this.foodcenterSpecil),this.foodcenterP.visible=!1),this.showCompilete(this.foodcenterS,TownBuildType.foodcenter,this.foodcenterP,this.foodcenterSpecil,e.data.manorResearch.leftTime,this.foodcenterUpdataTxt)):e.data.foodcenter.lefttime>0?(this.foodcenterNU.visible=!1,this.foodcenterUD.visible=!1,this.foodcenterRD.visible=!0,this.foodcenterIsUpdata.visible=!0,this.foodcenterUpdataTxt.text=core.TextUtils.getTimeFormatStr(e.data.foodcenter.lefttime)+"",this.lockInterval=setInterval(function(){e.data.foodcenter.lefttime-=1e3,e.data.foodcenter.lefttime=e.data.foodcenter.lefttime<0?0:e.data.foodcenter.lefttime,t.foodcenterUpdataTxt.text=core.TextUtils.getTimeFormatStr(e.data.foodcenter.lefttime)+"",e.data.foodcenter.lefttime<=0&&(clearInterval(t.lockInterval),t.uiComplete())},1e3)):(this.foodcenterSpecil&&(this.foodcenterSpecil.parent.removeChild(this.foodcenterSpecil),this.foodcenterSpecil=null,this.foodcenterP.visible=!0),this.foodcenterIsUpdata.visible=!1,this.foodcenterUD.visible=!1,this.foodcenterRD.visible=!1,this.foodcenterNU.visible=!0)},s.prototype.currencyMovie=function(e,t,s,h,c,l,d,u,p,g,v){c>=s?(h.width=208,t.scaleY=1):(h.width=208,e=6e4-e,egret.Tween.get(h,{loop:!1}).to({width:208},e).call(function(){1==v?i+=l:2==v?n+=l:3==v?o+=l:4==v?r+=l:5==v&&(a+=l),egret.Tween.removeTweens(h),c+=l,d.text="已产出："+c,TownThe.currencyMovie(0,t,s,h,c,l,d,u,p,g),TownThe.currencyUpMovie(u,p,g,l)}))},s.prototype.currencyUpMovie=function(e,t,i,n){t.text="+"+n,e.visible=!0,e.alpha=1,e.width=t.textWidth,e.x=i.x,e.y=i.y-150,egret.Tween.get(e,{loop:!1}).to({y:e.y-25,alpha:0},500).call(function(){egret.Tween.removeTweens(e)})},s.prototype.currencyBuildingShow=function(e){this.farmHide.mask=this.farmMask,this.orchardHide.mask=this.orchardMask,this.vegetableHide.mask=this.vegetableMask,this.pastureHide.mask=this.pastureMask,this.fishHide.mask=this.fishMask,i=e.data.farm.rice,n=e.data.orchard.banana,o=e.data.vegetableGarden.vegetable,r=e.data.pasture.meat,a=e.data.fishpond.fish,this.currencyMovie(e.data.riceStartTime,this.farmRect,e.data.farm.maxCapacity,this.farmMask,i,e.data.farm.output,this.farmGetNum,this.farmShowAddNumGroup,this.farmAddNum,this.farmP,1),this.currencyMovie(e.data.bananaStartTime,this.orchardRect,e.data.orchard.maxCapacity,this.orchardMask,n,e.data.orchard.output,this.orchardGetNum,this.orchardShowAddNumGroup,this.orchardAddNum,this.orchardP,2),this.currencyMovie(e.data.vegetableStartTime,this.vegetableRect,e.data.vegetableGarden.maxCapacity,this.vegetableMask,o,e.data.vegetableGarden.output,this.vegetableGetNum,this.vegetableShowAddNumGroup,this.vegetableAddNum,this.vegetableP,3),this.currencyMovie(e.data.meatStartTime,this.pastureRect,e.data.pasture.maxCapacity,this.pastureMask,r,e.data.pasture.output,this.pastureGetNum,this.pastureShowAddNumGroup,this.pastureAddNum,this.pastureP,4),this.currencyMovie(e.data.fishStartTime,this.fishRect,e.data.fishpond.maxCapacity,this.fishMask,a,e.data.fishpond.output,this.fishGetNum,this.fishShowAddNumGroup,this.fishAddNum,this.fishP,5),this.farmName.text="农田Lv."+e.data.farm.level,this.orchardName.text="果园Lv."+e.data.orchard.level,this.vegetableName.text="菜园Lv."+e.data.vegetableGarden.level,this.pastureName.text="牧场Lv."+e.data.pasture.level,this.fishName.text="鱼塘Lv."+e.data.fishpond.level,this.farmUpdataNum.text=e.data.manorFarm.needGold,this.farmGetNum.text="已产出："+e.data.farm.rice,this.farmSpeedNum.text=""+Math.ceil(e.data.manorFarm.leftTime/1e3/60),this.farmStopNum.text="剩余："+core.TextUtils.getTimeFormatStrInTown(e.data.manorFarm.leftTime/1e3),this.orchardUpdataNum.text=e.data.manorOrchard.needGold,this.orchardGetNum.text="已产出："+e.data.orchard.banana,this.orchardSpeedNum.text=""+Math.ceil(e.data.manorOrchard.leftTime/1e3/60),this.orchardStopNum.text="剩余："+core.TextUtils.getTimeFormatStrInTown(e.data.manorOrchard.leftTime/1e3),this.vegetableUpdataNum.text=e.data.manorVegetableGarden.needGold,this.vegetableGetNum.text="已产出："+e.data.vegetableGarden.vegetable,this.vegetableSpeedNum.text=""+Math.ceil(e.data.manorVegetableGarden.leftTime/1e3/60),this.vegetableStopNum.text="剩余："+core.TextUtils.getTimeFormatStrInTown(e.data.manorVegetableGarden.leftTime/1e3),this.pastureUpdataNum.text=e.data.manorPasture.needGold,this.pastureGetNum.text="已产出："+e.data.pasture.meat,this.pastureSpeedNum.text=""+Math.ceil(e.data.manorPasture.leftTime/1e3/60),this.pastureStopNum.text="剩余："+core.TextUtils.getTimeFormatStrInTown(e.data.manorPasture.leftTime/1e3),this.fishUpdataNum.text=e.data.manorFishpond.needGold,this.fishGetNum.text="已产出："+e.data.fishpond.fish,this.fishSpeedNum.text=""+Math.ceil(e.data.manorFishpond.leftTime/1e3/60),this.fishStopNum.text="剩余："+core.TextUtils.getTimeFormatStrInTown(e.data.manorFishpond.leftTime/1e3),this.farmRect.scaleY=e.data.farm.rice/e.data.farm.maxCapacity,this.orchardRect.scaleY=e.data.orchard.banana/e.data.orchard.maxCapacity,this.vegetableRect.scaleY=e.data.vegetableGarden.vegetable/e.data.vegetableGarden.maxCapacity,this.pastureRect.scaleY=e.data.pasture.meat/e.data.pasture.maxCapacity,this.fishRect.scaleY=e.data.fishpond.fish/e.data.fishpond.maxCapacity,0==e.data.manorFarm.needGold&&(this.farmUpdataImg.source="hallUI.Update_button_01_01_png",this.farmUpdataNum.text=""),0==e.data.manorOrchard.needGold&&(this.orchardUpdataImg.source="hallUI.Update_button_01_01_png",this.orchardUpdataNum.text=""),0==e.data.manorVegetableGarden.needGold&&(this.vegetableUpdataImg.source="hallUI.Update_button_01_01_png",this.vegetableUpdataNum.text=""),0==e.data.manorPasture.needGold&&(this.pastureUpdataImg.source="hallUI.Update_button_01_01_png",this.pastureUpdataNum.text=""),0==e.data.manorFishpond.needGold&&(this.fishUpdataImg.source="hallUI.Update_button_01_01_png",this.fishUpdataNum.text=""),e.data.manorFarm.leftTime>0?(this.farmIsShow.visible=!1,this.farmIsUpdata.visible=!0,this.farmNU.visible=!1,this.farmUD.visible=!0,this.farmUpdataTxt.text=core.TextUtils.getTimeFormatStr(e.data.manorFarm.leftTime)+"",this.farmSpecil||(this.farmSpecil=core.StuntManager.getInstance().createStunt(4),this.farmSpecil.play(-1),this.farmSpecil.x=this.farmP.x-120,this.farmSpecil.y=this.farmP.y-80,this.farmS.addChild(this.farmSpecil),this.farmP.visible=!1),this.showCompilete(this.farmS,TownBuildType.farm,this.farmP,this.farmSpecil,e.data.manorFarm.leftTime,this.farmUpdataTxt)):(this.farmSpecil&&(this.farmSpecil.parent.removeChild(this.farmSpecil),this.farmSpecil=null,this.farmP.visible=!0),this.farmIsUpdata.visible=!1,this.farmIsShow.visible=!0,this.farmUD.visible=!1,this.farmNU.visible=!0),e.data.manorFishpond.leftTime>0?(this.fishIsShow.visible=!1,this.fishIsUpdata.visible=!0,this.fishNU.visible=!1,this.fishUD.visible=!0,this.fishUpdataTxt.text=core.TextUtils.getTimeFormatStr(e.data.manorFishpond.leftTime)+"",this.fishSpecil||(this.fishSpecil=core.StuntManager.getInstance().createStunt(4),this.fishSpecil.play(-1),this.fishSpecil.x=this.fishP.x-120,this.fishSpecil.y=this.fishP.y-80,this.fishS.addChild(this.fishSpecil),this.fishP.visible=!1),this.showCompilete(this.fishS,TownBuildType.fish,this.fishP,this.fishSpecil,e.data.manorFishpond.leftTime,this.fishUpdataTxt)):(this.fishSpecil&&(this.fishSpecil.parent.removeChild(this.fishSpecil),this.fishSpecil=null,this.fishP.visible=!0),this.fishIsUpdata.visible=!1,this.fishIsShow.visible=!0,this.fishUD.visible=!1,this.fishNU.visible=!0),e.data.manorOrchard.leftTime>0?(this.orchardIsShow.visible=!1,this.orchardIsUpdata.visible=!0,this.orchardNU.visible=!1,this.orchardUD.visible=!0,this.orchardUpdataTxt.text=core.TextUtils.getTimeFormatStr(e.data.manorOrchard.leftTime)+"",this.orchardSpecil||(this.orchardSpecil=core.StuntManager.getInstance().createStunt(4),this.orchardSpecil.play(-1),this.orchardSpecil.x=this.orchardP.x-120,this.orchardSpecil.y=this.orchardP.y-60,this.orchardS.addChild(this.orchardSpecil),this.orchardP.visible=!1),this.showCompilete(this.orchardS,TownBuildType.orchard,this.orchardP,this.orchardSpecil,e.data.manorOrchard.leftTime,this.orchardUpdataTxt)):(this.orchardSpecil&&(this.orchardSpecil.parent.removeChild(this.orchardSpecil),this.orchardSpecil=null,this.orchardP.visible=!0),this.orchardIsUpdata.visible=!1,this.orchardIsShow.visible=!0,this.orchardUD.visible=!1,this.orchardNU.visible=!0),e.data.manorPasture.leftTime>0?(this.pastureIsShow.visible=!1,this.pastureNU.visible=!1,this.pastureIsUpdata.visible=!0,this.pastureUD.visible=!0,this.pastureUpdataTxt.text=core.TextUtils.getTimeFormatStr(e.data.manorPasture.leftTime)+"",this.pastureSpecil||(this.pastureSpecil=core.StuntManager.getInstance().createStunt(4),this.pastureSpecil.play(-1),this.pastureSpecil.x=this.pastureP.x-120,this.pastureSpecil.y=this.pastureP.y-80,this.pastureS.addChild(this.pastureSpecil),this.pastureP.visible=!1),this.showCompilete(this.pastureS,TownBuildType.pasture,this.pastureP,this.pastureSpecil,e.data.manorPasture.leftTime,this.pastureUpdataTxt)):(this.pastureSpecil&&(this.pastureSpecil.parent.removeChild(this.pastureSpecil),this.pastureSpecil=null,this.pastureP.visible=!0),this.pastureIsUpdata.visible=!1,this.pastureUD.visible=!1,this.pastureIsShow.visible=!0,this.pastureNU.visible=!0),e.data.manorVegetableGarden.leftTime>0?(this.vegetableIsShow.visible=!1,this.vegetableNU.visible=!1,this.vegetableIsUpdata.visible=!0,this.vegetableUD.visible=!0,this.vegetableUpdataTxt.text=core.TextUtils.getTimeFormatStr(e.data.manorVegetableGarden.leftTime)+"",this.vegetableSpecil||(this.vegetableSpecil=core.StuntManager.getInstance().createStunt(4),this.vegetableSpecil.play(-1),this.vegetableSpecil.x=this.vegetableP.x-120,this.vegetableSpecil.y=this.vegetableP.y-80,this.vegetableS.addChild(this.vegetableSpecil),this.vegetableP.visible=!1),this.showCompilete(this.vegetableS,TownBuildType.vegetable,this.vegetableP,this.vegetableSpecil,e.data.manorVegetableGarden.leftTime,this.vegetableUpdataTxt)):(this.vegetableSpecil&&(this.vegetableSpecil.parent.removeChild(this.vegetableSpecil),this.vegetableSpecil=null,this.vegetableP.visible=!0),this.vegetableIsShow.visible=!0,this.vegetableNU.visible=!0,this.vegetableIsUpdata.visible=!1,this.vegetableUD.visible=!1)
},s.prototype.getCurrencyAction=function(e,t,i){for(var n=function(){var n,a="hallUI.currency"+e+"_png";n=core.BitmapCreator.createBitmap(a),n.x=t+10*r*RandomUtils.limitInteger(-5,5),n.y=i+10*r*RandomUtils.limitInteger(-5,5),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(n),egret.Tween.get(n,{loop:!1}).to({y:o.stage.stageHeight-35,x:30+130*(e-1),scaleX:.3,scaleY:.3},1e3).call(function(){egret.Tween.removeTweens(n),n.parent.removeChild(n)})},o=this,r=0;5>r;r++)n()},s.prototype.showCompilete=function(e,t,i,n,o,r){var a=this;this.intecount[t]=setInterval(function(){if(o=0>o?0:o,o-=1e3,r.text=core.TextUtils.getTimeFormatStr(o)+"",0>o){r.text="";var s=core.StuntManager.getInstance().createStunt(5);s.play(3),s.x=i.x-160,s.y=i.y-130,e.addChild(s),clearInterval(a.intecount[t]),a.intecount[t]=-1,n.visible=!1,i.visible=!0,i.scaleX=i.scaleY=0,egret.Tween.get(i).to({scaleX:1.2,scaleY:1.2},500).to({scaleX:1,scaleY:1},200).call(function(){e.removeChild(s),a.uiComplete()},a)}},1e3)},s.prototype.refreshMetarial2=function(){var e=this,t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=(t.userInfo.userData,t.loginParam),n={token:i.token};core.Http.sendGetData("getFridge",n,function(t){0==t.code?(e.userMessageWheat.text=t.data.rice+"",e.userMessageBanana.text=t.data.banana+"",e.userMessageVegetable.text=t.data.vegetable+"",e.userMessageMeat.text=t.data.meat+"",e.userMessageFish.text=t.data.fish+""):tips.Tips.tip(t.errMsg+"("+t.code+")")})},s.prototype.dispose=function(){core.Controller.getInstance().startMoule(ModuleName.HALL),core.Controller.getInstance().showFriend(),this.removeChildren();for(var e=0;e<this.intecount.length;e++)-1!=this.intecount[e]&&clearInterval(this.intecount[e]);egret.Tween.removeTweens(this.farmP),egret.Tween.removeTweens(this.orchardP),egret.Tween.removeTweens(this.vegetableP),egret.Tween.removeTweens(this.pastureP),egret.Tween.removeTweens(this.fishP),egret.Tween.removeTweens(this.orderP),egret.Tween.removeTweens(this.restaurantP),egret.Tween.removeTweens(this.foodcenterP),this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this.isFirst=!0},s}(eui.Component);t.Town=s,__reflect(s.prototype,"view.town.Town",["core.IComponent"])}(t=e.town||(e.town={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(t){function i(){var e=t.call(this)||this;return e.init(),e}return __extends(i,t),i.prototype.init=function(){this.town=new e.town.Town,core.LayerCenter.getInstance().getLayer(LayerEnum.MENU).addChild(this.town)},i.prototype.dispose=function(){t.prototype.dispose.call(this),this.town=null,this.removeChildren()},i}(core.ModuleComponent);t.TownChange=i,__reflect(i.prototype,"view.town.TownChange")}(t=e.town||(e.town={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(t){function i(){var e=t.call(this)||this;return e.type=1,e.addEventListener(eui.UIEvent.COMPLETE,e.userMessageComplete,e),e.skinName="resource/ui_skin/UserMessageSkin.exml",e}return __extends(i,t),i.prototype.removeImage=function(e){e&&e.parent&&e.parent.removeChild(e)},i.prototype.clearImage=function(){var e=this;e.removeImage(e.userMessageIcon),e.removeImage(e.userMessageIconKuang),e.removeImage(e.userMessageName),e.removeImage(e.userMessageMoney),e.removeImage(e.userMessageLevel),e.removeImage(e.userMessageMeat),e.removeImage(e.userMessageVegetable),e.removeImage(e.userMessageFish),e.removeImage(e.userMessageBanana),e.removeImage(e.userMessageWheat),e.removeImage(e.userMessageHeart),e.removeImage(e.userMessageDiamond)},i.prototype.userMessageComplete=function(){this.enterGrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterGradeClick,this),this.refreshUserMessage(),1==this.type&&(core.EventCenter.getInstance().addEventListener(core.DataEventID.USERINFO_DATA,this.refreshUserData,this),core.EventCenter.getInstance().addEventListener(core.DataEventID.USERINFO_GOLD,this.justGold,this)),core.EventCenter.getInstance().addEventListener(core.DataEventID.UPDATE_ARTICLE_INHALL,this.updateArticle,this),core.EventCenter.getInstance().addEventListener(core.DataEventID.FLUSH_LOVE_VALUE,this.updateLoveNumber,this)},i.prototype.enterGradeClick=function(){this.grade=new e.grade.Grade,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.grade)},i.prototype.removeEvt=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.userMessageComplete,this),core.EventCenter.getInstance().removeEventListener(core.DataEventID.USERINFO_DATA,this.refreshUserData,this),core.EventCenter.getInstance().removeEventListener(core.DataEventID.USERINFO_GOLD,this.justGold,this),core.EventCenter.getInstance().removeEventListener(core.DataEventID.UPDATE_ARTICLE_INHALL,this.updateArticle,this),core.EventCenter.getInstance().removeEventListener(core.DataEventID.FLUSH_LOVE_VALUE,this.updateLoveNumber,this)},i.prototype.updateLoveNumber=function(t){var i=t.messageData,n=i.loveNumber,o=ModelManager.getInstance().getModel(ModuleName.LOGIN);o.userInfo.userData.love=n;var r=i.changeValue;0>r&&(tips.ShowPower.ShowLover(r),this.refreshUserMessage()),r>0&&e.fly.FlyLove.flyLoveValue(r,i.runx,i.runy,this.refreshUserMessage,this),0==r&&this.refreshUserMessage()},i.prototype.updateArticle=function(e){var t=e.messageData;47==t.id&&egret.Tween.get(this.userMessageIconKuang,{loop:!1}).to({scaleX:0,scaleY:0},750).call(function(){this.userMessageIconKuang.source="Decode_json."+t.resourceid+"_png",egret.Tween.get(this.userMessageIconKuang,{loop:!1}).to({scaleX:1.3,scaleY:1.3},100).to({scaleX:1,scaleY:1},250).call(function(){egret.Tween.removeTweens(this.userMessageIconKuang)},this)},this)},i.prototype.refreshUserData=function(e){var t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.userInfo.userData;Log(i);var n=Number(this.userMessageMoney.text);Number(this.userMessageMeat.text),Number(this.userMessageVegetable.text),Number(this.userMessageFish.text),Number(this.userMessageBanana.text),Number(this.userMessageWheat.text),Number(this.userMessageHeart.text),Number(this.userMessageDiamond.text),i.gold-n;this.refreshUserMessage()},i.prototype.justGold=function(t){var i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.userInfo.userData,o=this,r=Number(this.userMessageMoney.text),a=n.gold-r;a>0?(e.fly.Fly.flyGoldInHallStunt(o.refreshUserMessage,o),tips.ShowMoney.ShowMoney(a)):0>a?(this.refreshUserMessage(),tips.ShowMoney.ShowMoney(a)):this.refreshUserMessage()},i.prototype.refreshUserMessage=function(){var e=ModelManager.getInstance().getModel(ModuleName.LOGIN),t=e.userInfo.userData,i=this;""==i.userMessageIcon.source&&(i.userMessageIcon.source="hallUI.tx_1_png"),i.userMessageName.text=t.userNick+"",i.userMessageMoney.text=t.gold+"",i.userMessageHeart.text=t.love+"/"+e.userInfo.restaurant.loveLimit,i.userMessageDiamond.text=t.diamond+""},i.prototype.refreshFriendUserData=function(){var e=this,t=ModelManager.getInstance().getModel(ModuleName.FRIEND),i=t.currentFriendInfo.friendUserData,n=new Array;n=t.currentFriendInfo.articleList;for(var o=0;o<n.length;o++)47==n[o].id&&(e.userMessageIconKuang.source="Decode_json."+n[o].resourceid+"_png");e.userMessageIcon.source="tx_"+Math.floor(5*Math.random()+1)+"_png",e.userMessageName.text=i.userNick,e.userMessageMoney.text=i.gold+"",e.userMessageLevel.text=""+i.star,e.userMessageMeat.text=i.meat+"",e.userMessageVegetable.text=i.vegetable+"",e.userMessageFish.text=i.fish+"",e.userMessageBanana.text=i.fruit+"",e.userMessageWheat.text=i.rice+"",1==e.userMessageLevel.text.length?(e.userMessageLevel.x=165,e.userMessageLevelIcon.x=e.userMessageLevel.x):2==e.userMessageLevel.text.length?(e.userMessageLevel.x=160,e.userMessageLevelIcon.x=e.userMessageLevel.x):3==e.userMessageLevel.text.length?(e.userMessageLevel.x=155,e.userMessageLevelIcon.x=e.userMessageLevel.x):4==e.userMessageLevel.text.length?(e.userMessageLevel.x=150,e.userMessageLevelIcon.x=e.userMessageLevel.x):5==e.userMessageLevel.text.length&&(e.userMessageLevel.x=145,e.userMessageLevelIcon.x=e.userMessageLevel.x),e.showMaterials.visible=!1},i.prototype.dispose=function(){this.removeEvt(),this.removeChildren(),this.parent&&this.parent.removeChild(this)},i}(eui.Component);t.UserMessage=i,__reflect(i.prototype,"view.userMessage.UserMessage",["core.IComponent"])}(t=e.userMessage||(e.userMessage={}))}(view||(view={}));var view;!function(e){var t;!function(t){var i=function(t){function i(e,i,n,o,r){var a=t.call(this)||this;return a.type=e,a.data=i,a.data2=n,a.data3=o,a.data4=r,a.addEventListener(eui.UIEvent.COMPLETE,a.uiComplete,a),a.skinName="resource/ui_skin/windowSkin.exml",a}return __extends(i,t),i.prototype.uiComplete=function(){var e=["one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eight","nineteen"],t=e[this.type-1];this[t].visible=!0,this[t+"Action"](),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.oneAction=function(){this.oneIcon.source="Food."+jsondata.JsonConfigManager.getFoodDataById(this.data2).foodlogo+"_png",Log(this.data3);for(var e=this.data3.split(","),t=0;t<e.length;t++)"0"==e[t]||(this.oneImg.source="hallUI.currency"+(t+1)+"_png",this.oneNum.text="-"+e[t]);this.oneSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.twoAction=function(){Log(this.data),Log(this.data2),this.twoFoodName.text=jsondata.JsonConfigManager.getFoodDataById(this.data2).foodname,this.twoFoodIcon.source="Food."+jsondata.JsonConfigManager.getFoodDataById(this.data2).foodlogo+"_png";var e=getStartSouce(this.data3-1);this.star0.source=e[0],this.star1.source=e[1],this.star2.source=e[2],this.star3.source=e[3],this.star4.source=e[4],this.twoSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.threeAction=function(){this.threeNeedNum.text=this.data3,this.threeNum.text=this.data2,this.threeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.threeBtnClick,this),this.threeBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.threeBtn2Click,this)},i.prototype.threeBtn2Click=function(){this.staff=new e.staff.Staff,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.staff),this.dispose(),null!=this.data&&this.data.dispose()},i.prototype.threeBtnClick=function(){this.facility=new e.facility.Facility,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.facility),this.dispose(),null!=this.data&&this.data.dispose()},i.prototype.fourAction=function(){Log(this.data),Log(this.data2);for(var e=0;e<this.data2.currencyList.length;e++)this["currencyImage"+e].source="hallUI.currency"+this.data2.currencyList[e].currencyType+"_png",this["currencyTxt"+e].text=""+this.data2.currencyList[e].currencyNum,this["currencyTxt"+e].textColor=this.fourChooseColor(this.data2.currencyList[e].currencyType,this.data2.currencyList[e].currencyNum);this.fourSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.fourSureBtnClick,this)},i.prototype.fourSureBtnClick=function(){this.dispose(),this.data3.dispose(),Log(core.Controller.getInstance().p_moduleName),"view.town.TownChange"==core.Controller.getInstance().p_moduleName||(core.Controller.getInstance().startMoule(ModuleName.TOWN),core.Controller.getInstance().hideFriend())},i.prototype.fourChooseColor=function(e,t){return 1==e?t<=this.data.rice?0:16711680:2==e?t<=this.data.banana?0:16711680:3==e?t<=this.data.vegetable?0:16711680:4==e?t<=this.data.meat?0:16711680:5==e?t<=this.data.fish?0:16711680:void 0},i.prototype.fiveAction=function(){this.fiveNum.text=this.data2+"/"+this.data3,this.fiveSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.fiveSureBtnClick,this)},i.prototype.fiveSureBtnClick=function(){this.staff=new e.staff.Staff,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.staff),this.dispose(),null!=this.data&&this.data.hide()},i.prototype.sixAction=function(){this.sixNum.text=this.data2+"/"+this.data3,this.sixSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sixSureBtnClick,this)},i.prototype.sixSureBtnClick=function(){this.facility=new e.facility.Facility,core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(this.facility),this.dispose()},i.prototype.sevenAction=function(){Log(this.data),this.sevenIcon.source="hallUI.tx_1_png",this.sevenPowerUp.text=100*this.data.user.level+"";var e=100*this.data.user.level+this.data2;this.sevenPower.text=e+"",this.sevenSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.eightAction=function(){Log(this.data),Log(this.data2),this.eightNeedNum.text=""+this.data2,this.eightNum.text=""+this.data.gold,this.eightSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.nineAction=function(){Log(this.data),this.nineIcon.source="hallUI.tx_1_png",this.nineLevel.text=this.data.level,this.ninePower.text=100*this.data.level+"";var e="",t=Math.floor(this.data.leftTime/3600),i=Math.floor(this.data.leftTime%3600/60),n=Math.floor(this.data.leftTime%60);t>0?e=t+"小时":i>0?e=i+"分钟":n>0&&(e=">1分钟"),this.nineTime.text=e,this.nineSure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nineSureClick,this),this.nineClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.nineSureClick=function(){var e=this,t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.loginParam,n=this.data.id,o={token:i.token,id:n,type:this.data3};core.Http.sendPostData("dismiss",o,function(t){0==t.code?(Log("解雇成功"),core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.FIRE_SUCCESS,{employId:n,type:e.data3})),e.data2.dispose(),e.dispose()):tips.Tips.tip(t.errMsg+"("+t.code+")")})},i.prototype.tenAction=function(){Log(this.data),Log(this.data2),Log(this.data3),Log(this.data4),this.tenIcon.source="hallUI.tx_1_png",this.tenLevel.text=this.data.level,this.tenPower.text=100*this.data.level+"",this.tenMoney.text=this.data.gold,this.tenSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tenSureBtnClick,this),this.tenCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tenCloseBtnClick,this)},i.prototype.tenSureBtnClick=function(){var t=this,i=ModelManager.getInstance().getModel(ModuleName.LOGIN),n=i.loginParam,o=(this.data.id,{token:n.token,id:this.data.id,type:this.data3,index:this.data4});core.Http.sendPostData("employAgain",o,function(n){if(0==n.code){Log("雇用成功"),t.dispose(),t.data2.dispose(),t.window=new e.window.Window(7,n,100*t.data.level,t.data.id,-1),core.LayerCenter.getInstance().getLayer(LayerEnum.TIP).addChild(t.window);var o=n.user.gold;i.userInfo.userData.gold=o,core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.USERINFO_GOLD))}else tips.Tips.tip(n.errMsg+"("+n.code+")")})},i.prototype.tenCloseBtnClick=function(){var e=this,t=ModelManager.getInstance().getModel(ModuleName.LOGIN),i=t.loginParam,n=this.data.id,o={token:i.token,id:n,type:this.data3};core.Http.sendPostData("dismiss",o,function(t){0==t.code?(Log("解雇成功"),core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.FIRE_SUCCESS,{employId:n,type:e.data3})),e.dispose(),e.data2.dispose()):tips.Tips.tip(t.errMsg+"("+t.code+")")})},i.prototype.elevenAction=function(){this.elevenNeedNum.text=this.data2,this.elevenNum.text=this.data3,this.elevenSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.elevenSureBtnClick,this)},i.prototype.elevenSureBtnClick=function(){this.dispose(),this.data.dispose(),Log(core.Controller.getInstance().p_moduleName),"view.town.TownChange"==core.Controller.getInstance().p_moduleName||(core.Controller.getInstance().startMoule(ModuleName.TOWN),core.Controller.getInstance().hideFriend())},i.prototype.fifteenAction=function(){this.fifteenIcon.source="Food."+jsondata.JsonConfigManager.getFoodDataById(this.data2).foodlogo+"_png",this.fifteenNum.text="-"+this.data3+"%",this.fifteenSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.sixteenAction=function(){this.sixteenFoodIcon.source="Food."+jsondata.JsonConfigManager.getFoodDataById(this.data2).foodlogo+"_png",this.sixteenNum.text="+"+this.data3+"%",this.sixteenSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.seventeenAction=function(){this.seventeenFoodName.text=jsondata.JsonConfigManager.getFoodDataById(parseInt(this.data3)).foodname,this.seventeenFoodIcon.source="Food."+jsondata.JsonConfigManager.getFoodDataById(parseInt(this.data3)).foodlogo+"_png",this.seventeenSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.nineteenAction=function(){this.dsListNineteen=[],console.log(this.data2);for(var e=0;e<this.data2.length;e++){var t=this.data2[e].currencyNum,i="hallUI.currency"+getresourceinfo(this.data2[e].type,this.data2[e].propId)+"_png";i=this.data2[e].currencyType<10?"hallUI.currency"+getresourceinfo(this.data2[e].currencyType,this.data2[e].propId)+"_png":"windowUI_json."+jsondata.JsonConfigManager.getPropDataById(this.data2[e].currencyType).logo+"_png",this.dsListNineteen.push({rewardNum:t,rewardImg:i})}this.listNineteen.dataProvider=new eui.ArrayCollection(this.dsListNineteen),this.listNineteen.itemRenderer=n,this.nineteenSureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.closeBtnClick=function(e){7==this.type&&(-1==this.data4||core.EventCenter.getInstance().dispatchEvent(new core.DataEvent(core.DataEventID.HIRE_SUCCESS,{employId:this.data3,type:this.data4}))),this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this),this.closeBtn&&this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnClick,this)},i}(eui.Component);t.Window=i,__reflect(i.prototype,"view.window.Window",["core.IComponent"]);var n=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.onComplete,t),t.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,t.dispose,t),t.skinName="resource/ui_skin/OrderRewardListSkin.exml",t}return __extends(t,e),t.prototype.onComplete=function(){},t.prototype.dispose=function(){this.removeChildren(),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.dispose,this)},t}(eui.ItemRenderer);__reflect(n.prototype,"rewardLogic",["core.IComponent"])}(t=e.window||(e.window={}))}(view||(view={}));var test;!function(e){var t=function(e){function t(t,i){var n=e.call(this)||this;return n.callback=t,n.callee=i,n.addEventListener(eui.UIEvent.COMPLETE,n.uiComplete,n),n.skinName="resource/ui_skin/blingbling.exml",n}return __extends(t,e),t.prototype.uiComplete=function(){var e=this;e.eyeKuang.mask=e.eyeMask,e.eyeBai.mask=e.eyeMask0,e.eyeBall.mask=e.eyeMask1,egret.Tween.get(e.BG,{loop:!1}).to({scaleY:1},500).call(function(){egret.Tween.get(e.eyeMask0,{loop:!0}).to({scaleY:1},2e3).to({scaleY:.3},2e3).to({scaleY:1},300),egret.Tween.get(e.eyeMask1,{loop:!0}).to({scaleY:1},2e3).to({scaleY:.3},2e3).to({scaleY:1},300),egret.Tween.get(e.eyeBall,{loop:!0}).to({x:e.eyeBall.x+56},200).to({x:e.eyeBall.x+25},1e3).to({x:e.eyeBall.x+56},500).to({x:e.eyeBall.x},1e3),egret.Tween.get(e.eyeMask,{loop:!0}).to({scaleY:1},2e3).to({scaleY:.3},2e3).to({scaleY:1},300).call(function(){e.callback&&e.callback.call(e.callee),e.dispose()})},e)},t.prototype.dispose=function(){var e=this;e.BG&&egret.Tween.removeTweens(e.BG),e.eyeMask&&egret.Tween.removeTweens(e.eyeMask),e.eyeMask0&&egret.Tween.removeTweens(e.eyeMask0),e.eyeMask1&&egret.Tween.removeTweens(e.eyeMask1),e.eyeBall&&egret.Tween.removeTweens(e.eyeBall),e.callback=null,e.callee=null,e.BG=null,e.eyeKuang=null,e.eyeBai=null,e.eyeBall=null,e.eyeMask=null,e.eyeMask0=null,e.eyeMask1=null,this.removeChildren(),this.parent&&this.parent.removeChild(this)},t}(eui.Component);e.BlingBling=t,__reflect(t.prototype,"test.BlingBling",["core.IComponent"])}(test||(test={}));var test;!function(e){var t=function(){function e(){}return e.getStaticArticle=function(e){for(var t=[],i=0;i<e.length;i++){var n=new data.ArticleData;n.articletype=e[i].articleType,n.resourceid=e[i].model,t.push(n)}return t},e.getMsg200=function(){var e={name:"大黄蜂",desc:"Espionage Director"},t={BID:"BID1",name:"守护塔",level:1,desc:"防御进攻，减少伤害"},i={BID:"BID2",name:"龙血树",level:2,desc:"补血"},n=[t,i],o={role:e,buildingList:n};return o},e}();e.TestDataCenter=t,__reflect(t.prototype,"test.TestDataCenter")}(test||(test={}));